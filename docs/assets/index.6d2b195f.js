(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const Or=(e,t,r="",n)=>{const s=document.createElement(e);return s.innerText=t,n&&Object.entries(n).forEach(([o,i])=>{o==="parent"&&i.appendChild(s),o==="children"?i.forEach(a=>s.appendChild(a)):o==="eventListeners"?Object.entries(i).forEach(([a,c])=>{s.addEventListener(a,c)}):o==="color"||o==="background"?s.style[o]=i:o==="style"?Object.entries(i).forEach(([a,c])=>{a=a.replace(/([A-Z])/g,"-$1").toLowerCase(),s.style.setProperty(a,c)}):o==="class"?s.classList.add(...i.split(".").filter(a=>a)):o.startsWith("data-")?s.setAttribute(o,i):s[o]=i}),s},Rs=(e,...t)=>{let r=[],n={};const s=o=>{if(typeof o=="string")r.push(Or("span",o));else if(typeof o=="number")r.push(Or("span",o.toString()));else if(o instanceof Promise){const i=tt();o.then(a=>{i.innerHTML="",i.appendChild(tt(a))}),r.push(i)}else o instanceof HTMLElement?r.push(o):o instanceof Array?o.forEach(s):n={...n,...o}};for(let o of t)s(o);return Or(e,"","",{...n,children:r})},me=e=>(...t)=>Rs(e,...t),ee=me("p"),ve=me("h2"),Gr=me("h3"),A=me("div"),pt=me("pre"),B=me("button"),rr=me("a"),Bt=(e,t=null,...r)=>rr(t??e,{href:e,onclick:n=>{n.metaKey||n.ctrlKey||(n.preventDefault(),history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate")))},style:{color:"inherit",textDecoration:"none",border:"1px solid #ccc",padding:"0.1em",borderRadius:"0.25em"}},...r),tt=me("span"),xo=me("table"),Zn=me("tr"),Jo=me("td"),Go=me("th"),L=(...e)=>({style:Object.assign({},...e)}),Ts=(e,t)=>{const r=t.filter(s=>typeof s=="string").join(" "),n=Rs(e,...t);return n.value=r,n},bt=(...e)=>Ts("input",e),Br=(...e)=>Ts("textarea",e),ue=(...e)=>{const t=A({style:{background:"var(--background-color)",color:"var(--color)",padding:"1em",paddingBottom:"2em",borderRadius:"1em",zIndex:"2000",overflowY:"scroll"}},...e),r=A({style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(166, 166, 166, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2000"}});r.appendChild(t),document.body.appendChild(r);const n=()=>{r.remove(),document.removeEventListener("keydown",s)},s=o=>{o.key==="Escape"&&n()};return r.onclick=n,document.addEventListener("keydown",s),t.onclick=o=>{o.stopPropagation()},r};function Bo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dr={exports:{}},Ms={},_e={},rt={},kt={},H={},St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(g){if(super(),!e.IDENTIFIER.test(g))throw new Error("CodeGen: name must be a valid identifier");this.str=g}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(g){super(),this._items=typeof g=="string"?[g]:g}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const g=this._items[0];return g===""||g==='""'}get str(){var g;return(g=this._str)!==null&&g!==void 0?g:this._str=this._items.reduce((P,E)=>`${P}${E}`,"")}get names(){var g;return(g=this._names)!==null&&g!==void 0?g:this._names=this._items.reduce((P,E)=>(E instanceof r&&(P[E.str]=(P[E.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(f,...g){const P=[f[0]];let E=0;for(;E<g.length;)a(P,g[E]),P.push(f[++E]);return new n(P)}e._=s;const o=new n("+");function i(f,...g){const P=[b(f[0])];let E=0;for(;E<g.length;)P.push(o),a(P,g[E]),P.push(o,b(f[++E]));return c(P),new n(P)}e.str=i;function a(f,g){g instanceof n?f.push(...g._items):g instanceof r?f.push(g):f.push(h(g))}e.addCodeArg=a;function c(f){let g=1;for(;g<f.length-1;){if(f[g]===o){const P=u(f[g-1],f[g+1]);if(P!==void 0){f.splice(g-1,3,P);continue}f[g++]="+"}g++}}function u(f,g){if(g==='""')return f;if(f==='""')return g;if(typeof f=="string")return g instanceof r||f[f.length-1]!=='"'?void 0:typeof g!="string"?`${f.slice(0,-1)}${g}"`:g[0]==='"'?f.slice(0,-1)+g.slice(1):void 0;if(typeof g=="string"&&g[0]==='"'&&!(f instanceof r))return`"${f}${g.slice(1)}`}function d(f,g){return g.emptyStr()?f:f.emptyStr()?g:i`${f}${g}`}e.strConcat=d;function h(f){return typeof f=="number"||typeof f=="boolean"||f===null?f:b(Array.isArray(f)?f.join(","):f)}function v(f){return new n(b(f))}e.stringify=v;function b(f){return JSON.stringify(f).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function y(f){return typeof f=="string"&&e.IDENTIFIER.test(f)?new n(`.${f}`):s`[${f}]`}e.getProperty=y;function $(f){if(typeof f=="string"&&e.IDENTIFIER.test(f))return new n(`${f}`);throw new Error(`CodeGen: invalid export name: ${f}, use explicit $id name mapping`)}e.getEsmExportName=$;function m(f){return new n(f.toString())}e.regexpCode=m})(St);var Ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=St;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,h;if(((h=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||h===void 0?void 0:h.has(u))||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=s;class o extends t.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:h}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(d)}[${h}]`}}e.ValueScopeName=o;const i=(0,t._)`\n`;class a extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:t.nil}}get(){return this._scope}name(u){return new o(u,this._newName(u))}value(u,d){var h;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(u),{prefix:b}=v,y=(h=d.key)!==null&&h!==void 0?h:d.ref;let $=this._values[b];if($){const g=$.get(y);if(g)return g}else $=this._values[b]=new Map;$.set(y,v);const m=this._scope[b]||(this._scope[b]=[]),f=m.length;return m[f]=d.ref,v.setValue(d,{property:b,itemIndex:f}),v}getValue(u,d){const h=this._values[u];if(!!h)return h.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,t._)`${u}${h.scopePath}`})}scopeCode(u=this._values,d,h){return this._reduceValues(u,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},d,h)}_reduceValues(u,d,h={},v){let b=t.nil;for(const y in u){const $=u[y];if(!$)continue;const m=h[y]=h[y]||new Map;$.forEach(f=>{if(m.has(f))return;m.set(f,n.Started);let g=d(f);if(g){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${P} ${f} = ${g};${this.opts._n}`}else if(g=v?.(f))b=(0,t._)`${b}${g}${this.opts._n}`;else throw new r(f);m.set(f,n.Completed)})}return b}}e.ValueScope=a})(Ar);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=St,r=Ar;var n=St;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Ar;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,p){return this}}class i extends o{constructor(l,p,S){super(),this.varKind=l,this.name=p,this.rhs=S}render({es5:l,_n:p}){const S=l?r.varKinds.var:this.varKind,T=this.rhs===void 0?"":` = ${this.rhs}`;return`${S} ${this.name}${T};`+p}optimizeNames(l,p){if(!!l[this.name.str])return this.rhs&&(this.rhs=ie(this.rhs,l,p)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(l,p,S){super(),this.lhs=l,this.rhs=p,this.sideEffects=S}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,p){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=ie(this.rhs,l,p),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ce(l,this.rhs)}}class c extends a{constructor(l,p,S,T){super(l,S,T),this.op=p}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class h extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class v extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,p){return this.code=ie(this.code,l,p),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((p,S)=>p+S.render(l),"")}optimizeNodes(){const{nodes:l}=this;let p=l.length;for(;p--;){const S=l[p].optimizeNodes();Array.isArray(S)?l.splice(p,1,...S):S?l[p]=S:l.splice(p,1)}return l.length>0?this:void 0}optimizeNames(l,p){const{nodes:S}=this;let T=S.length;for(;T--;){const M=S[T];M.optimizeNames(l,p)||(Ie(l,M.names),S.splice(T,1))}return S.length>0?this:void 0}get names(){return this.nodes.reduce((l,p)=>X(l,p.names),{})}}class y extends b{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class $ extends b{}class m extends y{}m.kind="else";class f extends y{constructor(l,p){super(p),this.condition=l}render(l){let p=`if(${this.condition})`+super.render(l);return this.else&&(p+="else "+this.else.render(l)),p}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let p=this.else;if(p){const S=p.optimizeNodes();p=this.else=Array.isArray(S)?new m(S):S}if(p)return l===!1?p instanceof f?p:p.nodes:this.nodes.length?this:new f(Ae(l),p instanceof f?[p]:p.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,p){var S;if(this.else=(S=this.else)===null||S===void 0?void 0:S.optimizeNames(l,p),!!(super.optimizeNames(l,p)||this.else))return this.condition=ie(this.condition,l,p),this}get names(){const l=super.names;return ce(l,this.condition),this.else&&X(l,this.else.names),l}}f.kind="if";class g extends y{}g.kind="for";class P extends g{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,p){if(!!super.optimizeNames(l,p))return this.iteration=ie(this.iteration,l,p),this}get names(){return X(super.names,this.iteration.names)}}class E extends g{constructor(l,p,S,T){super(),this.varKind=l,this.name=p,this.from=S,this.to=T}render(l){const p=l.es5?r.varKinds.var:this.varKind,{name:S,from:T,to:M}=this;return`for(${p} ${S}=${T}; ${S}<${M}; ${S}++)`+super.render(l)}get names(){const l=ce(super.names,this.from);return ce(l,this.to)}}class N extends g{constructor(l,p,S,T){super(),this.loop=l,this.varKind=p,this.name=S,this.iterable=T}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,p){if(!!super.optimizeNames(l,p))return this.iterable=ie(this.iterable,l,p),this}get names(){return X(super.names,this.iterable.names)}}class O extends y{constructor(l,p,S){super(),this.name=l,this.args=p,this.async=S}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}O.kind="func";class C extends b{render(l){return"return "+super.render(l)}}C.kind="return";class J extends y{render(l){let p="try"+super.render(l);return this.catch&&(p+=this.catch.render(l)),this.finally&&(p+=this.finally.render(l)),p}optimizeNodes(){var l,p;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(p=this.finally)===null||p===void 0||p.optimizeNodes(),this}optimizeNames(l,p){var S,T;return super.optimizeNames(l,p),(S=this.catch)===null||S===void 0||S.optimizeNames(l,p),(T=this.finally)===null||T===void 0||T.optimizeNames(l,p),this}get names(){const l=super.names;return this.catch&&X(l,this.catch.names),this.finally&&X(l,this.finally.names),l}}class F extends y{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}F.kind="catch";class G extends y{render(l){return"finally"+super.render(l)}}G.kind="finally";class W{constructor(l,p={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...p,_n:p.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new $]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,p){const S=this._extScope.value(l,p);return(this._values[S.prefix]||(this._values[S.prefix]=new Set)).add(S),S}getScopeValue(l,p){return this._extScope.getValue(l,p)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,p,S,T){const M=this._scope.toName(p);return S!==void 0&&T&&(this._constants[M.str]=S),this._leafNode(new i(l,M,S)),M}const(l,p,S){return this._def(r.varKinds.const,l,p,S)}let(l,p,S){return this._def(r.varKinds.let,l,p,S)}var(l,p,S){return this._def(r.varKinds.var,l,p,S)}assign(l,p,S){return this._leafNode(new a(l,p,S))}add(l,p){return this._leafNode(new c(l,e.operators.ADD,p))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new v(l)),this}object(...l){const p=["{"];for(const[S,T]of l)p.length>1&&p.push(","),p.push(S),(S!==T||this.opts.es5)&&(p.push(":"),(0,t.addCodeArg)(p,T));return p.push("}"),new t._Code(p)}if(l,p,S){if(this._blockNode(new f(l)),p&&S)this.code(p).else().code(S).endIf();else if(p)this.code(p).endIf();else if(S)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new f(l))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(f,m)}_for(l,p){return this._blockNode(l),p&&this.code(p).endFor(),this}for(l,p){return this._for(new P(l),p)}forRange(l,p,S,T,M=this.opts.es5?r.varKinds.var:r.varKinds.let){const K=this._scope.toName(l);return this._for(new E(M,K,p,S),()=>T(K))}forOf(l,p,S,T=r.varKinds.const){const M=this._scope.toName(l);if(this.opts.es5){const K=p instanceof t.Name?p:this.var("_arr",p);return this.forRange("_i",0,(0,t._)`${K}.length`,z=>{this.var(M,(0,t._)`${K}[${z}]`),S(M)})}return this._for(new N("of",T,M,p),()=>S(M))}forIn(l,p,S,T=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${p})`,S);const M=this._scope.toName(l);return this._for(new N("in",T,M,p),()=>S(M))}endFor(){return this._endBlockNode(g)}label(l){return this._leafNode(new u(l))}break(l){return this._leafNode(new d(l))}return(l){const p=new C;if(this._blockNode(p),this.code(l),p.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(l,p,S){if(!p&&!S)throw new Error('CodeGen: "try" without "catch" and "finally"');const T=new J;if(this._blockNode(T),this.code(l),p){const M=this.name("e");this._currNode=T.catch=new F(M),p(M)}return S&&(this._currNode=T.finally=new G,this.code(S)),this._endBlockNode(F,G)}throw(l){return this._leafNode(new h(l))}block(l,p){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(p),this}endBlock(l){const p=this._blockStarts.pop();if(p===void 0)throw new Error("CodeGen: not in self-balancing block");const S=this._nodes.length-p;if(S<0||l!==void 0&&S!==l)throw new Error(`CodeGen: wrong number of nodes: ${S} vs ${l} expected`);return this._nodes.length=p,this}func(l,p=t.nil,S,T){return this._blockNode(new O(l,p,S)),T&&this.code(T).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,p){const S=this._currNode;if(S instanceof l||p&&S instanceof p)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${p?`${l.kind}/${p.kind}`:l.kind}"`)}_elseNode(l){const p=this._currNode;if(!(p instanceof f))throw new Error('CodeGen: "else" without "if"');return this._currNode=p.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const p=this._nodes;p[p.length-1]=l}}e.CodeGen=W;function X(w,l){for(const p in l)w[p]=(w[p]||0)+(l[p]||0);return w}function ce(w,l){return l instanceof t._CodeOrName?X(w,l.names):w}function ie(w,l,p){if(w instanceof t.Name)return S(w);if(!T(w))return w;return new t._Code(w._items.reduce((M,K)=>(K instanceof t.Name&&(K=S(K)),K instanceof t._Code?M.push(...K._items):M.push(K),M),[]));function S(M){const K=p[M.str];return K===void 0||l[M.str]!==1?M:(delete l[M.str],K)}function T(M){return M instanceof t._Code&&M._items.some(K=>K instanceof t.Name&&l[K.str]===1&&p[K.str]!==void 0)}}function Ie(w,l){for(const p in l)w[p]=(w[p]||0)-(l[p]||0)}function Ae(w){return typeof w=="boolean"||typeof w=="number"||w===null?!w:(0,t._)`!${k(w)}`}e.not=Ae;const Je=_(e.operators.AND);function Ge(...w){return w.reduce(Je)}e.and=Ge;const Ct=_(e.operators.OR);function j(...w){return w.reduce(Ct)}e.or=j;function _(w){return(l,p)=>l===t.nil?p:p===t.nil?l:(0,t._)`${k(l)} ${w} ${k(p)}`}function k(w){return w instanceof t.Name?w:(0,t._)`(${w})`}})(H);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;const U=H,Wo=St;function Qo(e){const t={};for(const r of e)t[r]=!0;return t}I.toHash=Qo;function Yo(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Cs(e,t),!Ds(t,e.self.RULES.all))}I.alwaysValidSchema=Yo;function Cs(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Ls(e,`unknown keyword: "${o}"`)}I.checkUnknownRules=Cs;function Ds(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}I.schemaHasRules=Ds;function Xo(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}I.schemaHasRulesButRef=Xo;function Zo({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,U._)`${r}`}return(0,U._)`${e}${t}${(0,U.getProperty)(n)}`}I.schemaRefOrVal=Zo;function ea(e){return As(decodeURIComponent(e))}I.unescapeFragment=ea;function ta(e){return encodeURIComponent(Wr(e))}I.escapeFragment=ta;function Wr(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=Wr;function As(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=As;function ra(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}I.eachItem=ra;function es({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,i,a)=>{const c=i===void 0?o:i instanceof U.Name?(o instanceof U.Name?e(s,o,i):t(s,o,i),i):o instanceof U.Name?(t(s,i,o),o):r(o,i);return a===U.Name&&!(c instanceof U.Name)?n(s,c):c}}I.mergeEvaluated={props:es({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,U._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,U._)`${r} || {}`).code((0,U._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,U._)`${r} || {}`),Qr(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Vs}),items:es({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,U._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,U._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Vs(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,U._)`{}`);return t!==void 0&&Qr(e,r,t),r}I.evaluatedPropsToName=Vs;function Qr(e,t,r){Object.keys(r).forEach(n=>e.assign((0,U._)`${t}${(0,U.getProperty)(n)}`,!0))}I.setEvaluated=Qr;const ts={};function na(e,t){return e.scopeValue("func",{ref:t,code:ts[t.code]||(ts[t.code]=new Wo._Code(t.code))})}I.useFunc=na;var Vr;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Vr||(I.Type=Vr={}));function sa(e,t,r){if(e instanceof U.Name){const n=t===Vr.Num;return r?n?(0,U._)`"[" + ${e} + "]"`:(0,U._)`"['" + ${e} + "']"`:n?(0,U._)`"/" + ${e}`:(0,U._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,U.getProperty)(e).toString():"/"+Wr(e)}I.getErrorPath=sa;function Ls(e,t,r=e.opts.strictSchema){if(!!r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}I.checkStrictMode=Ls;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});const ne=H,oa={data:new ne.Name("data"),valCxt:new ne.Name("valCxt"),instancePath:new ne.Name("instancePath"),parentData:new ne.Name("parentData"),parentDataProperty:new ne.Name("parentDataProperty"),rootData:new ne.Name("rootData"),dynamicAnchors:new ne.Name("dynamicAnchors"),vErrors:new ne.Name("vErrors"),errors:new ne.Name("errors"),this:new ne.Name("this"),self:new ne.Name("self"),scope:new ne.Name("scope"),json:new ne.Name("json"),jsonPos:new ne.Name("jsonPos"),jsonLen:new ne.Name("jsonLen"),jsonPart:new ne.Name("jsonPart")};Pe.default=oa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=H,r=I,n=Pe;e.keywordError={message:({keyword:m})=>(0,t.str)`must pass "${m}" keyword validation`},e.keyword$DataError={message:({keyword:m,schemaType:f})=>f?(0,t.str)`"${m}" keyword must be ${f} ($data)`:(0,t.str)`"${m}" keyword is invalid ($data)`};function s(m,f=e.keywordError,g,P){const{it:E}=m,{gen:N,compositeRule:O,allErrors:C}=E,J=h(m,f,g);P??(O||C)?c(N,J):u(E,(0,t._)`[${J}]`)}e.reportError=s;function o(m,f=e.keywordError,g){const{it:P}=m,{gen:E,compositeRule:N,allErrors:O}=P,C=h(m,f,g);c(E,C),N||O||u(P,n.default.vErrors)}e.reportExtraError=o;function i(m,f){m.assign(n.default.errors,f),m.if((0,t._)`${n.default.vErrors} !== null`,()=>m.if(f,()=>m.assign((0,t._)`${n.default.vErrors}.length`,f),()=>m.assign(n.default.vErrors,null)))}e.resetErrorsCount=i;function a({gen:m,keyword:f,schemaValue:g,data:P,errsCount:E,it:N}){if(E===void 0)throw new Error("ajv implementation error");const O=m.name("err");m.forRange("i",E,n.default.errors,C=>{m.const(O,(0,t._)`${n.default.vErrors}[${C}]`),m.if((0,t._)`${O}.instancePath === undefined`,()=>m.assign((0,t._)`${O}.instancePath`,(0,t.strConcat)(n.default.instancePath,N.errorPath))),m.assign((0,t._)`${O}.schemaPath`,(0,t.str)`${N.errSchemaPath}/${f}`),N.opts.verbose&&(m.assign((0,t._)`${O}.schema`,g),m.assign((0,t._)`${O}.data`,P))})}e.extendErrors=a;function c(m,f){const g=m.const("err",f);m.if((0,t._)`${n.default.vErrors} === null`,()=>m.assign(n.default.vErrors,(0,t._)`[${g}]`),(0,t._)`${n.default.vErrors}.push(${g})`),m.code((0,t._)`${n.default.errors}++`)}function u(m,f){const{gen:g,validateName:P,schemaEnv:E}=m;E.$async?g.throw((0,t._)`new ${m.ValidationError}(${f})`):(g.assign((0,t._)`${P}.errors`,f),g.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function h(m,f,g){const{createErrors:P}=m.it;return P===!1?(0,t._)`{}`:v(m,f,g)}function v(m,f,g={}){const{gen:P,it:E}=m,N=[b(E,g),y(m,g)];return $(m,f,N),P.object(...N)}function b({errorPath:m},{instancePath:f}){const g=f?(0,t.str)`${m}${(0,r.getErrorPath)(f,r.Type.Str)}`:m;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,g)]}function y({keyword:m,it:{errSchemaPath:f}},{schemaPath:g,parentSchema:P}){let E=P?f:(0,t.str)`${f}/${m}`;return g&&(E=(0,t.str)`${E}${(0,r.getErrorPath)(g,r.Type.Str)}`),[d.schemaPath,E]}function $(m,{params:f,message:g},P){const{keyword:E,data:N,schemaValue:O,it:C}=m,{opts:J,propertyName:F,topSchemaRef:G,schemaPath:W}=C;P.push([d.keyword,E],[d.params,typeof f=="function"?f(m):f||(0,t._)`{}`]),J.messages&&P.push([d.message,typeof g=="function"?g(m):g]),J.verbose&&P.push([d.schema,O],[d.parentSchema,(0,t._)`${G}${W}`],[n.default.data,N]),F&&P.push([d.propertyName,F])}})(kt);Object.defineProperty(rt,"__esModule",{value:!0});rt.boolOrEmptySchema=rt.topBoolOrEmptySchema=void 0;const aa=kt,ia=H,ca=Pe,la={message:"boolean schema is false"};function ua(e){const{gen:t,schema:r,validateName:n}=e;r===!1?qs(e,!1):typeof r=="object"&&r.$async===!0?t.return(ca.default.data):(t.assign((0,ia._)`${n}.errors`,null),t.return(!0))}rt.topBoolOrEmptySchema=ua;function da(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),qs(e)):r.var(t,!0)}rt.boolOrEmptySchema=da;function qs(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,aa.reportError)(s,la,void 0,t)}var Y={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.getRules=Ke.isJSONType=void 0;const fa=["string","number","integer","boolean","null","object","array"],ha=new Set(fa);function pa(e){return typeof e=="string"&&ha.has(e)}Ke.isJSONType=pa;function ma(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ke.getRules=ma;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.shouldUseRule=Ne.shouldUseGroup=Ne.schemaHasRulesForType=void 0;function ya({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Hs(e,n)}Ne.schemaHasRulesForType=ya;function Hs(e,t){return t.rules.some(r=>zs(e,r))}Ne.shouldUseGroup=Hs;function zs(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ne.shouldUseRule=zs;Object.defineProperty(Y,"__esModule",{value:!0});Y.reportTypeError=Y.checkDataTypes=Y.checkDataType=Y.coerceAndCheckDataType=Y.getJSONTypes=Y.getSchemaTypes=Y.DataType=void 0;const ga=Ke,$a=Ne,_a=kt,V=H,Fs=I;var Ze;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ze||(Y.DataType=Ze={}));function va(e){const t=Ks(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Y.getSchemaTypes=va;function Ks(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ga.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Y.getJSONTypes=Ks;function wa(e,t){const{gen:r,data:n,opts:s}=e,o=ba(t,s.coerceTypes),i=t.length>0&&!(o.length===0&&t.length===1&&(0,$a.schemaHasRulesForType)(e,t[0]));if(i){const a=Yr(t,n,s.strictNumbers,Ze.Wrong);r.if(a,()=>{o.length?Sa(e,t,o):Xr(e)})}return i}Y.coerceAndCheckDataType=wa;const Us=new Set(["string","number","integer","boolean","null"]);function ba(e,t){return t?e.filter(r=>Us.has(r)||t==="array"&&r==="array"):[]}function Sa(e,t,r){const{gen:n,data:s,opts:o}=e,i=n.let("dataType",(0,V._)`typeof ${s}`),a=n.let("coerced",(0,V._)`undefined`);o.coerceTypes==="array"&&n.if((0,V._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,V._)`${s}[0]`).assign(i,(0,V._)`typeof ${s}`).if(Yr(t,s,o.strictNumbers),()=>n.assign(a,s))),n.if((0,V._)`${a} !== undefined`);for(const u of r)(Us.has(u)||u==="array"&&o.coerceTypes==="array")&&c(u);n.else(),Xr(e),n.endIf(),n.if((0,V._)`${a} !== undefined`,()=>{n.assign(s,a),Ea(e,a)});function c(u){switch(u){case"string":n.elseIf((0,V._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,V._)`"" + ${s}`).elseIf((0,V._)`${s} === null`).assign(a,(0,V._)`""`);return;case"number":n.elseIf((0,V._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,V._)`+${s}`);return;case"integer":n.elseIf((0,V._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,V._)`+${s}`);return;case"boolean":n.elseIf((0,V._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,V._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,V._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,V._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(a,(0,V._)`[${s}]`)}}}function Ea({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,V._)`${t} !== undefined`,()=>e.assign((0,V._)`${t}[${r}]`,n))}function Lr(e,t,r,n=Ze.Correct){const s=n===Ze.Correct?V.operators.EQ:V.operators.NEQ;let o;switch(e){case"null":return(0,V._)`${t} ${s} null`;case"array":o=(0,V._)`Array.isArray(${t})`;break;case"object":o=(0,V._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=i((0,V._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=i();break;default:return(0,V._)`typeof ${t} ${s} ${e}`}return n===Ze.Correct?o:(0,V.not)(o);function i(a=V.nil){return(0,V.and)((0,V._)`typeof ${t} == "number"`,a,r?(0,V._)`isFinite(${t})`:V.nil)}}Y.checkDataType=Lr;function Yr(e,t,r,n){if(e.length===1)return Lr(e[0],t,r,n);let s;const o=(0,Fs.toHash)(e);if(o.array&&o.object){const i=(0,V._)`typeof ${t} != "object"`;s=o.null?i:(0,V._)`!${t} || ${i}`,delete o.null,delete o.array,delete o.object}else s=V.nil;o.number&&delete o.integer;for(const i in o)s=(0,V.and)(s,Lr(i,t,r,n));return s}Y.checkDataTypes=Yr;const Pa={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,V._)`{type: ${e}}`:(0,V._)`{type: ${t}}`};function Xr(e){const t=Na(e);(0,_a.reportError)(t,Pa)}Y.reportTypeError=Xr;function Na(e){const{gen:t,data:r,schema:n}=e,s=(0,Fs.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.assignDefaults=void 0;const We=H,ka=I;function Oa(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)rs(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>rs(e,o,s.default))}nr.assignDefaults=Oa;function rs(e,t,r){const{gen:n,compositeRule:s,data:o,opts:i}=e;if(r===void 0)return;const a=(0,We._)`${o}${(0,We.getProperty)(t)}`;if(s){(0,ka.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,We._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,We._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,We._)`${a} = ${(0,We.stringify)(r)}`)}var be={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.validateUnion=q.validateArray=q.usePattern=q.callValidateCode=q.schemaProperties=q.allSchemaProperties=q.noPropertyInData=q.propertyInData=q.isOwnProperty=q.hasPropFunc=q.reportMissingProp=q.checkMissingProp=q.checkReportMissingProp=void 0;const x=H,Zr=I,Re=Pe,ja=I;function Ia(e,t){const{gen:r,data:n,it:s}=e;r.if(tn(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,x._)`${t}`},!0),e.error()})}q.checkReportMissingProp=Ia;function Ra({gen:e,data:t,it:{opts:r}},n,s){return(0,x.or)(...n.map(o=>(0,x.and)(tn(e,t,o,r.ownProperties),(0,x._)`${s} = ${o}`)))}q.checkMissingProp=Ra;function Ta(e,t){e.setParams({missingProperty:t},!0),e.error()}q.reportMissingProp=Ta;function xs(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,x._)`Object.prototype.hasOwnProperty`})}q.hasPropFunc=xs;function en(e,t,r){return(0,x._)`${xs(e)}.call(${t}, ${r})`}q.isOwnProperty=en;function Ma(e,t,r,n){const s=(0,x._)`${t}${(0,x.getProperty)(r)} !== undefined`;return n?(0,x._)`${s} && ${en(e,t,r)}`:s}q.propertyInData=Ma;function tn(e,t,r,n){const s=(0,x._)`${t}${(0,x.getProperty)(r)} === undefined`;return n?(0,x.or)(s,(0,x.not)(en(e,t,r))):s}q.noPropertyInData=tn;function Js(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}q.allSchemaProperties=Js;function Ca(e,t){return Js(t).filter(r=>!(0,Zr.alwaysValidSchema)(e,t[r]))}q.schemaProperties=Ca;function Da({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:i},a,c,u){const d=u?(0,x._)`${e}, ${t}, ${n}${s}`:t,h=[[Re.default.instancePath,(0,x.strConcat)(Re.default.instancePath,o)],[Re.default.parentData,i.parentData],[Re.default.parentDataProperty,i.parentDataProperty],[Re.default.rootData,Re.default.rootData]];i.opts.dynamicRef&&h.push([Re.default.dynamicAnchors,Re.default.dynamicAnchors]);const v=(0,x._)`${d}, ${r.object(...h)}`;return c!==x.nil?(0,x._)`${a}.call(${c}, ${v})`:(0,x._)`${a}(${v})`}q.callValidateCode=Da;const Aa=(0,x._)`new RegExp`;function Va({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,x._)`${s.code==="new RegExp"?Aa:(0,ja.useFunc)(e,s)}(${r}, ${n})`})}q.usePattern=Va;function La(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return i(()=>t.assign(a,!1)),a}return t.var(o,!0),i(()=>t.break()),o;function i(a){const c=t.const("len",(0,x._)`${r}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:n,dataProp:u,dataPropType:Zr.Type.Num},o),t.if((0,x.not)(o),a)})}}q.validateArray=La;function qa(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Zr.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const i=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,u)=>{const d=e.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);t.assign(i,(0,x._)`${i} || ${a}`),e.mergeValidEvaluated(d,a)||t.if((0,x.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}q.validateUnion=qa;Object.defineProperty(be,"__esModule",{value:!0});be.validateKeywordUsage=be.validSchemaType=be.funcKeywordCode=be.macroKeywordCode=void 0;const se=H,Le=Pe,Ha=q,za=kt;function Fa(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:i}=e,a=t.macro.call(i.self,s,o,i),c=Gs(r,n,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);const u=r.name("valid");e.subschema({schema:a,schemaPath:se.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}be.macroKeywordCode=Fa;function Ka(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:i,$data:a,it:c}=e;xa(c,t);const u=!a&&t.compile?t.compile.call(c.self,o,i,c):t.validate,d=Gs(n,s,u),h=n.let("valid");e.block$data(h,v),e.ok((r=t.valid)!==null&&r!==void 0?r:h);function v(){if(t.errors===!1)$(),t.modifying&&ns(e),m(()=>e.error());else{const f=t.async?b():y();t.modifying&&ns(e),m(()=>Ua(e,f))}}function b(){const f=n.let("ruleErrs",null);return n.try(()=>$((0,se._)`await `),g=>n.assign(h,!1).if((0,se._)`${g} instanceof ${c.ValidationError}`,()=>n.assign(f,(0,se._)`${g}.errors`),()=>n.throw(g))),f}function y(){const f=(0,se._)`${d}.errors`;return n.assign(f,null),$(se.nil),f}function $(f=t.async?(0,se._)`await `:se.nil){const g=c.opts.passContext?Le.default.this:Le.default.self,P=!("compile"in t&&!a||t.schema===!1);n.assign(h,(0,se._)`${f}${(0,Ha.callValidateCode)(e,d,g,P)}`,t.modifying)}function m(f){var g;n.if((0,se.not)((g=t.valid)!==null&&g!==void 0?g:h),f)}}be.funcKeywordCode=Ka;function ns(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,se._)`${n.parentData}[${n.parentDataProperty}]`))}function Ua(e,t){const{gen:r}=e;r.if((0,se._)`Array.isArray(${t})`,()=>{r.assign(Le.default.vErrors,(0,se._)`${Le.default.vErrors} === null ? ${t} : ${Le.default.vErrors}.concat(${t})`).assign(Le.default.errors,(0,se._)`${Le.default.vErrors}.length`),(0,za.extendErrors)(e)},()=>e.error())}function xa({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Gs(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,se.stringify)(r)})}function Ja(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}be.validSchemaType=Ja;function Ga({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const i=s.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}be.validateKeywordUsage=Ga;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.extendSubschemaMode=Ce.extendSubschemaData=Ce.getSubschema=void 0;const we=H,Bs=I;function Ba(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:i}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,we._)`${e.schemaPath}${(0,we.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,we._)`${e.schemaPath}${(0,we.getProperty)(t)}${(0,we.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Bs.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Ce.getSubschema=Ba;function Wa(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(r!==void 0){const{errorPath:u,dataPathArr:d,opts:h}=t,v=a.let("data",(0,we._)`${t.data}${(0,we.getProperty)(r)}`,!0);c(v),e.errorPath=(0,we.str)`${u}${(0,Bs.getErrorPath)(r,n,h.jsPropertySyntax)}`,e.parentDataProperty=(0,we._)`${r}`,e.dataPathArr=[...d,e.parentDataProperty]}if(s!==void 0){const u=s instanceof we.Name?s:a.let("data",s,!0);c(u),i!==void 0&&(e.propertyName=i)}o&&(e.dataTypes=o);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}Ce.extendSubschemaData=Wa;function Qa(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Ce.extendSubschemaMode=Qa;var re={},Ws=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var i=o[s];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r},Qs={exports:{}},Me=Qs.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Ft(t,n,s,e,"",e)};Me.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Me.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Me.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Me.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ft(e,t,r,n,s,o,i,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,i,a,c,u);for(var d in n){var h=n[d];if(Array.isArray(h)){if(d in Me.arrayKeywords)for(var v=0;v<h.length;v++)Ft(e,t,r,h[v],s+"/"+d+"/"+v,o,s,d,n,v)}else if(d in Me.propsKeywords){if(h&&typeof h=="object")for(var b in h)Ft(e,t,r,h[b],s+"/"+d+"/"+Ya(b),o,s,d,n,b)}else(d in Me.keywords||e.allKeys&&!(d in Me.skipKeywords))&&Ft(e,t,r,h,s+"/"+d,o,s,d,n)}r(n,s,o,i,a,c,u)}}function Ya(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(re,"__esModule",{value:!0});re.getSchemaRefs=re.resolveUrl=re.normalizeId=re._getFullPath=re.getFullPath=re.inlineRef=void 0;const Xa=I,Za=Ws,ei=Qs.exports,ti=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ri(e,t=!0){return typeof e=="boolean"?!0:t===!0?!qr(e):t?Ys(e)<=t:!1}re.inlineRef=ri;const ni=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function qr(e){for(const t in e){if(ni.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(qr)||typeof r=="object"&&qr(r))return!0}return!1}function Ys(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!ti.has(r)&&(typeof e[r]=="object"&&(0,Xa.eachItem)(e[r],n=>t+=Ys(n)),t===1/0))return 1/0}return t}function Xs(e,t="",r){r!==!1&&(t=et(t));const n=e.parse(t);return Zs(e,n)}re.getFullPath=Xs;function Zs(e,t){return e.serialize(t).split("#")[0]+"#"}re._getFullPath=Zs;const si=/#\/?$/;function et(e){return e?e.replace(si,""):""}re.normalizeId=et;function oi(e,t,r){return r=et(r),e.resolve(t,r)}re.resolveUrl=oi;const ai=/^[a-z_][-a-z0-9._]*$/i;function ii(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=et(e[r]||t),o={"":s},i=Xs(n,s,!1),a={},c=new Set;return ei(e,{allKeys:!0},(h,v,b,y)=>{if(y===void 0)return;const $=i+v;let m=o[y];typeof h[r]=="string"&&(m=f.call(this,h[r])),g.call(this,h.$anchor),g.call(this,h.$dynamicAnchor),o[v]=m;function f(P){const E=this.opts.uriResolver.resolve;if(P=et(m?E(m,P):P),c.has(P))throw d(P);c.add(P);let N=this.refs[P];return typeof N=="string"&&(N=this.refs[N]),typeof N=="object"?u(h,N.schema,P):P!==et($)&&(P[0]==="#"?(u(h,a[P],P),a[P]=h):this.refs[P]=$),P}function g(P){if(typeof P=="string"){if(!ai.test(P))throw new Error(`invalid anchor "${P}"`);f.call(this,`#${P}`)}}}),a;function u(h,v,b){if(v!==void 0&&!Za(h,v))throw d(b)}function d(h){return new Error(`reference "${h}" resolves to more than one schema`)}}re.getSchemaRefs=ii;Object.defineProperty(_e,"__esModule",{value:!0});_e.getData=_e.KeywordCxt=_e.validateFunctionCode=void 0;const eo=rt,ss=Y,rn=Ne,Wt=Y,ci=nr,mt=be,jr=Ce,R=H,D=Pe,li=re,ke=I,lt=kt;function ui(e){if(no(e)&&(so(e),ro(e))){hi(e);return}to(e,()=>(0,eo.topBoolOrEmptySchema)(e))}_e.validateFunctionCode=ui;function to({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,R._)`${D.default.data}, ${D.default.valCxt}`,n.$async,()=>{e.code((0,R._)`"use strict"; ${os(r,s)}`),fi(e,s),e.code(o)}):e.func(t,(0,R._)`${D.default.data}, ${di(s)}`,n.$async,()=>e.code(os(r,s)).code(o))}function di(e){return(0,R._)`{${D.default.instancePath}="", ${D.default.parentData}, ${D.default.parentDataProperty}, ${D.default.rootData}=${D.default.data}${e.dynamicRef?(0,R._)`, ${D.default.dynamicAnchors}={}`:R.nil}}={}`}function fi(e,t){e.if(D.default.valCxt,()=>{e.var(D.default.instancePath,(0,R._)`${D.default.valCxt}.${D.default.instancePath}`),e.var(D.default.parentData,(0,R._)`${D.default.valCxt}.${D.default.parentData}`),e.var(D.default.parentDataProperty,(0,R._)`${D.default.valCxt}.${D.default.parentDataProperty}`),e.var(D.default.rootData,(0,R._)`${D.default.valCxt}.${D.default.rootData}`),t.dynamicRef&&e.var(D.default.dynamicAnchors,(0,R._)`${D.default.valCxt}.${D.default.dynamicAnchors}`)},()=>{e.var(D.default.instancePath,(0,R._)`""`),e.var(D.default.parentData,(0,R._)`undefined`),e.var(D.default.parentDataProperty,(0,R._)`undefined`),e.var(D.default.rootData,D.default.data),t.dynamicRef&&e.var(D.default.dynamicAnchors,(0,R._)`{}`)})}function hi(e){const{schema:t,opts:r,gen:n}=e;to(e,()=>{r.$comment&&t.$comment&&ao(e),$i(e),n.let(D.default.vErrors,null),n.let(D.default.errors,0),r.unevaluated&&pi(e),oo(e),wi(e)})}function pi(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,R._)`${r}.evaluated`),t.if((0,R._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,R._)`${e.evaluated}.props`,(0,R._)`undefined`)),t.if((0,R._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,R._)`${e.evaluated}.items`,(0,R._)`undefined`))}function os(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,R._)`/*# sourceURL=${r} */`:R.nil}function mi(e,t){if(no(e)&&(so(e),ro(e))){yi(e,t);return}(0,eo.boolOrEmptySchema)(e,t)}function ro({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function no(e){return typeof e.schema!="boolean"}function yi(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&ao(e),_i(e),vi(e);const o=n.const("_errs",D.default.errors);oo(e,o),n.var(t,(0,R._)`${o} === ${D.default.errors}`)}function so(e){(0,ke.checkUnknownRules)(e),gi(e)}function oo(e,t){if(e.opts.jtd)return as(e,[],!1,t);const r=(0,ss.getSchemaTypes)(e.schema),n=(0,ss.coerceAndCheckDataType)(e,r);as(e,r,!n,t)}function gi(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,ke.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function $i(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ke.checkStrictMode)(e,"default is ignored in the schema root")}function _i(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,li.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function vi(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ao({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,R._)`${D.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const i=(0,R.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,R._)`${D.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function wi(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,R._)`${D.default.errors} === 0`,()=>t.return(D.default.data),()=>t.throw((0,R._)`new ${s}(${D.default.vErrors})`)):(t.assign((0,R._)`${n}.errors`,D.default.vErrors),o.unevaluated&&bi(e),t.return((0,R._)`${D.default.errors} === 0`))}function bi({gen:e,evaluated:t,props:r,items:n}){r instanceof R.Name&&e.assign((0,R._)`${t}.props`,r),n instanceof R.Name&&e.assign((0,R._)`${t}.items`,n)}function as(e,t,r,n){const{gen:s,schema:o,data:i,allErrors:a,opts:c,self:u}=e,{RULES:d}=u;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,ke.schemaHasRulesButRef)(o,d))){s.block(()=>lo(e,"$ref",d.all.$ref.definition));return}c.jtd||Si(e,t),s.block(()=>{for(const v of d.rules)h(v);h(d.post)});function h(v){!(0,rn.shouldUseGroup)(o,v)||(v.type?(s.if((0,Wt.checkDataType)(v.type,i,c.strictNumbers)),is(e,v),t.length===1&&t[0]===v.type&&r&&(s.else(),(0,Wt.reportTypeError)(e)),s.endIf()):is(e,v),a||s.if((0,R._)`${D.default.errors} === ${n||0}`))}}function is(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,ci.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,rn.shouldUseRule)(n,o)&&lo(e,o.keyword,o.definition,t.type)})}function Si(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Ei(e,t),e.opts.allowUnionTypes||Pi(e,t),Ni(e,e.dataTypes))}function Ei(e,t){if(!!t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{io(e.dataTypes,r)||nn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Oi(e,t)}}function Pi(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&nn(e,"use allowUnionTypes to allow union type keyword")}function Ni(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,rn.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(i=>ki(t,i))&&nn(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function ki(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function io(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Oi(e,t){const r=[];for(const n of e.dataTypes)io(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function nn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,ke.checkStrictMode)(e,t,e.opts.strictTypes)}class co{constructor(t,r,n){if((0,mt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ke.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",uo(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",D.default.errors))}result(t,r,n){this.failResult((0,R.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,R.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,R._)`${r} !== undefined && (${(0,R.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?lt.reportExtraError:lt.reportError)(this,this.def.error,r)}$dataError(){(0,lt.reportError)(this,this.def.$dataError||lt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,lt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=R.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=R.nil,r=R.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:i}=this;n.if((0,R.or)((0,R._)`${s} === undefined`,r)),t!==R.nil&&n.assign(t,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==R.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,R.or)(i(),a());function i(){if(n.length){if(!(r instanceof R.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,R._)`${(0,Wt.checkDataTypes)(c,r,o.opts.strictNumbers,Wt.DataType.Wrong)}`}return R.nil}function a(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,R._)`!${c}(${r})`}return R.nil}}subschema(t,r){const n=(0,jr.getSubschema)(this.it,t);(0,jr.extendSubschemaData)(n,this.it,t),(0,jr.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return mi(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;!n.opts.unevaluated||(n.props!==!0&&t.props!==void 0&&(n.props=ke.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=ke.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,R.Name)),!0}}_e.KeywordCxt=co;function lo(e,t,r,n){const s=new co(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,mt.funcKeywordCode)(s,r):"macro"in r?(0,mt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,mt.funcKeywordCode)(s,r)}const ji=/^\/(?:[^~]|~0|~1)*$/,Ii=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function uo(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return D.default.rootData;if(e[0]==="/"){if(!ji.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=D.default.rootData}else{const u=Ii.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const d=+u[1];if(s=u[2],s==="#"){if(d>=t)throw new Error(c("property/index",d));return n[t-d]}if(d>t)throw new Error(c("data",d));if(o=r[t-d],!s)return o}let i=o;const a=s.split("/");for(const u of a)u&&(o=(0,R._)`${o}${(0,R.getProperty)((0,ke.unescapeJsonPointer)(u))}`,i=(0,R._)`${i} && ${o}`);return i;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${t}`}}_e.getData=uo;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});class Ri extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ot.default=Ri;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});const Ir=re;class Ti extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ir.resolveUrl)(t,r,n),this.missingSchema=(0,Ir.normalizeId)((0,Ir.getFullPath)(t,this.missingRef))}}ot.default=Ti;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.resolveSchema=ae.getCompilingSchema=ae.resolveRef=ae.compileSchema=ae.SchemaEnv=void 0;const ye=H,Mi=Ot,Ve=Pe,$e=re,cs=I,Ci=_e;class sr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,$e.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}}ae.SchemaEnv=sr;function sn(e){const t=fo.call(this,e);if(t)return t;const r=(0,$e.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,i=new ye.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let a;e.$async&&(a=i.scopeValue("Error",{ref:Mi.default,code:(0,ye._)`require("ajv/dist/runtime/validation_error").default`}));const c=i.scopeName("validate");e.validateName=c;const u={gen:i,allErrors:this.opts.allErrors,data:Ve.default.data,parentData:Ve.default.parentData,parentDataProperty:Ve.default.parentDataProperty,dataNames:[Ve.default.data],dataPathArr:[ye.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ye.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:ye.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ye._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,Ci.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);const h=i.toString();d=`${i.scopeRefs(Ve.default.scope)}return ${h}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const b=new Function(`${Ve.default.self}`,`${Ve.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:c,validateCode:h,scopeValues:i._values}),this.opts.unevaluated){const{props:y,items:$}=u;b.evaluated={props:y instanceof ye.Name?void 0:y,items:$ instanceof ye.Name?void 0:$,dynamicProps:y instanceof ye.Name,dynamicItems:$ instanceof ye.Name},b.source&&(b.source.evaluated=(0,ye.stringify)(b.evaluated))}return e.validate=b,e}catch(h){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),h}finally{this._compilations.delete(e)}}ae.compileSchema=sn;function Di(e,t,r){var n;r=(0,$e.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=Li.call(this,e,r);if(o===void 0){const i=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;i&&(o=new sr({schema:i,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ai.call(this,o)}ae.resolveRef=Di;function Ai(e){return(0,$e.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:sn.call(this,e)}function fo(e){for(const t of this._compilations)if(Vi(t,e))return t}ae.getCompilingSchema=fo;function Vi(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Li(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||or.call(this,e,t)}function or(e,t){const r=this.opts.uriResolver.parse(t),n=(0,$e._getFullPath)(this.opts.uriResolver,r);let s=(0,$e.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return Rr.call(this,r,e);const o=(0,$e.normalizeId)(n),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){const a=or.call(this,e,i);return typeof a?.schema!="object"?void 0:Rr.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||sn.call(this,i),o===(0,$e.normalizeId)(t)){const{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,$e.resolveUrl)(this.opts.uriResolver,s,u)),new sr({schema:a,schemaId:c,root:e,baseId:s})}return Rr.call(this,r,i)}}ae.resolveSchema=or;const qi=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Rr(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,cs.unescapeFragment)(a)];if(c===void 0)return;r=c;const u=typeof r=="object"&&r[this.opts.schemaId];!qi.has(a)&&u&&(t=(0,$e.resolveUrl)(this.opts.uriResolver,t,u))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,cs.schemaHasRulesButRef)(r,this.RULES)){const a=(0,$e.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=or.call(this,n,a)}const{schemaId:i}=this.opts;if(o=o||new sr({schema:r,schemaId:i,root:n,baseId:t}),o.schema!==o.root.schema)return o}const Hi="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",zi="Meta-schema for $data reference (JSON AnySchema extension proposal)",Fi="object",Ki=["$data"],Ui={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xi=!1,Ji={$id:Hi,description:zi,type:Fi,required:Ki,properties:Ui,additionalProperties:xi};var on={},ar={exports:{}};const Gi=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),ho=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function an(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const Bi=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function ls(e){return e.length=0,!0}function Wi(e,t,r){if(e.length){const n=an(e);if(n!=="")t.push(n);else return r.error=!0,!1;e.length=0}return!0}function Qi(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let o=!1,i=!1,a=Wi;for(let c=0;c<e.length;c++){const u=e[c];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(i=!0),!a(s,n,r))break;if(++t>7){r.error=!0;break}c>0&&e[c-1]===":"&&(o=!0),n.push(":");continue}else if(u==="%"){if(!a(s,n,r))break;a=ls}else{s.push(u);continue}}return s.length&&(a===ls?r.zone=s.join(""):i?n.push(s.join("")):n.push(an(s))),r.address=n.join(""),r}function po(e){if(Yi(e,":")<2)return{host:e,isIPV6:!1};const t=Qi(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:n}}}function Yi(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}function Xi(e){let t=e;const r=[];let n=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(s===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((n=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")}function Zi(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function ec(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!ho(r)){const n=po(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var mo={nonSimpleDomain:Bi,recomposeAuthority:ec,normalizeComponentEncoding:Zi,removeDotSegments:Xi,isIPv4:ho,isUUID:Gi,normalizeIPv6:po,stringArrayToHexStripped:an};const{isUUID:tc}=mo,rc=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,nc=["http","https","ws","wss","urn","urn:uuid"];function sc(e){return nc.indexOf(e)!==-1}function cn(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function yo(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function go(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function oc(e){return e.secure=cn(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function ac(e){if((e.port===(cn(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function ic(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(rc);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,o=ln(s);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function cc(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,o=ln(s);o&&(e=o.serialize(e,t));const i=e,a=e.nss;return i.path=`${n||t.nid}:${a}`,t.skipEscape=!0,i}function lc(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!tc(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function uc(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const $o={scheme:"http",domainHost:!0,parse:yo,serialize:go},dc={scheme:"https",domainHost:$o.domainHost,parse:yo,serialize:go},Kt={scheme:"ws",domainHost:!0,parse:oc,serialize:ac},fc={scheme:"wss",domainHost:Kt.domainHost,parse:Kt.parse,serialize:Kt.serialize},hc={scheme:"urn",parse:ic,serialize:cc,skipNormalize:!0},pc={scheme:"urn:uuid",parse:lc,serialize:uc,skipNormalize:!0},Qt={http:$o,https:dc,ws:Kt,wss:fc,urn:hc,"urn:uuid":pc};Object.setPrototypeOf(Qt,null);function ln(e){return e&&(Qt[e]||Qt[e.toLowerCase()])||void 0}var mc={wsIsSecure:cn,SCHEMES:Qt,isValidSchemeName:sc,getSchemeHandler:ln};const{normalizeIPv6:yc,removeDotSegments:dt,recomposeAuthority:gc,normalizeComponentEncoding:Dt,isIPv4:$c,nonSimpleDomain:_c}=mo,{SCHEMES:vc,getSchemeHandler:_o}=mc;function wc(e,t){return typeof e=="string"?e=Se(Oe(e,t),t):typeof e=="object"&&(e=Oe(Se(e,t),t)),e}function bc(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=vo(Oe(e,n),Oe(t,n),n,!0);return n.skipEscape=!0,Se(s,n)}function vo(e,t,r,n){const s={};return n||(e=Oe(Se(e,r),r),t=Oe(Se(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dt(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dt(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=dt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=dt(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Sc(e,t,r){return typeof e=="string"?(e=unescape(e),e=Se(Dt(Oe(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Se(Dt(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Se(Dt(Oe(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Se(Dt(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Se(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=_o(n.scheme||r.scheme);o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const i=gc(r);if(i!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(i),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(a=dt(a)),i===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const Ec=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Oe(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);const o=e.match(Ec);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host)if($c(n.host)===!1){const c=yc(n.host);n.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const i=_o(r.scheme||n.scheme);if(!r.unicodeSupport&&(!i||!i.unicodeSupport)&&n.host&&(r.domainHost||i&&i.domainHost)&&s===!1&&_c(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!i||i&&!i.skipNormalize)&&(e.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),i&&i.parse&&i.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const un={SCHEMES:vc,normalize:wc,resolve:bc,resolveComponent:vo,equal:Sc,serialize:Se,parse:Oe};ar.exports=un;ar.exports.default=un;ar.exports.fastUri=un;Object.defineProperty(on,"__esModule",{value:!0});const wo=ar.exports;wo.code='require("ajv/dist/runtime/uri").default';on.default=wo;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=_e;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=H;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ot,s=ot,o=Ke,i=ae,a=H,c=re,u=Y,d=I,h=Ji,v=on,b=(j,_)=>new RegExp(j,_);b.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],$=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},f={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},g=200;function P(j){var _,k,w,l,p,S,T,M,K,z,Z,Be,pr,mr,yr,gr,$r,_r,vr,wr,br,Sr,Er,Pr,Nr;const ct=j.strict,kr=(_=j.code)===null||_===void 0?void 0:_.optimize,Yn=kr===!0||kr===void 0?1:kr||0,Xn=(w=(k=j.code)===null||k===void 0?void 0:k.regExp)!==null&&w!==void 0?w:b,Uo=(l=j.uriResolver)!==null&&l!==void 0?l:v.default;return{strictSchema:(S=(p=j.strictSchema)!==null&&p!==void 0?p:ct)!==null&&S!==void 0?S:!0,strictNumbers:(M=(T=j.strictNumbers)!==null&&T!==void 0?T:ct)!==null&&M!==void 0?M:!0,strictTypes:(z=(K=j.strictTypes)!==null&&K!==void 0?K:ct)!==null&&z!==void 0?z:"log",strictTuples:(Be=(Z=j.strictTuples)!==null&&Z!==void 0?Z:ct)!==null&&Be!==void 0?Be:"log",strictRequired:(mr=(pr=j.strictRequired)!==null&&pr!==void 0?pr:ct)!==null&&mr!==void 0?mr:!1,code:j.code?{...j.code,optimize:Yn,regExp:Xn}:{optimize:Yn,regExp:Xn},loopRequired:(yr=j.loopRequired)!==null&&yr!==void 0?yr:g,loopEnum:(gr=j.loopEnum)!==null&&gr!==void 0?gr:g,meta:($r=j.meta)!==null&&$r!==void 0?$r:!0,messages:(_r=j.messages)!==null&&_r!==void 0?_r:!0,inlineRefs:(vr=j.inlineRefs)!==null&&vr!==void 0?vr:!0,schemaId:(wr=j.schemaId)!==null&&wr!==void 0?wr:"$id",addUsedSchema:(br=j.addUsedSchema)!==null&&br!==void 0?br:!0,validateSchema:(Sr=j.validateSchema)!==null&&Sr!==void 0?Sr:!0,validateFormats:(Er=j.validateFormats)!==null&&Er!==void 0?Er:!0,unicodeRegExp:(Pr=j.unicodeRegExp)!==null&&Pr!==void 0?Pr:!0,int32range:(Nr=j.int32range)!==null&&Nr!==void 0?Nr:!0,uriResolver:Uo}}class E{constructor(_={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,_=this.opts={..._,...P(_)};const{es5:k,lines:w}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:$,es5:k,lines:w}),this.logger=X(_.logger);const l=_.validateFormats;_.validateFormats=!1,this.RULES=(0,o.getRules)(),N.call(this,m,_,"NOT SUPPORTED"),N.call(this,f,_,"DEPRECATED","warn"),this._metaOpts=G.call(this),_.formats&&J.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),_.keywords&&F.call(this,_.keywords),typeof _.meta=="object"&&this.addMetaSchema(_.meta),C.call(this),_.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:_,meta:k,schemaId:w}=this.opts;let l=h;w==="id"&&(l={...h},l.id=l.$id,delete l.$id),k&&_&&this.addMetaSchema(l,l[w],!1)}defaultMeta(){const{meta:_,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof _=="object"?_[k]||_:void 0}validate(_,k){let w;if(typeof _=="string"){if(w=this.getSchema(_),!w)throw new Error(`no schema with key or ref "${_}"`)}else w=this.compile(_);const l=w(k);return"$async"in w||(this.errors=w.errors),l}compile(_,k){const w=this._addSchema(_,k);return w.validate||this._compileSchemaEnv(w)}compileAsync(_,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:w}=this.opts;return l.call(this,_,k);async function l(z,Z){await p.call(this,z.$schema);const Be=this._addSchema(z,Z);return Be.validate||S.call(this,Be)}async function p(z){z&&!this.getSchema(z)&&await l.call(this,{$ref:z},!0)}async function S(z){try{return this._compileSchemaEnv(z)}catch(Z){if(!(Z instanceof s.default))throw Z;return T.call(this,Z),await M.call(this,Z.missingSchema),S.call(this,z)}}function T({missingSchema:z,missingRef:Z}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${Z} cannot be resolved`)}async function M(z){const Z=await K.call(this,z);this.refs[z]||await p.call(this,Z.$schema),this.refs[z]||this.addSchema(Z,z,k)}async function K(z){const Z=this._loading[z];if(Z)return Z;try{return await(this._loading[z]=w(z))}finally{delete this._loading[z]}}}addSchema(_,k,w,l=this.opts.validateSchema){if(Array.isArray(_)){for(const S of _)this.addSchema(S,void 0,w,l);return this}let p;if(typeof _=="object"){const{schemaId:S}=this.opts;if(p=_[S],p!==void 0&&typeof p!="string")throw new Error(`schema ${S} must be string`)}return k=(0,c.normalizeId)(k||p),this._checkUnique(k),this.schemas[k]=this._addSchema(_,w,k,l,!0),this}addMetaSchema(_,k,w=this.opts.validateSchema){return this.addSchema(_,k,!0,w),this}validateSchema(_,k){if(typeof _=="boolean")return!0;let w;if(w=_.$schema,w!==void 0&&typeof w!="string")throw new Error("$schema must be a string");if(w=w||this.opts.defaultMeta||this.defaultMeta(),!w)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(w,_);if(!l&&k){const p="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(p);else throw new Error(p)}return l}getSchema(_){let k;for(;typeof(k=O.call(this,_))=="string";)_=k;if(k===void 0){const{schemaId:w}=this.opts,l=new i.SchemaEnv({schema:{},schemaId:w});if(k=i.resolveSchema.call(this,l,_),!k)return;this.refs[_]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(_){if(_ instanceof RegExp)return this._removeAllSchemas(this.schemas,_),this._removeAllSchemas(this.refs,_),this;switch(typeof _){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=O.call(this,_);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[_],delete this.refs[_],this}case"object":{const k=_;this._cache.delete(k);let w=_[this.opts.schemaId];return w&&(w=(0,c.normalizeId)(w),delete this.schemas[w],delete this.refs[w]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(_){for(const k of _)this.addKeyword(k);return this}addKeyword(_,k){let w;if(typeof _=="string")w=_,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=w);else if(typeof _=="object"&&k===void 0){if(k=_,w=k.keyword,Array.isArray(w)&&!w.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ie.call(this,w,k),!k)return(0,d.eachItem)(w,p=>Ie.call(this,p)),this;Je.call(this,k);const l={...k,type:(0,u.getJSONTypes)(k.type),schemaType:(0,u.getJSONTypes)(k.schemaType)};return(0,d.eachItem)(w,l.type.length===0?p=>Ie.call(this,p,l):p=>l.type.forEach(S=>Ie.call(this,p,l,S))),this}getKeyword(_){const k=this.RULES.all[_];return typeof k=="object"?k.definition:!!k}removeKeyword(_){const{RULES:k}=this;delete k.keywords[_],delete k.all[_];for(const w of k.rules){const l=w.rules.findIndex(p=>p.keyword===_);l>=0&&w.rules.splice(l,1)}return this}addFormat(_,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[_]=k,this}errorsText(_=this.errors,{separator:k=", ",dataVar:w="data"}={}){return!_||_.length===0?"No errors":_.map(l=>`${w}${l.instancePath} ${l.message}`).reduce((l,p)=>l+k+p)}$dataMetaSchema(_,k){const w=this.RULES.all;_=JSON.parse(JSON.stringify(_));for(const l of k){const p=l.split("/").slice(1);let S=_;for(const T of p)S=S[T];for(const T in w){const M=w[T];if(typeof M!="object")continue;const{$data:K}=M.definition,z=S[T];K&&z&&(S[T]=Ct(z))}}return _}_removeAllSchemas(_,k){for(const w in _){const l=_[w];(!k||k.test(w))&&(typeof l=="string"?delete _[w]:l&&!l.meta&&(this._cache.delete(l.schema),delete _[w]))}}_addSchema(_,k,w,l=this.opts.validateSchema,p=this.opts.addUsedSchema){let S;const{schemaId:T}=this.opts;if(typeof _=="object")S=_[T];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof _!="boolean")throw new Error("schema must be object or boolean")}let M=this._cache.get(_);if(M!==void 0)return M;w=(0,c.normalizeId)(S||w);const K=c.getSchemaRefs.call(this,_,w);return M=new i.SchemaEnv({schema:_,schemaId:T,meta:k,baseId:w,localRefs:K}),this._cache.set(M.schema,M),p&&!w.startsWith("#")&&(w&&this._checkUnique(w),this.refs[w]=M),l&&this.validateSchema(_,!0),M}_checkUnique(_){if(this.schemas[_]||this.refs[_])throw new Error(`schema with key or id "${_}" already exists`)}_compileSchemaEnv(_){if(_.meta?this._compileMetaSchema(_):i.compileSchema.call(this,_),!_.validate)throw new Error("ajv implementation error");return _.validate}_compileMetaSchema(_){const k=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,_)}finally{this.opts=k}}}E.ValidationError=n.default,E.MissingRefError=s.default,e.default=E;function N(j,_,k,w="error"){for(const l in j){const p=l;p in _&&this.logger[w](`${k}: option ${l}. ${j[p]}`)}}function O(j){return j=(0,c.normalizeId)(j),this.schemas[j]||this.refs[j]}function C(){const j=this.opts.schemas;if(!!j)if(Array.isArray(j))this.addSchema(j);else for(const _ in j)this.addSchema(j[_],_)}function J(){for(const j in this.opts.formats){const _=this.opts.formats[j];_&&this.addFormat(j,_)}}function F(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const _ in j){const k=j[_];k.keyword||(k.keyword=_),this.addKeyword(k)}}function G(){const j={...this.opts};for(const _ of y)delete j[_];return j}const W={log(){},warn(){},error(){}};function X(j){if(j===!1)return W;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const ce=/^[a-z_$][a-z0-9_$:-]*$/i;function ie(j,_){const{RULES:k}=this;if((0,d.eachItem)(j,w=>{if(k.keywords[w])throw new Error(`Keyword ${w} is already defined`);if(!ce.test(w))throw new Error(`Keyword ${w} has invalid name`)}),!!_&&_.$data&&!("code"in _||"validate"in _))throw new Error('$data keyword must have "code" or "validate" function')}function Ie(j,_,k){var w;const l=_?.post;if(k&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:p}=this;let S=l?p.post:p.rules.find(({type:M})=>M===k);if(S||(S={type:k,rules:[]},p.rules.push(S)),p.keywords[j]=!0,!_)return;const T={keyword:j,definition:{..._,type:(0,u.getJSONTypes)(_.type),schemaType:(0,u.getJSONTypes)(_.schemaType)}};_.before?Ae.call(this,S,T,_.before):S.rules.push(T),p.all[j]=T,(w=_.implements)===null||w===void 0||w.forEach(M=>this.addKeyword(M))}function Ae(j,_,k){const w=j.rules.findIndex(l=>l.keyword===k);w>=0?j.rules.splice(w,0,_):(j.rules.push(_),this.logger.warn(`rule ${k} is not defined`))}function Je(j){let{metaSchema:_}=j;_!==void 0&&(j.$data&&this.opts.$data&&(_=Ct(_)),j.validateSchema=this.compile(_,!0))}const Ge={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ct(j){return{anyOf:[j,Ge]}}})(Ms);var dn={},fn={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});const Pc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hn.default=Pc;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.callRef=Ue.getValidate=void 0;const Nc=ot,us=q,oe=H,Qe=Pe,ds=ae,At=I,kc={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:i,opts:a,self:c}=n,{root:u}=o;if((r==="#"||r==="#/")&&s===u.baseId)return h();const d=ds.resolveRef.call(c,u,s,r);if(d===void 0)throw new Nc.default(n.opts.uriResolver,s,r);if(d instanceof ds.SchemaEnv)return v(d);return b(d);function h(){if(o===u)return Ut(e,i,o,o.$async);const y=t.scopeValue("root",{ref:u});return Ut(e,(0,oe._)`${y}.validate`,u,u.$async)}function v(y){const $=bo(e,y);Ut(e,$,y,y.$async)}function b(y){const $=t.scopeValue("schema",a.code.source===!0?{ref:y,code:(0,oe.stringify)(y)}:{ref:y}),m=t.name("valid"),f=e.subschema({schema:y,dataTypes:[],schemaPath:oe.nil,topSchemaRef:$,errSchemaPath:r},m);e.mergeEvaluated(f),e.ok(m)}}};function bo(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,oe._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Ue.getValidate=bo;function Ut(e,t,r,n){const{gen:s,it:o}=e,{allErrors:i,schemaEnv:a,opts:c}=o,u=c.passContext?Qe.default.this:oe.nil;n?d():h();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");const y=s.let("valid");s.try(()=>{s.code((0,oe._)`await ${(0,us.callValidateCode)(e,t,u)}`),b(t),i||s.assign(y,!0)},$=>{s.if((0,oe._)`!(${$} instanceof ${o.ValidationError})`,()=>s.throw($)),v($),i||s.assign(y,!1)}),e.ok(y)}function h(){e.result((0,us.callValidateCode)(e,t,u),()=>b(t),()=>v(t))}function v(y){const $=(0,oe._)`${y}.errors`;s.assign(Qe.default.vErrors,(0,oe._)`${Qe.default.vErrors} === null ? ${$} : ${Qe.default.vErrors}.concat(${$})`),s.assign(Qe.default.errors,(0,oe._)`${Qe.default.vErrors}.length`)}function b(y){var $;if(!o.opts.unevaluated)return;const m=($=r?.validate)===null||$===void 0?void 0:$.evaluated;if(o.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(o.props=At.mergeEvaluated.props(s,m.props,o.props));else{const f=s.var("props",(0,oe._)`${y}.evaluated.props`);o.props=At.mergeEvaluated.props(s,f,o.props,oe.Name)}if(o.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(o.items=At.mergeEvaluated.items(s,m.items,o.items));else{const f=s.var("items",(0,oe._)`${y}.evaluated.items`);o.items=At.mergeEvaluated.items(s,f,o.items,oe.Name)}}}Ue.callRef=Ut;Ue.default=kc;Object.defineProperty(fn,"__esModule",{value:!0});const Oc=hn,jc=Ue,Ic=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Oc.default,jc.default];fn.default=Ic;var pn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});const Yt=H,Te=Yt.operators,Xt={maximum:{okStr:"<=",ok:Te.LTE,fail:Te.GT},minimum:{okStr:">=",ok:Te.GTE,fail:Te.LT},exclusiveMaximum:{okStr:"<",ok:Te.LT,fail:Te.GTE},exclusiveMinimum:{okStr:">",ok:Te.GT,fail:Te.LTE}},Rc={message:({keyword:e,schemaCode:t})=>(0,Yt.str)`must be ${Xt[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Yt._)`{comparison: ${Xt[e].okStr}, limit: ${t}}`},Tc={keyword:Object.keys(Xt),type:"number",schemaType:"number",$data:!0,error:Rc,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Yt._)`${r} ${Xt[t].fail} ${n} || isNaN(${r})`)}};mn.default=Tc;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});const yt=H,Mc={message:({schemaCode:e})=>(0,yt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,yt._)`{multipleOf: ${e}}`},Cc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Mc,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,i=t.let("res"),a=o?(0,yt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,yt._)`${i} !== parseInt(${i})`;e.fail$data((0,yt._)`(${n} === 0 || (${i} = ${r}/${n}, ${a}))`)}};yn.default=Cc;var gn={},$n={};Object.defineProperty($n,"__esModule",{value:!0});function So(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}$n.default=So;So.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(gn,"__esModule",{value:!0});const qe=H,Dc=I,Ac=$n,Vc={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,qe.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,qe._)`{limit: ${e}}`},Lc={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vc,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?qe.operators.GT:qe.operators.LT,i=s.opts.unicode===!1?(0,qe._)`${r}.length`:(0,qe._)`${(0,Dc.useFunc)(e.gen,Ac.default)}(${r})`;e.fail$data((0,qe._)`${i} ${o} ${n}`)}};gn.default=Lc;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});const qc=q,Zt=H,Hc={message:({schemaCode:e})=>(0,Zt.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Zt._)`{pattern: ${e}}`},zc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Hc,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,i=o.opts.unicodeRegExp?"u":"",a=r?(0,Zt._)`(new RegExp(${s}, ${i}))`:(0,qc.usePattern)(e,n);e.fail$data((0,Zt._)`!${a}.test(${t})`)}};_n.default=zc;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});const gt=H,Fc={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,gt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,gt._)`{limit: ${e}}`},Kc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Fc,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?gt.operators.GT:gt.operators.LT;e.fail$data((0,gt._)`Object.keys(${r}).length ${s} ${n}`)}};vn.default=Kc;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});const ut=q,$t=H,Uc=I,xc={message:({params:{missingProperty:e}})=>(0,$t.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,$t._)`{missingProperty: ${e}}`},Jc={keyword:"required",type:"object",schemaType:"array",$data:!0,error:xc,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:i}=e,{opts:a}=i;if(!o&&r.length===0)return;const c=r.length>=a.loopRequired;if(i.allErrors?u():d(),a.strictRequired){const b=e.parentSchema.properties,{definedProperties:y}=e.it;for(const $ of r)if(b?.[$]===void 0&&!y.has($)){const m=i.schemaEnv.baseId+i.errSchemaPath,f=`required property "${$}" is not defined at "${m}" (strictRequired)`;(0,Uc.checkStrictMode)(i,f,i.opts.strictRequired)}}function u(){if(c||o)e.block$data($t.nil,h);else for(const b of r)(0,ut.checkReportMissingProp)(e,b)}function d(){const b=t.let("missing");if(c||o){const y=t.let("valid",!0);e.block$data(y,()=>v(b,y)),e.ok(y)}else t.if((0,ut.checkMissingProp)(e,r,b)),(0,ut.reportMissingProp)(e,b),t.else()}function h(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,ut.noPropertyInData)(t,s,b,a.ownProperties),()=>e.error())})}function v(b,y){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(y,(0,ut.propertyInData)(t,s,b,a.ownProperties)),t.if((0,$t.not)(y),()=>{e.error(),t.break()})},$t.nil)}}};wn.default=Jc;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});const _t=H,Gc={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,_t.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,_t._)`{limit: ${e}}`},Bc={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Gc,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?_t.operators.GT:_t.operators.LT;e.fail$data((0,_t._)`${r}.length ${s} ${n}`)}};bn.default=Bc;var Sn={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});const Eo=Ws;Eo.code='require("ajv/dist/runtime/equal").default';jt.default=Eo;Object.defineProperty(Sn,"__esModule",{value:!0});const Tr=Y,te=H,Wc=I,Qc=jt,Yc={message:({params:{i:e,j:t}})=>(0,te.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,te._)`{i: ${e}, j: ${t}}`},Xc={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Yc,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:i,it:a}=e;if(!n&&!s)return;const c=t.let("valid"),u=o.items?(0,Tr.getSchemaTypes)(o.items):[];e.block$data(c,d,(0,te._)`${i} === false`),e.ok(c);function d(){const y=t.let("i",(0,te._)`${r}.length`),$=t.let("j");e.setParams({i:y,j:$}),t.assign(c,!0),t.if((0,te._)`${y} > 1`,()=>(h()?v:b)(y,$))}function h(){return u.length>0&&!u.some(y=>y==="object"||y==="array")}function v(y,$){const m=t.name("item"),f=(0,Tr.checkDataTypes)(u,m,a.opts.strictNumbers,Tr.DataType.Wrong),g=t.const("indices",(0,te._)`{}`);t.for((0,te._)`;${y}--;`,()=>{t.let(m,(0,te._)`${r}[${y}]`),t.if(f,(0,te._)`continue`),u.length>1&&t.if((0,te._)`typeof ${m} == "string"`,(0,te._)`${m} += "_"`),t.if((0,te._)`typeof ${g}[${m}] == "number"`,()=>{t.assign($,(0,te._)`${g}[${m}]`),e.error(),t.assign(c,!1).break()}).code((0,te._)`${g}[${m}] = ${y}`)})}function b(y,$){const m=(0,Wc.useFunc)(t,Qc.default),f=t.name("outer");t.label(f).for((0,te._)`;${y}--;`,()=>t.for((0,te._)`${$} = ${y}; ${$}--;`,()=>t.if((0,te._)`${m}(${r}[${y}], ${r}[${$}])`,()=>{e.error(),t.assign(c,!1).break(f)})))}}};Sn.default=Xc;var En={};Object.defineProperty(En,"__esModule",{value:!0});const Hr=H,Zc=I,el=jt,tl={message:"must be equal to constant",params:({schemaCode:e})=>(0,Hr._)`{allowedValue: ${e}}`},rl={keyword:"const",$data:!0,error:tl,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Hr._)`!${(0,Zc.useFunc)(t,el.default)}(${r}, ${s})`):e.fail((0,Hr._)`${o} !== ${r}`)}};En.default=rl;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const ft=H,nl=I,sl=jt,ol={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,ft._)`{allowedValues: ${e}}`},al={keyword:"enum",schemaType:"array",$data:!0,error:ol,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:i}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=i.opts.loopEnum;let c;const u=()=>c??(c=(0,nl.useFunc)(t,sl.default));let d;if(a||n)d=t.let("valid"),e.block$data(d,h);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",o);d=(0,ft.or)(...s.map((y,$)=>v(b,$)))}e.pass(d);function h(){t.assign(d,!1),t.forOf("v",o,b=>t.if((0,ft._)`${u()}(${r}, ${b})`,()=>t.assign(d,!0).break()))}function v(b,y){const $=s[y];return typeof $=="object"&&$!==null?(0,ft._)`${u()}(${r}, ${b}[${y}])`:(0,ft._)`${r} === ${$}`}}};Pn.default=al;Object.defineProperty(pn,"__esModule",{value:!0});const il=mn,cl=yn,ll=gn,ul=_n,dl=vn,fl=wn,hl=bn,pl=Sn,ml=En,yl=Pn,gl=[il.default,cl.default,ll.default,ul.default,dl.default,fl.default,hl.default,pl.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ml.default,yl.default];pn.default=gl;var Nn={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.validateAdditionalItems=void 0;const He=H,zr=I,$l={message:({params:{len:e}})=>(0,He.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,He._)`{limit: ${e}}`},_l={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:$l,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,zr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Po(e,n)}};function Po(e,t){const{gen:r,schema:n,data:s,keyword:o,it:i}=e;i.items=!0;const a=r.const("len",(0,He._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,He._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,zr.alwaysValidSchema)(i,n)){const u=r.var("valid",(0,He._)`${a} <= ${t.length}`);r.if((0,He.not)(u),()=>c(u)),e.ok(u)}function c(u){r.forRange("i",t.length,a,d=>{e.subschema({keyword:o,dataProp:d,dataPropType:zr.Type.Num},u),i.allErrors||r.if((0,He.not)(u),()=>r.break())})}}at.validateAdditionalItems=Po;at.default=_l;var kn={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.validateTuple=void 0;const fs=H,xt=I,vl=q,wl={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return No(e,"additionalItems",t);r.items=!0,!(0,xt.alwaysValidSchema)(r,t)&&e.ok((0,vl.validateArray)(e))}};function No(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:i,it:a}=e;d(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=xt.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),u=n.const("len",(0,fs._)`${o}.length`);r.forEach((h,v)=>{(0,xt.alwaysValidSchema)(a,h)||(n.if((0,fs._)`${u} > ${v}`,()=>e.subschema({keyword:i,schemaProp:v,dataProp:v},c)),e.ok(c))});function d(h){const{opts:v,errSchemaPath:b}=a,y=r.length,$=y===h.minItems&&(y===h.maxItems||h[t]===!1);if(v.strictTuples&&!$){const m=`"${i}" is ${y}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,xt.checkStrictMode)(a,m,v.strictTuples)}}}it.validateTuple=No;it.default=wl;Object.defineProperty(kn,"__esModule",{value:!0});const bl=it,Sl={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,bl.validateTuple)(e,"items")};kn.default=Sl;var On={};Object.defineProperty(On,"__esModule",{value:!0});const hs=H,El=I,Pl=q,Nl=at,kl={message:({params:{len:e}})=>(0,hs.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,hs._)`{limit: ${e}}`},Ol={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:kl,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,El.alwaysValidSchema)(n,t)&&(s?(0,Nl.validateAdditionalItems)(e,s):e.ok((0,Pl.validateArray)(e)))}};On.default=Ol;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});const le=H,Vt=I,jl={message:({params:{min:e,max:t}})=>t===void 0?(0,le.str)`must contain at least ${e} valid item(s)`:(0,le.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,le._)`{minContains: ${e}}`:(0,le._)`{minContains: ${e}, maxContains: ${t}}`},Il={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:jl,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let i,a;const{minContains:c,maxContains:u}=n;o.opts.next?(i=c===void 0?1:c,a=u):i=1;const d=t.const("len",(0,le._)`${s}.length`);if(e.setParams({min:i,max:a}),a===void 0&&i===0){(0,Vt.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Vt.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Vt.alwaysValidSchema)(o,r)){let $=(0,le._)`${d} >= ${i}`;a!==void 0&&($=(0,le._)`${$} && ${d} <= ${a}`),e.pass($);return}o.items=!0;const h=t.name("valid");a===void 0&&i===1?b(h,()=>t.if(h,()=>t.break())):i===0?(t.let(h,!0),a!==void 0&&t.if((0,le._)`${s}.length > 0`,v)):(t.let(h,!1),v()),e.result(h,()=>e.reset());function v(){const $=t.name("_valid"),m=t.let("count",0);b($,()=>t.if($,()=>y(m)))}function b($,m){t.forRange("i",0,d,f=>{e.subschema({keyword:"contains",dataProp:f,dataPropType:Vt.Type.Num,compositeRule:!0},$),m()})}function y($){t.code((0,le._)`${$}++`),a===void 0?t.if((0,le._)`${$} >= ${i}`,()=>t.assign(h,!0).break()):(t.if((0,le._)`${$} > ${a}`,()=>t.assign(h,!1).break()),i===1?t.assign(h,!0):t.if((0,le._)`${$} >= ${i}`,()=>t.assign(h,!0)))}}};jn.default=Il;var ko={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=H,r=I,n=q;e.error={message:({params:{property:c,depsCount:u,deps:d}})=>{const h=u===1?"property":"properties";return(0,t.str)`must have ${h} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:d,missingProperty:h}})=>(0,t._)`{property: ${c},
    missingProperty: ${h},
    depsCount: ${u},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[u,d]=o(c);i(c,u),a(c,d)}};function o({schema:c}){const u={},d={};for(const h in c){if(h==="__proto__")continue;const v=Array.isArray(c[h])?u:d;v[h]=c[h]}return[u,d]}function i(c,u=c.schema){const{gen:d,data:h,it:v}=c;if(Object.keys(u).length===0)return;const b=d.let("missing");for(const y in u){const $=u[y];if($.length===0)continue;const m=(0,n.propertyInData)(d,h,y,v.opts.ownProperties);c.setParams({property:y,depsCount:$.length,deps:$.join(", ")}),v.allErrors?d.if(m,()=>{for(const f of $)(0,n.checkReportMissingProp)(c,f)}):(d.if((0,t._)`${m} && (${(0,n.checkMissingProp)(c,$,b)})`),(0,n.reportMissingProp)(c,b),d.else())}}e.validatePropertyDeps=i;function a(c,u=c.schema){const{gen:d,data:h,keyword:v,it:b}=c,y=d.name("valid");for(const $ in u)(0,r.alwaysValidSchema)(b,u[$])||(d.if((0,n.propertyInData)(d,h,$,b.opts.ownProperties),()=>{const m=c.subschema({keyword:v,schemaProp:$},y);c.mergeValidEvaluated(m,y)},()=>d.var(y,!0)),c.ok(y))}e.validateSchemaDeps=a,e.default=s})(ko);var In={};Object.defineProperty(In,"__esModule",{value:!0});const Oo=H,Rl=I,Tl={message:"property name must be valid",params:({params:e})=>(0,Oo._)`{propertyName: ${e.propertyName}}`},Ml={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Tl,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Rl.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,i=>{e.setParams({propertyName:i}),e.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),t.if((0,Oo.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};In.default=Ml;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Lt=q,ge=H,Cl=Pe,qt=I,Dl={message:"must NOT have additional properties",params:({params:e})=>(0,ge._)`{additionalProperty: ${e.additionalProperty}}`},Al={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Dl,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:i}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,qt.alwaysValidSchema)(i,r))return;const u=(0,Lt.allSchemaProperties)(n.properties),d=(0,Lt.allSchemaProperties)(n.patternProperties);h(),e.ok((0,ge._)`${o} === ${Cl.default.errors}`);function h(){t.forIn("key",s,m=>{!u.length&&!d.length?y(m):t.if(v(m),()=>y(m))})}function v(m){let f;if(u.length>8){const g=(0,qt.schemaRefOrVal)(i,n.properties,"properties");f=(0,Lt.isOwnProperty)(t,g,m)}else u.length?f=(0,ge.or)(...u.map(g=>(0,ge._)`${m} === ${g}`)):f=ge.nil;return d.length&&(f=(0,ge.or)(f,...d.map(g=>(0,ge._)`${(0,Lt.usePattern)(e,g)}.test(${m})`))),(0,ge.not)(f)}function b(m){t.code((0,ge._)`delete ${s}[${m}]`)}function y(m){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){b(m);return}if(r===!1){e.setParams({additionalProperty:m}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,qt.alwaysValidSchema)(i,r)){const f=t.name("valid");c.removeAdditional==="failing"?($(m,f,!1),t.if((0,ge.not)(f),()=>{e.reset(),b(m)})):($(m,f),a||t.if((0,ge.not)(f),()=>t.break()))}}function $(m,f,g){const P={keyword:"additionalProperties",dataProp:m,dataPropType:qt.Type.Str};g===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,f)}}};ir.default=Al;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const Vl=_e,ps=q,Mr=I,ms=ir,Ll={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ms.default.code(new Vl.KeywordCxt(o,ms.default,"additionalProperties"));const i=(0,ps.allSchemaProperties)(r);for(const h of i)o.definedProperties.add(h);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=Mr.mergeEvaluated.props(t,(0,Mr.toHash)(i),o.props));const a=i.filter(h=>!(0,Mr.alwaysValidSchema)(o,r[h]));if(a.length===0)return;const c=t.name("valid");for(const h of a)u(h)?d(h):(t.if((0,ps.propertyInData)(t,s,h,o.opts.ownProperties)),d(h),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(h),e.ok(c);function u(h){return o.opts.useDefaults&&!o.compositeRule&&r[h].default!==void 0}function d(h){e.subschema({keyword:"properties",schemaProp:h,dataProp:h},c)}}};Rn.default=Ll;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const ys=q,Ht=H,gs=I,$s=I,ql={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:i}=o,a=(0,ys.allSchemaProperties)(r),c=a.filter($=>(0,gs.alwaysValidSchema)(o,r[$]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const u=i.strictSchema&&!i.allowMatchingProperties&&s.properties,d=t.name("valid");o.props!==!0&&!(o.props instanceof Ht.Name)&&(o.props=(0,$s.evaluatedPropsToName)(t,o.props));const{props:h}=o;v();function v(){for(const $ of a)u&&b($),o.allErrors?y($):(t.var(d,!0),y($),t.if(d))}function b($){for(const m in u)new RegExp($).test(m)&&(0,gs.checkStrictMode)(o,`property ${m} matches pattern ${$} (use allowMatchingProperties)`)}function y($){t.forIn("key",n,m=>{t.if((0,Ht._)`${(0,ys.usePattern)(e,$)}.test(${m})`,()=>{const f=c.includes($);f||e.subschema({keyword:"patternProperties",schemaProp:$,dataProp:m,dataPropType:$s.Type.Str},d),o.opts.unevaluated&&h!==!0?t.assign((0,Ht._)`${h}[${m}]`,!0):!f&&!o.allErrors&&t.if((0,Ht.not)(d),()=>t.break())})})}}};Tn.default=ql;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const Hl=I,zl={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Hl.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Mn.default=zl;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});const Fl=q,Kl={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Fl.validateUnion,error:{message:"must match a schema in anyOf"}};Cn.default=Kl;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});const Jt=H,Ul=I,xl={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Jt._)`{passingSchemas: ${e.passing}}`},Jl={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:xl,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,i=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(i,()=>e.reset(),()=>e.error(!0));function u(){o.forEach((d,h)=>{let v;(0,Ul.alwaysValidSchema)(s,d)?t.var(c,!0):v=e.subschema({keyword:"oneOf",schemaProp:h,compositeRule:!0},c),h>0&&t.if((0,Jt._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Jt._)`[${a}, ${h}]`).else(),t.if(c,()=>{t.assign(i,!0),t.assign(a,h),v&&e.mergeEvaluated(v,Jt.Name)})})}}};Dn.default=Jl;var An={};Object.defineProperty(An,"__esModule",{value:!0});const Gl=I,Bl={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,i)=>{if((0,Gl.alwaysValidSchema)(n,o))return;const a=e.subschema({keyword:"allOf",schemaProp:i},s);e.ok(s),e.mergeEvaluated(a)})}};An.default=Bl;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const er=H,jo=I,Wl={message:({params:e})=>(0,er.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,er._)`{failingKeyword: ${e.ifClause}}`},Ql={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Wl,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,jo.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=_s(n,"then"),o=_s(n,"else");if(!s&&!o)return;const i=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),s&&o){const d=t.let("ifClause");e.setParams({ifClause:d}),t.if(a,u("then",d),u("else",d))}else s?t.if(a,u("then")):t.if((0,er.not)(a),u("else"));e.pass(i,()=>e.error(!0));function c(){const d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(d)}function u(d,h){return()=>{const v=e.subschema({keyword:d},a);t.assign(i,a),e.mergeValidEvaluated(v,i),h?t.assign(h,(0,er._)`${d}`):e.setParams({ifClause:d})}}}};function _s(e,t){const r=e.schema[t];return r!==void 0&&!(0,jo.alwaysValidSchema)(e,r)}Vn.default=Ql;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});const Yl=I,Xl={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Yl.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Ln.default=Xl;Object.defineProperty(Nn,"__esModule",{value:!0});const Zl=at,eu=kn,tu=it,ru=On,nu=jn,su=ko,ou=In,au=ir,iu=Rn,cu=Tn,lu=Mn,uu=Cn,du=Dn,fu=An,hu=Vn,pu=Ln;function mu(e=!1){const t=[lu.default,uu.default,du.default,fu.default,hu.default,pu.default,ou.default,au.default,su.default,iu.default,cu.default];return e?t.push(eu.default,ru.default):t.push(Zl.default,tu.default),t.push(nu.default),t}Nn.default=mu;var qn={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const Q=H,yu={message:({schemaCode:e})=>(0,Q.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Q._)`{format: ${e}}`},gu={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:yu,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:i,it:a}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:h}=a;if(!c.validateFormats)return;s?v():b();function v(){const y=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),$=r.const("fDef",(0,Q._)`${y}[${i}]`),m=r.let("fType"),f=r.let("format");r.if((0,Q._)`typeof ${$} == "object" && !(${$} instanceof RegExp)`,()=>r.assign(m,(0,Q._)`${$}.type || "string"`).assign(f,(0,Q._)`${$}.validate`),()=>r.assign(m,(0,Q._)`"string"`).assign(f,$)),e.fail$data((0,Q.or)(g(),P()));function g(){return c.strictSchema===!1?Q.nil:(0,Q._)`${i} && !${f}`}function P(){const E=d.$async?(0,Q._)`(${$}.async ? await ${f}(${n}) : ${f}(${n}))`:(0,Q._)`${f}(${n})`,N=(0,Q._)`(typeof ${f} == "function" ? ${E} : ${f}.test(${n}))`;return(0,Q._)`${f} && ${f} !== true && ${m} === ${t} && !${N}`}}function b(){const y=h.formats[o];if(!y){g();return}if(y===!0)return;const[$,m,f]=P(y);$===t&&e.pass(E());function g(){if(c.strictSchema===!1){h.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function P(N){const O=N instanceof RegExp?(0,Q.regexpCode)(N):c.code.formats?(0,Q._)`${c.code.formats}${(0,Q.getProperty)(o)}`:void 0,C=r.scopeValue("formats",{key:o,ref:N,code:O});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,Q._)`${C}.validate`]:["string",N,C]}function E(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!d.$async)throw new Error("async format in sync schema");return(0,Q._)`await ${f}(${n})`}return typeof m=="function"?(0,Q._)`${f}(${n})`:(0,Q._)`${f}.test(${n})`}}}};Hn.default=gu;Object.defineProperty(qn,"__esModule",{value:!0});const $u=Hn,_u=[$u.default];qn.default=_u;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.contentVocabulary=nt.metadataVocabulary=void 0;nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(dn,"__esModule",{value:!0});const vu=fn,wu=pn,bu=Nn,Su=qn,vs=nt,Eu=[vu.default,wu.default,(0,bu.default)(),Su.default,vs.metadataVocabulary,vs.contentVocabulary];dn.default=Eu;var zn={},cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.DiscrError=void 0;var ws;(function(e){e.Tag="tag",e.Mapping="mapping"})(ws||(cr.DiscrError=ws={}));Object.defineProperty(zn,"__esModule",{value:!0});const Ye=H,Fr=cr,bs=ae,Pu=ot,Nu=I,ku={message:({params:{discrError:e,tagName:t}})=>e===Fr.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ye._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Ou={keyword:"discriminator",type:"object",schemaType:"object",error:ku,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:i}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),u=t.const("tag",(0,Ye._)`${r}${(0,Ye.getProperty)(a)}`);t.if((0,Ye._)`typeof ${u} == "string"`,()=>d(),()=>e.error(!1,{discrError:Fr.DiscrError.Tag,tag:u,tagName:a})),e.ok(c);function d(){const b=v();t.if(!1);for(const y in b)t.elseIf((0,Ye._)`${u} === ${y}`),t.assign(c,h(b[y]));t.else(),e.error(!1,{discrError:Fr.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function h(b){const y=t.name("valid"),$=e.subschema({keyword:"oneOf",schemaProp:b},y);return e.mergeEvaluated($,Ye.Name),y}function v(){var b;const y={},$=f(s);let m=!0;for(let E=0;E<i.length;E++){let N=i[E];if(N?.$ref&&!(0,Nu.schemaHasRulesButRef)(N,o.self.RULES)){const C=N.$ref;if(N=bs.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,C),N instanceof bs.SchemaEnv&&(N=N.schema),N===void 0)throw new Pu.default(o.opts.uriResolver,o.baseId,C)}const O=(b=N?.properties)===null||b===void 0?void 0:b[a];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);m=m&&($||f(N)),g(O,E)}if(!m)throw new Error(`discriminator: "${a}" must be required`);return y;function f({required:E}){return Array.isArray(E)&&E.includes(a)}function g(E,N){if(E.const)P(E.const,N);else if(E.enum)for(const O of E.enum)P(O,N);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function P(E,N){if(typeof E!="string"||E in y)throw new Error(`discriminator: "${a}" values must be unique strings`);y[E]=N}}}};zn.default=Ou;const ju="http://json-schema.org/draft-07/schema#",Iu="http://json-schema.org/draft-07/schema#",Ru="Core schema meta-schema",Tu={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Mu=["object","boolean"],Cu={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Du={$schema:ju,$id:Iu,title:Ru,definitions:Tu,type:Mu,properties:Cu,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Ms,n=dn,s=zn,o=Du,i=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(y=>this.addVocabulary(y)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const y=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(y,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var u=_e;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=H;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var h=Ot;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var v=ot;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(Dr,Dr.exports);const Au=Bo(Dr.exports),Vu=0xcbf29ce484222325n,Lu=0x84222325cbf29ce4n,qu=0x100000001b3n,Hu=(1n<<64n)-1n,Ss=(e,t)=>{let r=t;for(let n=0;n<e.length;n+=1)r^=BigInt(e.charCodeAt(n)),r=r*qu&Hu;return r},Es=e=>e.toString(16).padStart(16,"0"),lr=(...e)=>{const t=JSON.stringify(e),r=Ss(t,Vu),n=Ss(t,Lu);return`${Es(r)}${Es(n)}`},Ee={type:"string"},zu={type:"number"},xe=(e,t={})=>({type:"object",properties:e,required:Object.keys(e),...t}),je=e=>JSON.stringify(e,null,2),st=e=>JSON.parse(e),Io=(e,t)=>{const r=new Au().compile(t);if(r(e))return!0;throw new Error(r.errors?.map(n=>n.message).join(", ")||"Invalid data")};function de({schemaHash:e,data:t}){if(e==="0"&&je(t)!="{}")throw new Error("schema hash is 0 but data is not empty :"+je(t));return lr(e,t)}function he(e,t,r){return{schemaHash:de(t),data:{...e?{title:e}:{},...r}}}const De={schemaHash:"0",data:{}},It=he("script_schema",De,xe({title:Ee,code:Ee})),Ro=he("script_result_schema",De,xe({title:Ee,script:"#"+de(It),content:{}},{title:"script_result_schema"})),To=he("titled_schema",De,xe({title:Ee})),Fn=he("has_titled_child",De,xe({child:xe({title:Ee})})),Kn=he("a titled",To,{title:"im child"}),Fu=he("titled1",Fn,{child:Kn.data}),Ku=he("titled2",Fn,{child:`#${de(Kn)}`}),Rt=he("function schema",De,xe({title:Ee,code:Ee},{title:"function_schema",required:["code"]})),Mo=he("function schema",De,xe({title:Ee,code:Ee},{title:"server_function",required:["code"]})),Uu=he("example function",Rt,{title:"example function",inputs:["a","b"],code:"return a + b"});he("",De,Ee),he("",De,zu);const ze=e=>typeof e=="string"&&/^#([a-f0-9]+)$/.exec(e),vt=async(e,t,r=new Set)=>{if(typeof e=="string"){const n=ze(e);if(!n)return e;const s=n[1];if(r.has(s))throw new Error(`cycle: #${s}`);return r.add(s),vt(await t(s),t,r)}return Array.isArray(e)?Promise.all(e.map(n=>vt(n,t,r))):e&&typeof e=="object"?Object.fromEntries(await Promise.all(Object.entries(e).map(async([n,s])=>[n,await vt(s,t,r)]))):e},xu=(e,t,r)=>typeof e=="number"?t(e):(e[0]=="#"&&(e=e.slice(1)),e.length==32?r(e):t(Number(e))),Un="jsonview",Kr={local:"http://localhost:3000",prod:"https://maincloud.spacetimedb.com"},Ju=()=>["localhost","127.0.0.1"].includes(window.location.hostname),Gu=()=>{const e=new URLSearchParams(window.location.search).get("db"),t=localStorage.getItem("db_preset");return e&&Kr[e]?(localStorage.setItem("db_preset",e),e):t&&Kr[t]?t:Ju()?"local":"prod"},Bu=Gu(),Co=Kr[Bu];let tr=localStorage.getItem("access_token");const ur=(e,t,r=null)=>fetch(`${Co}${e}`,{method:t,headers:{"Content-Type":"application/json",...tr?{Authorization:`Bearer ${tr}`}:{}},body:r}),xn=async(e,t)=>{const r=await ur(`/v1/database/${Un}/call/${e}`,"POST",JSON.stringify(t));if(!r.ok)throw new Error(await r.text());return r.text()},pe=async(e,t=!1,r=null)=>{if(t&&r!=null){const s=await pe("select count from note_count");let o=Math.max(0,Number(s.rows[0][0])-r);e=e+` where id > ${o}`}const n=await(await ur(`/v1/database/${Un}/sql`,"POST",e)).text();try{const s=JSON.parse(n);s.length>1&&console.warn("multiple rows returned, TODO: handle this");const{schema:o,rows:i}=s[0];return{names:o.elements.map(a=>a.name.some),rows:t?i.reverse():i}}catch(s){return ue(ee(n)),{names:["error"],rows:[s.message]}}},Do=e=>{const t=new Map,r=lr(e.toString()+":cached:"+Co);return async n=>{const s=r+JSON.stringify(n);if(t.has(s))return t.get(s);const o=localStorage.getItem(s);if(o){const a=JSON.parse(o);return t.set(s,a),a}const i=await e(n);return localStorage.setItem(s,JSON.stringify(i)),t.set(s,i),i}},Jn=async(e,t)=>{let r=await Et(e);const n=await ur(`/v1/database/${Un}/call/add_note`,"POST",JSON.stringify({schemaHash:r,data:je(t)}));if(!n.ok)throw new Error(await n.text());return"#"+de({schemaHash:r,data:t})},dr=Do(async e=>{const t=await pe(xu(e,n=>`select * from note where id = ${n}`,n=>`select * from note where hash = '${n}'`)),r=t.rows[0];if(!r)throw new Error("note not found");return Object.fromEntries(t.names.map((n,s)=>[n,r[s]]))}),Tt=e=>dr(e).then(t=>t.id),Et=e=>dr(e).then(t=>t.hash),Ao=e=>dr(e).then(t=>t.schemaId),fe=Do(async e=>{const t=await dr(e);return{schemaHash:await Et(t.schemaId),data:st(t.data)}});tr===null&&ur("/v1/identity","POST").then(e=>e.json()).then(e=>{tr=e.token});const Wu=async e=>{try{const t=s=>fe(s).then(o=>o.data),r=typeof e.data=="string"?JSON.parse(e.data):e.data,n=(await fe(e.schemaHash)).data;return Io(await vt(r,t),await vt(n,t))}catch(t){throw new Error(t.message||t)}},Ur=e=>fe(e).then(async t=>{let r=t.data,n=typeof r=="string"?r:JSON.stringify(r);return n=n.replace(/\n/g," "),`#${await Tt(e)}`+(r?.title?`:${r.title}`:typeof r=="string"||typeof r=="number"?`:${n.slice(0,20)}`:"")}),Gn=e=>fe(e).then(async t=>{let r=t.data,n="",s=(o,i)=>{let a="  ".repeat(i);if(typeof o=="string")if(o.length>60||o.includes(`
`)){const u=o.split(`
`);n+=`
`+a+"`",u.forEach((d,h)=>{n+=(h===0?"":`
`+a)+d}),n+="`"}else n+=" "+o;else typeof o=="number"?n+=" "+o:typeof o=="object"&&Object.entries(o).forEach(([c,u])=>{n+=`
`+a+c+":",s(u,i+1)})};return s(r,0),n}),Bn=(e,t,r={})=>{let n=tt(t??`#${e}`);const s=typeof e=="string"?e.replace(/^#/,""):String(e);return t===void 0&&Ur(e).then(o=>n.innerHTML=o),Bt(`/${s}`,n,r)},Qu=e=>JSON.stringify(e,null,2),Fe=A(ee("loading...")),fr=(e,t)=>{const r=[...t].sort((i,a)=>(a.count||0)-(i.count||0)||(Number(a.id)||0)-(Number(i.id)||0)),n=i=>{Fe.innerHTML="";const a=A(L({display:"flex",flexDirection:"column",gap:"0.5em"}));i.slice(0,10).forEach(c=>{const u=c.count!==void 0?` (${c.count})`:"",d=A(L({display:"flex",gap:"0.5em",alignItems:"center"}),B(`#${c.id}${c.title?` : ${c.title}`:""}${u}`,{style:{textAlign:"left",width:"100%"},onclick:()=>{e(c),o.remove()}}),B("preview",{onclick:()=>window.open(`/${c.hash}`,"_blank","noopener"),style:{fontSize:"0.85em",padding:"0.2em 0.4em"}}));a.appendChild(d)}),Fe.appendChild(a)};n(r);const s=bt("",{placeholder:"search id, title, hash"});s.oninput=()=>{const i=s.value.trim().toLowerCase();if(!i)return n(r);const a=r.filter(u=>u.id.toLowerCase().includes(i));if(a.length)return n(a);const c=r.filter(u=>u.title.toLowerCase().includes(i));return n(c)};let o=ue(A(L({display:"flex",flexDirection:"column",gap:"0.5em"}),s,Fe))},Vo=(e,t,r="change schema")=>B(r,{onclick:()=>{e().then(n=>{fr(t,n)}).catch(n=>{Fe.innerHTML="",Fe.appendChild(ee(n.message||"failed to load schemas"))})}}),ht=(e,t,r)=>{let{type:n,properties:s,items:o}=e;if(!n){let a=ht({type:"string"},()=>{try{let d=a.getData(),h=st(d);u.innerHTML="",c.onclick=()=>a.setData(je(h))}catch(d){u.innerHTML=String(d)}}),c=B("format"),u=tt("hello",L({color:"red",margin:"0.5em"}));return{element:A(a.element,A(c,u)),getData:()=>st(a.getData()),setData:d=>a.setData(je(d))}}const i=a=>{let c="";const u=tt();u.style.display="none",u.style.cursor=r?"pointer":"default",u.style.textDecoration=r?"underline":"none",u.onclick=y=>{if(r&&ze(c)){y.preventDefault(),r(c.slice(1));return}c="",u.style.display="none",a.element.style.display="",t()};const d=y=>{c=y,ze(c)?(u.innerText=c,u.style.display="",a.element.style.display="none"):(u.style.display="none",a.element.style.display=""),t()},h=()=>pe("select id, data, hash from note",!0,200).then(y=>y.rows.map($=>{let m="";try{const f=JSON.parse(String($[1]??""));m=f?.title?String(f.title):""}catch{}return{id:String($[0]),title:m,hash:String($[2]??"")}})),b=B("\u{1F517}",{onclick:()=>{h().then(y=>{fr($=>d(`#${$.hash}`),y)}).catch(y=>{Fe.innerHTML="",Fe.appendChild(ee(y.message||"failed to load notes"))})},style:{background:"transparent",border:"none",padding:"0 0.1em",cursor:"pointer"}});return{element:A(L({display:"inline-flex",alignItems:"center",gap:"0.25em"}),b,u,a.element),getData:()=>ze(c)?c:a.getData(),setData:y=>{typeof y=="string"&&ze(y)?d(y):(d(""),a.setData(y))}}};if(n=="string"){let a=Br();a.rows=1,a.style.resize="none",a.style.overflow="hidden",a.style.verticalAlign="middle",a.style.boxSizing="content-box";const c=50,u=A(L({display:"none",position:"absolute",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)",zIndex:"1000",maxHeight:"200px",overflowY:"auto"})),d=()=>pe("select id, data, hash from note",!0,200).then(y=>y.rows.map($=>{let m="";try{const f=JSON.parse(String($[1]??""));m=f?.title?String(f.title):""}catch{}return{id:String($[0]),title:m,hash:String($[2]??"")}})),h=()=>{const y=a.selectionStart??0,$=a.value,m=$.lastIndexOf("#",y-1);if(m<0){u.style.display="none";return}const f=$.slice(m+1,y);if(!/^[A-Za-z0-9]*$/.test(f)){u.style.display="none";return}d().then(g=>{const P=f.toLowerCase(),E=g.filter(N=>N.id.toLowerCase().includes(P)||N.title.toLowerCase().includes(P)).slice(0,8);if(u.innerHTML="",!E.length){u.style.display="none";return}E.forEach(N=>{u.appendChild(B(`#${N.id}${N.title?`: ${N.title}`:""}`,{onclick:()=>{const O=$.slice(0,m),C=$.slice(y);a.value=`${O}#${N.id}${C}`;const J=m+1+N.id.length;a.setSelectionRange(J,J),u.style.display="none",v()}}))}),u.style.display="block"})},v=()=>{a.style.height="0px",a.style.height=`${a.scrollHeight}px`;const y=a.value.split(`
`).reduce(($,m)=>Math.max($,m.length),0);a.style.width=`${Math.max(c,y+1)}ch`,t()};a.oninput=()=>{v(),h()},a.onkeydown=y=>{y.key==="#"&&h()},requestAnimationFrame(v);const b=A(L({position:"relative",display:"inline-block"}),a,u);return i({element:b,getData:()=>a.value,setData:y=>{a.value=y,v()}})}if(n=="number"){let a=bt();return a.type="number",a.oninput=t,i({element:a,getData:()=>Number(a.value),setData:c=>{a.value=String(c)}})}if(n=="array"){let a=[],c=A();const u=h=>{const v=A(L({display:"flex",alignItems:"center",gap:"0.25em"}),B("-",{onclick:()=>{a=a.filter(b=>b!==h),v.remove(),t()}}),h.element);return v};let d=A(L({paddingLeft:"0.5em"}),c,B("+",{onclick:()=>{let h=ht(o,t);a.push(h),c.append(u(h)),t()}}));return i({element:d,getData:()=>a.map(h=>h.getData()),setData:h=>{a=h.map(v=>{let b=ht(o,t);return b.setData(v),c.append(u(b)),b})}})}if(n=="object"){const a=new Set(e.required||[]);let c=Object.entries(s).map(([u,d])=>({key:u,field:ht(d,t),box:bt()}));return i({element:A(c.map(({key:u,field:d,box:h})=>(h.type="checkbox",a.has(u)&&(h.checked=!0,h.disabled=!0),h.oninput=()=>t(),h.onchange=()=>{const v=h.checked||a.has(u);d.element.style.display=v?"":"none",t()},a.has(u)||(d.element.style.display="none"),ee(h,u,":",d.element)))),getData:()=>Object.fromEntries(c.filter(({key:u,field:d})=>a.has(u)||d.element.style.display!=="none").map(({key:u,field:d})=>[u,d.getData()])),setData:u=>{c.forEach(({key:d,field:h,box:v})=>{a.has(d)?h.element.style.display="":(v.checked=!1,h.element.style.display="none")}),Object.entries(u).forEach(([d,h])=>{const v=c.find(b=>b.key===d);v&&(v.field.setData(h),a.has(d)||(v.box.checked=!0,v.field.element.style.display=""))})}})}},Lo="$"+lr("openrouter");let zt=localStorage.getItem(Lo)||"";const qo=async(e,t,r="openai/gpt-4o")=>{zt===""&&await new Promise((o,i)=>{let a=bt(),c=ue(ee("Please enter your OpenRouter API key to use the LLM feature"),a);a.addEventListener("keydown",u=>{u.key=="Enter"&&(zt=a.value,localStorage.setItem(Lo,zt),o(),c.remove())})});const s=await(await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${await zt}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],response_format:{type:"json_schema",json_schema:{name:"response",schema:t}}})})).json();try{let o=JSON.parse(s.choices[0].message.content);return Io(o,t),o}catch{return s}},xr=new Map;let Yu=1;const Xu=e=>(...t)=>new Promise((r,n)=>{const s=Yu++;xr.set(s,{resolve:r,reject:n}),self.postMessage({type:"call",id:s,name:e,args:JSON.stringify(t)})}),Jr=["openrouter","getNote","addNote","callNote","remote"];self.onmessage=async e=>{const t=e.data||{};if(t.type==="response"){const s=xr.get(Number(t.id));if(!s)return;xr.delete(Number(t.id)),t.error?s.reject(t.error):s.resolve(t.result);return}if(t.type!=="run")return;const{code:r,input:n}=t;try{const o=await new Function("input",...Jr,`return (async () => {${r}})()`)(n,...Jr.map(Xu));self.postMessage({type:"run_result",ok:!0,result:o})}catch(s){self.postMessage({type:"run_result",ok:!1,error:String(s)})}};const Wn=async(e,...t)=>{let r=await fe(e);if(r.schemaHash!=de(Rt))throw new Error("can only call Function schema notes");let n=r.data;const s={getNote:fe,addNote:Jn,call:Wn,remote:async(o,i)=>{const a=String(o).replace(/^#/,""),c=/^\d+$/.test(a)?Number(a):await Tt(a),u=i!==void 0?JSON.stringify(i):"null",d=await xn("run_note_async",{id:c,arg:u});try{return JSON.parse(d)}catch{return d}},openrouter:async(o,i)=>(ze(i)&&(i=(await fe(i)).data),qo(o,i)),hash:lr};return n.inputs&&n.inputs.length>0?new Function(...n.inputs,...Object.keys(s),`return (async () => {${n.code}})()`)(...t,...Object.values(s)):new Function("args",...Object.keys(s),`return (async () => {${n.code}})()`)(t.length===1?t[0]:t,...Object.values(s))},Zu={openrouter:async(e,t)=>(ze(t)&&(t=(await fe(t)).data),qo(e,t)),getNote:fe,addNote:Jn,callNote:Wn,remote:async(e,t)=>{const r=String(e).replace(/^#/,""),n=/^\d+$/.test(r)?BigInt(r):await Tt(r),s=await xn("run_note_async",{id:n,arg:JSON.stringify(t)});try{return JSON.parse(s)}catch{return s}}};for(let e of Jr)if(!Object.keys(Zu).includes(e))throw new Error("buildin missing but expected: "+e);const Ps=e=>{const t=tt(L({margin:"0.5em"})),r=/#([a-f0-9]+)/g;let n=0,s;for(;s=r.exec(e);){const o=s.index,i=s[1],a=/^\d+$/.test(i)?Number(i):i;o>n&&t.append(document.createTextNode(e.slice(n,o))),t.append(Bn(a)),n=o+s[0].length}return n<e.length&&t.append(document.createTextNode(e.slice(n))),t},ed=(e,t)=>{const r=A(L({display:"flex",flexDirection:"column",gap:"0.75em"}));return fe(e).then(async n=>{const s=await Tt(e),o=await Ao(e),i=n.data?.title??"",a=n.schemaHash===de(It),c=a?String(n.data.code||""):Qu(n.data);let u=localStorage.getItem("note_view_mode")==="overview";const d=A(L({fontFamily:"monospace",whiteSpace:"pre",marginTop:"1em",overflowX:"auto",paddingBottom:"0.5em"})),h=()=>{d.innerHTML="",u&&!a?Gn(e).then(y=>{d.append(pt(Ps(y)))}):d.append(Ps(c))},v=B(u?"json view":"overview",{onclick:()=>{u=!u,localStorage.setItem("note_view_mode",u?"overview":"json"),v.textContent=u?"json view":"overview",h()}});r.innerHTML="";const b=Gr(`${a?"Script":"Note"} #${s} ${i} `);if(n.schemaHash===de(Mo)){const y=B("run async",{onclick:async()=>{let $=localStorage.getItem("server_fun_arg")??"{}";const m=prompt("args as JSON (array or value)",$);if(localStorage.setItem("server_fun_arg",m),m!=null)try{y.textContent="running...";const f=await xn("run_note_async",{id:s,arg:m});let g=f;try{g=JSON.parse(f)}catch{}if(typeof g=="string")try{g=JSON.parse(g)}catch{}ue(ve("result"),pt(JSON.stringify(g,null,2)))}catch(f){ue(ve("ERROR"),ee(f.message||"run failed"))}finally{y.textContent="run async"}}});b.append(y)}if(n.schemaHash===de(Rt)){const y=B("run local",{onclick:async()=>{const m=n.data.code.includes("args");let f={};if(m){const g='{"a": 1, "b": 2}';let P=localStorage.getItem("local_fun_arg")??g;const E=prompt('args as JSON object (e.g., {"a": 5, "b": 3})',P);if(E==null)return;const N=E.trim();if(!N){ue(ve("ERROR"),ee("Args cannot be empty. Use {} for no arguments."));return}try{f=JSON.parse(N),localStorage.setItem("local_fun_arg",N)}catch(O){ue(ve("ERROR"),ee("Invalid JSON: "+O.message));return}}try{y.textContent="running...";const g=Array.isArray(f)?f:[f],P=await Wn(e,...g);ue(ve("result"),pt(JSON.stringify(P,null,2)))}catch(g){ue(ve("ERROR"),ee(g.message||"run failed"))}finally{y.textContent="run local"}}});b.append(y)}h(),r.append(b,a?"":ee("schema: ",Bn(o)),a?"":A(L({marginBottom:"0.5em"}),v),d,A(L({display:"flex",gap:"0.75em",alignItems:"center",paddingBottom:"0.5em"}),Bt(`/edit?id=${s}`,"edit"),Bt(`/deps/${e}`,"deps"),B("copy",{onclick:y=>navigator.clipboard.writeText(c).then(()=>y.target.textContent="copied").catch($=>ue(ve("ERROR"),ee($.message||"copy failed")))})))}),r},td=({query:e,navigate:t,onRow:r})=>{let n=100;const s="any",o=de(It),i=de(Ro),a=A(),c=A(L({display:"flex",gap:"0.5em",alignItems:"center",flexWrap:"wrap"}),B("any",{onclick:()=>v(s)}),B("function",{onclick:()=>v(de(Rt))}),B("script",{onclick:()=>v(o)}),B("script output",{onclick:()=>v(i)}),Vo(()=>Promise.all([e("select id, data, hash from note where schemaId = 0"),e("select schemaId from note")]).then(([m,f])=>{const g=new Map;return f.rows.forEach(P=>{const E=String(P[0]);g.set(E,(g.get(E)||0)+1)}),m.rows.map(P=>{let E="";try{const O=JSON.parse(String(P[1]??""));E=O?.title?String(O.title):""}catch{}const N=String(P[0]);return{id:N,title:E,hash:String(P[2]??""),count:g.get(N)||0}})}),m=>v(m.hash)));let u=s;const d=()=>e("select id, data, hash from note limit 200").then(m=>m.rows.map(f=>{let g="";try{g=JSON.parse(String(f[1]??""))?.title??""}catch{}return{id:String(f[0]),title:g,hash:String(f[2]??"")}})),h=()=>{d().then(m=>{fr(f=>t(`/${f.id}`),m)})},v=m=>{u=m,b()},b=async()=>{let m=50;a.innerHTML="",a.append(ee("running..."));let f=null;try{const N=await e("select count from note_count");n=Math.max(m,Number(N.rows[0][0]))}catch{}if(u!==s&&(/^\d+$/.test(u)?f=Number(u):f=(await e(`select id from note where hash = '${u}'`)).rows[0]?.[0]??null),u!==s&&f===null){a.innerHTML="",a.append(ee("no matches"));return}const g=`id >= ${n-m} and id < ${n}`,E=`select id, data from note where ${f===null?g:`schemaId = ${f} and ${g}`} limit 50`;e(E).then(N=>{a.innerHTML="";const O=A(L({display:"flex",flexDirection:"column",gap:"0.5em"}));[...N.rows].reverse().forEach(J=>{const F={};N.names.forEach((W,X)=>{F[W]=J[X]}),r&&r(F);let G=String(F.data??"");G=G.replace(/[\n\r]/g,""),G=G.length>60?G.substring(0,60)+"...":G,O.append(Bn(F.id))}),a.append(O)})},y=B("\u{1F50D} Search Notes",{onclick:h,style:{padding:"0.25em 0.5em",border:"1px solid #ccc",borderRadius:"0.25em",background:"inherit",color:"inherit",cursor:"pointer"}});return{root:A(L({display:"flex",flexDirection:"column",gap:"0.75em"}),A(L({display:"flex",gap:"0.5em",flexWrap:"wrap"}),Bt("/edit?new=1",{style:{textDecoration:"none",color:"inherit",fontWeight:"bold",border:"1px solid #ccc",borderRadius:"0.25em",padding:"0.25em 0.5em"}},"+ Add Note"),y),c,a),runQuery:b}},rd=()=>Promise.all([pe("select id, data, hash from note where schemaId = 0"),pe("select schemaId from note")]).then(([e,t])=>{const r=new Map;return t.rows.forEach(n=>r.set(String(n[0]),(r.get(String(n[0]))||0)+1)),e.rows.map(n=>{let s="";try{s=JSON.parse(String(n[1]??""))?.title??""}catch{}const o=String(n[0]);return{id:o,title:s,hash:String(n[2]??""),count:r.get(o)||0}})}),nd=()=>pe("select id, data, hash from note limit 200").then(e=>e.rows.map(t=>{let r="";try{r=JSON.parse(String(t[1]??""))?.title??""}catch{}return{id:String(t[0]),title:r,hash:String(t[2]??"")}})),sd=e=>{let t="";const r=rr({href:"/0",style:{textDecoration:"underline",color:"inherit"}},"view");r.onclick=c=>{c.metaKey||c.ctrlKey||(c.preventDefault(),history.pushState({},"",r.getAttribute("href")||"/"),window.dispatchEvent(new PopStateEvent("popstate")))};const n=pt(),s=()=>Gn(t).then(c=>n.innerHTML=c),o=c=>{c!==t&&(t=c,r.setAttribute("href",`/${c}`),e(c),s())},i=Vo(rd,c=>o(c.hash));return{root:A(L({padding:"1em",marginTop:"0.5em",borderRadius:"1em",border:"1px solid #ccc",background:"var(--background-color)"}),A(L({display:"flex",alignItems:"center",gap:"0.75em",flexWrap:"wrap"}),r,i),A(L({display:"flex",gap:"1em",alignItems:"flex-start"}),A(n))),setSchemaHash:o,getSchemaHash:()=>t}},od=({submit:e})=>{const t=de(It);let r="",n=null;const s=bt("",{placeholder:"script title",style:{display:"none",marginBottom:"0.5em",fontSize:"1.1em",padding:"0.4em 0.6em",color:"inherit",background:"inherit",border:"none",outline:"none",width:"100%"}}),o=Br(L({fontFamily:"monospace",minHeight:"12em",resize:"vertical",background:"inherit",color:"inherit",width:"100%"}));o.rows=10,o.cols=100;const i=document.createElement("p"),a=A(L({display:"none",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)"})),c=()=>r===t,u=()=>c()?{schemaHash:r,text:je({title:s.value,code:o.value})}:{schemaHash:r,text:o.value},d=()=>{o.style.height="auto",o.style.height=`${o.scrollHeight}px`},h=(E,N)=>{i.textContent=E,i.style.color=N};h("valid","green");const v=E=>{if(o.dispatchEvent(new Event("input")),(E.metaKey||E.ctrlKey)&&E.key.toLowerCase()==="s"){E.preventDefault(),g.click();return}if(E.key==="Enter"){E.preventDefault();const W=o.selectionStart||0,X=o.selectionEnd||0,ce=o.value.slice(0,W),ie=o.value.slice(X),Ie=ce.slice(ce.lastIndexOf(`
`)+1),Ae=Ie.match(/^\s*/)?.[0]||"",Je=/[\{\[]\s*$/.test(Ie)?"  ":"";o.value=`${ce}
${Ae}${Je}${ie}`;const Ge=W+1+Ae.length+Je.length;o.setSelectionRange(Ge,Ge);return}const N={"{":"}","[":"]","(":")",'"':'"'};if(E.metaKey||E.ctrlKey||E.altKey||!(E.key in N))return;const O=o.selectionStart||0,C=o.selectionEnd||0;if(O===C&&o.value[O]===N[E.key]){E.preventDefault(),o.setSelectionRange(O+1,O+1);return}if(E.key==='"'&&O===C&&o.value[O-1]==="\\")return;E.preventDefault();const J=o.value.slice(0,O),F=o.value.slice(C),G=o.value.slice(O,C);o.value=`${J}${E.key}${G}${N[E.key]}${F}`,o.setSelectionRange(O+1+G.length,O+1+G.length)};o.onkeydown=v;const b=()=>n?Promise.resolve(n):nd().then(E=>n=E),y=()=>{if(!c()){a.style.display="none";return}const E=o.selectionStart??0,N=o.value,O=N.lastIndexOf("#",E-1);if(O<0){a.style.display="none";return}const C=N.slice(O+1,E);if(!/^[A-Za-z0-9]*$/.test(C)){a.style.display="none";return}b().then(J=>{const F=C.toLowerCase(),G=J.filter(W=>W.id.toLowerCase().includes(F)||W.title.toLowerCase().includes(F)).slice(0,8);if(a.innerHTML="",!G.length){a.style.display="none";return}G.forEach(W=>{a.appendChild(B(`#${W.id}${W.title?`: ${W.title}`:""}`,{onclick:()=>{const X=N.slice(0,O),ce=N.slice(E);o.value=`${X}#${W.id}${ce}`;const ie=O+1+W.id.length;o.setSelectionRange(ie,ie),m(o.value),a.style.display="none"}}))}),a.style.display="block"})},$=async()=>{i.innerText="validating...",i.style.color="#666";try{await Wu({schemaHash:r,data:JSON.parse(u().text)}),h("valid","#2a3")}catch(E){h(E.message||"invalid json","#f66")}},m=E=>{o.value!==E&&(o.value=E),$(),localStorage.setItem("edit_draft",JSON.stringify(u()))},f=E=>{r=E,s.style.display=c()?"block":"none"};o.oninput=()=>{m(o.value),y(),d(),window.location.search.includes("new=1")&&history.replaceState({},"","/edit")};const g=B("format json (cmd+s)",{onclick:()=>{c()||m(je(st(o.value)))}}),P=A(s,o,a,A(L({display:"flex",gap:"0.5em",alignItems:"center"}),g,i),B("push",{onclick:()=>e({schemaHash:r,data:JSON.parse(u().text)})}));return d(),{root:P,setSchemaHash:f,getDraft:u,fill:({schemaHash:E,text:N})=>{if(f(E),c())try{const O=st(N);s.value=O.title??"",o.value=O.code??""}catch{o.value=N}else o.value=N;$(),localStorage.setItem("edit_draft",JSON.stringify(u())),o.focus()}}},ad=({submit:e})=>{let t,r;const n=A(),s=()=>({schemaHash:t,text:je(r.getData())}),o=()=>{localStorage.setItem("edit_draft",JSON.stringify(s()))},i=c=>(t=c,n.innerHTML="",fe(t).then(u=>{r=ht(u.data,o),n.innerHTML="",n.append(r.element,A(L({marginTop:"0.5em"}),B("push",{onclick:()=>e({schemaHash:t,data:r.getData()})})))})),a=c=>{r.setData(st(c)),o()};return{setSchemaHash:i,getDraft:s,fill:({schemaHash:c,text:u})=>i(c).then(()=>a(u)),root:n}},id=e=>{const t=od(e),r=ad(e);let n={plain:t,nice:r}[localStorage.editmode||"nice"]??r;const s=sd(d=>n.setSchemaHash(d));let o;const a=B("niceview",{onclick:()=>{o=n.getDraft(),n=n===r?t:r,n.fill(o),localStorage.editmode=n===r?"nice":"plain",u()}}),c=A(),u=()=>{c.innerHTML="",c.append(a,n.root,s.root)};return u(),{fill:d=>{o=d,s.setSchemaHash(d.schemaHash),n.fill(d)},root:c}},cd=({query:e,onRow:t})=>{const r="dashboard_sql",n=localStorage.getItem(r),s=Br(L({fontFamily:"monospace",padding:".5em"}),n||"select id, data from note limit 50");s.rows=2,s.cols=100,s.onkeydown=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&(d.preventDefault(),a())},s.oninput=()=>{localStorage.setItem(r,s.value)};const o=A(),i=d=>{if(typeof d=="bigint")return d.toString();if(typeof d=="number"){const h=String(d);return h.includes("e")||h.includes("E")?d.toLocaleString("fullwide",{useGrouping:!1}):h}return String(d)},a=()=>{o.innerHTML="",o.append(ee("running...")),e(s.value).then(d=>{o.innerHTML="";const h=xo(L({borderCollapse:"collapse"}),Zn(d.names.map(v=>Go(L({border:"1px solid #ccc",padding:".5em"}),v))),...d.rows.map(v=>{const b={};return d.names.forEach((y,$)=>{b[y]=v[$]}),t&&t(b),Zn(...v.map(y=>{let $=i(y).replace(/[\n\r]/g,"");return $=$.length>20?$.substring(0,20)+"...":$,Jo(L({border:"1px solid #ccc",padding:".5em"}),$)}))}));o.append(h)})},c=A(L({display:"flex",alignItems:"center",gap:"0.5em"}),ee(L({opacity:"0.6",margin:"0"}),"SQL console:"),B("run",{onclick:a,style:{fontSize:"0.85em",padding:"0.2em 0.5em"}}));return{root:A(L({display:"flex",flexDirection:"column",gap:"0.75em"}),Gr("SQL"),c,s,o),runQuery:a}},Pt=(e,t)=>(e.insertAdjacentHTML("beforeend",t),e.lastElementChild),Nt=(e,t)=>{if(t.x>1||t.y>1)return t;const{width:r,height:n}=e.getBoundingClientRect();return{x:t.x*r,y:t.y*n}},Ns=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2,curvature:i=.4}=n,a=Nt(e,t),c=Nt(e,r),u=Math.max(10,Math.abs(c.x-a.x)*i);Pt(e,`<path d="M ${a.x} ${a.y} C ${a.x+u} ${a.y} ${c.x-u} ${c.y} ${c.x} ${c.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const d=10,h=c.x-d,v=c.y-d*.5,b=c.x-d,y=c.y+d*.5;return Pt(e,`<path d="M ${c.x} ${c.y} L ${h} ${v} M ${c.x} ${c.y} L ${b} ${y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},ld=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2}=n,i=Nt(e,t),a=Nt(e,r);Pt(e,`<path d="M ${i.x} ${i.y} L ${a.x} ${a.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const c=10,u=a.x-c*.5,d=a.y-c,h=a.x+c*.5,v=a.y-c;return Pt(e,`<path d="M ${a.x} ${a.y} L ${u} ${d} M ${a.x} ${a.y} L ${h} ${v}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},ks=(e,t,r)=>{const s=Nt(e,t),o=Pt(e,`<g><text x="${s.x}" y="${s.y}" dominant-baseline="middle" text-anchor="middle" fill="var(--color)" font-size="14" cursor="pointer" font-family="sans-serif">${r}</text></g>`),i=o?.querySelector("text"),a=5,u=i.getBBox().height+a*2,d=s.x-220/2,h=s.y-u/2;return o.insertAdjacentHTML("afterbegin",`<rect x="${d}" y="${h}" width="${220}" height="${u}" rx="2" ry="2" fill="var(--background-color)" cursor="pointer" stroke="var(--color)" stroke-width="2"></rect>`),{node:o,rect:{x:d,y:h,width:220,height:u}}},ud=(e,t,r=10)=>{const n=[],s=[];e.forEach(i=>{const a=Number(i[0]),c=i[1]||[];c.some(u=>Number(u)===Number(t))&&n.push(a),a===Number(t)&&s.push(...c)});const o=i=>[...new Set(i)];return{currentId:t,inputs:o(n).slice(0,r),outputs:o(s).slice(0,r)}},dd=({query:e,navigate:t})=>{const r=A(L({display:"flex",flexDirection:"column",gap:"0.75em"})),n=A(L({width:"100%",minHeight:"320px"})),s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=pt();s.setAttribute("width","100%"),s.setAttribute("height","320"),n.append(s,o);const i=()=>Promise.all([pe("select id, data, hash from note where schemaId = 0"),pe("select schemaId from note")]).then(([c,u])=>{const d=new Map;return u.rows.forEach(h=>{const v=String(h[0]);d.set(v,(d.get(v)||0)+1)}),c.rows.map(h=>{let v="";try{const y=JSON.parse(String(h[1]??""));v=y?.title?String(y.title):""}catch{}const b=String(h[0]);return{id:b,title:v,hash:String(h[2]??""),count:d.get(b)||0}})});r.append(Gr("Dependencies"),n);const a=async c=>{if(s.innerHTML="",!c){i().then(O=>fr(C=>{window.history.pushState({},"",`/deps/${C.id}`),a(C.id)},O));return}const u=await Tt(c),d=await Ao(c),h=await e("select to, from from links"),v=ud(h.rows,u);v.inputs=v.inputs.filter(O=>O!=d);const b=[{ids:v.inputs,x:.2},{ids:[v.currentId],x:.5},{ids:v.outputs,x:.8}],y=new Map;await Promise.all(b.flatMap(O=>O.ids.map(async C=>{const J=await Ur(C).then(F=>F.slice(0,15)).catch(()=>`#${C}`);y.set(C,J)})));const $=await Ur(d).then(O=>O.slice(0,15)).catch(()=>`#${d}`);y.set(d,$);const m=new Map;b.forEach(({ids:O,x:C})=>{const J=Math.max(O.length,1);O.forEach((F,G)=>{const W=J===1?.5:.2+.6*(G+.5)/J,X=ks(s,{x:C,y:W},y.get(F)||`#${F}`);X.node.onclick=()=>{F===v.currentId?(window.history.pushState({},"",`/${F}`),t(`/${F}`)):(window.history.pushState({},"",`/deps/${F}`),a(F))},m.set(F,X.rect)})});const f=ks(s,{x:.5,y:.1},y.get(d)||`#${d}`);f.node.onclick=()=>{window.history.pushState({},"",`/deps/${d}`),a(d)};const g=f.rect,P=(O,C)=>({x:C==="left"?O.x:O.x+O.width,y:O.y+O.height/2}),E=(O,C)=>({x:O.x+O.width/2,y:C==="top"?O.y:O.y+O.height}),N=m.get(v.currentId);N&&(v.inputs.forEach(O=>{const C=m.get(O);C&&Ns(s,P(C,"right"),P(N,"left"))}),v.outputs.forEach(O=>{const C=m.get(O);C&&Ns(s,P(N,"right"),P(C,"left"))}),g&&ld(s,E(g,"bottom"),E(N,"top"))),Gn(v.currentId).then(O=>{o.innerHTML=O})};return{root:r,render:a}};let Ho=()=>{},Gt=null,wt=null,Os=null,hr=()=>{};const zo=document.body,Xe=e=>wt&&(wt.innerHTML="",wt.appendChild(e)),Mt=e=>(history.pushState({},"",e),hr()),fd=async e=>{try{const t=await Jn(e.schemaHash,e.data),r=typeof t=="string"?t.slice(1):String(await Et(t));Mt(`/${r}`)}catch(t){ue(ve("ERROR"),ee(t.message||"failed to add note"))}},js=e=>Xe(ed(e)),hd=e=>e?e.startsWith("deps/")?"/deps":`/${e}`:"/";hr=()=>{const e=window.location.pathname.replace(/^\/+/,"");if(console.log(e),Fo.forEach(t=>{t.style.setProperty("opacity",t.pathname===hd(e)?"1":"0.5")}),e==="edit"){Xe(Ko.root);const t=new URLSearchParams(window.location.search),r=t.get("id");if(t.get("new")==="1"&&localStorage.removeItem("edit_draft"),r===null){const s=localStorage.getItem("edit_draft");if(s&&s!==Os){Os=s;try{const o=JSON.parse(s);Gt(o)}catch{}}else Et(0).then(o=>Gt({schemaHash:o,text:"{}"})).catch(()=>{})}else fe(Number(r)).then(s=>Gt({schemaHash:s.schemaHash,text:je(s.data)})).catch(s=>ue(ve("ERROR"),ee(s.message)));window.location.search&&history.replaceState({},"","/edit")}else e?e==="sql"?Xe(md.root):e.startsWith("deps")?(Xe(Is.root),Is.render(e.slice(5)||Cr)):Number.isFinite(Number(e))?Et(Number(e)).then(t=>{Cr=String(t),js(t)}):(Cr=e,js(e)):(Xe(Qn.root),Ho())};const pd=L({padding:"1.5em",margin:".5em",borderRadius:"1em",background:"var(--background-color)",color:"var(--color)",border:"1px solid #ccc"});let Cr=null,Fo=[["Dashboard","/"],["Edit","/edit"],["SQL","/sql"],["Deps","/deps"]].map(([e,t])=>rr(L({textDecoration:"none",color:"inherit",fontWeight:"bold"}),{href:t,onclick:r=>{r.metaKey||(r.preventDefault(),Mt(t))}},e));zo.appendChild(A(L({display:"flex",flexDirection:"column",gap:"0.75em",padding:"1em"}),rr(L({textDecoration:"none",color:"inherit"}),ve("Json View"),{href:"/",onclick:e=>{e.preventDefault(),Mt("/")}}),A(L({display:"flex",gap:"1em"}),Fo)));const Qn=td({query:pe,navigate:Mt}),Ko=id({submit:fd});Gt=Ko.fill;const md=cd({query:pe}),Is=dd({query:pe,navigate:Mt});wt=A(pd);zo.appendChild(wt);Ho=Qn.runQuery;Xe(Qn.root);hr();window.addEventListener("popstate",hr);
