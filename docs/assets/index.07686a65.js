(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const Or=(e,t,r="",n)=>{const s=document.createElement(e);return s.innerText=t,n&&Object.entries(n).forEach(([o,i])=>{o==="parent"&&i.appendChild(s),o==="children"?i.forEach(a=>s.appendChild(a)):o==="eventListeners"?Object.entries(i).forEach(([a,c])=>{s.addEventListener(a,c)}):o==="color"||o==="background"?s.style[o]=i:o==="style"?Object.entries(i).forEach(([a,c])=>{a=a.replace(/([A-Z])/g,"-$1").toLowerCase(),s.style.setProperty(a,c)}):o==="class"?s.classList.add(...i.split(".").filter(a=>a)):o.startsWith("data-")?s.setAttribute(o,i):s[o]=i}),s},Rs=(e,...t)=>{let r=[],n={};const s=o=>{if(typeof o=="string")r.push(Or("span",o));else if(typeof o=="number")r.push(Or("span",o.toString()));else if(o instanceof Promise){const i=tt();o.then(a=>{i.innerHTML="",i.appendChild(tt(a))}),r.push(i)}else o instanceof HTMLElement?r.push(o):o instanceof Array?o.forEach(s):n={...n,...o}};for(let o of t)s(o);return Or(e,"","",{...n,children:r})},me=e=>(...t)=>Rs(e,...t),Z=me("p"),ve=me("h2"),Gr=me("h3"),A=me("div"),pt=me("pre"),G=me("button"),rr=me("a"),Bt=(e,t=null,...r)=>rr(t??e,{href:e,onclick:n=>{n.metaKey||n.ctrlKey||(n.preventDefault(),history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate")))},style:{color:"inherit",textDecoration:"none",border:"1px solid #ccc",padding:"0.1em",borderRadius:"0.25em"}},...r),tt=me("span"),xo=me("table"),Zn=me("tr"),Jo=me("td"),Go=me("th"),L=(...e)=>({style:Object.assign({},...e)}),Ts=(e,t)=>{const r=t.filter(s=>typeof s=="string").join(" "),n=Rs(e,...t);return n.value=r,n},bt=(...e)=>Ts("input",e),Br=(...e)=>Ts("textarea",e),ue=(...e)=>{const t=A({style:{background:"var(--background-color)",color:"var(--color)",padding:"1em",paddingBottom:"2em",borderRadius:"1em",zIndex:"2000",overflowY:"scroll"}},...e),r=A({style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(166, 166, 166, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2000"}});r.appendChild(t),document.body.appendChild(r);const n=()=>{r.remove(),document.removeEventListener("keydown",s)},s=o=>{o.key==="Escape"&&n()};return r.onclick=n,document.addEventListener("keydown",s),t.onclick=o=>{o.stopPropagation()},r};function Bo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dr={exports:{}},Ms={},_e={},rt={},kt={},H={},St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(_){if(super(),!e.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((P,S)=>`${P}${S}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((P,S)=>(S instanceof r&&(P[S.str]=(P[S.str]||0)+1),P),{})}}e._Code=n,e.nil=new n("");function s(h,..._){const P=[h[0]];let S=0;for(;S<_.length;)a(P,_[S]),P.push(h[++S]);return new n(P)}e._=s;const o=new n("+");function i(h,..._){const P=[b(h[0])];let S=0;for(;S<_.length;)P.push(o),a(P,_[S]),P.push(o,b(h[++S]));return c(P),new n(P)}e.str=i;function a(h,_){_ instanceof n?h.push(..._._items):_ instanceof r?h.push(_):h.push(f(_))}e.addCodeArg=a;function c(h){let _=1;for(;_<h.length-1;){if(h[_]===o){const P=u(h[_-1],h[_+1]);if(P!==void 0){h.splice(_-1,3,P);continue}h[_++]="+"}_++}}function u(h,_){if(_==='""')return h;if(h==='""')return _;if(typeof h=="string")return _ instanceof r||h[h.length-1]!=='"'?void 0:typeof _!="string"?`${h.slice(0,-1)}${_}"`:_[0]==='"'?h.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(h instanceof r))return`"${h}${_.slice(1)}`}function d(h,_){return _.emptyStr()?h:h.emptyStr()?_:i`${h}${_}`}e.strConcat=d;function f(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:b(Array.isArray(h)?h.join(","):h)}function v(h){return new n(b(h))}e.stringify=v;function b(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=b;function m(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new n(`.${h}`):s`[${h}]`}e.getProperty=m;function g(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new n(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=g;function y(h){return new n(h.toString())}e.regexpCode=y})(St);var Ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=St;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,f;if(((f=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||f===void 0?void 0:f.has(u))||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=s;class o extends t.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:f}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(d)}[${f}]`}}e.ValueScopeName=o;const i=(0,t._)`\n`;class a extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:t.nil}}get(){return this._scope}name(u){return new o(u,this._newName(u))}value(u,d){var f;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const v=this.toName(u),{prefix:b}=v,m=(f=d.key)!==null&&f!==void 0?f:d.ref;let g=this._values[b];if(g){const _=g.get(m);if(_)return _}else g=this._values[b]=new Map;g.set(m,v);const y=this._scope[b]||(this._scope[b]=[]),h=y.length;return y[h]=d.ref,v.setValue(d,{property:b,itemIndex:h}),v}getValue(u,d){const f=this._values[u];if(!!f)return f.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${u}${f.scopePath}`})}scopeCode(u=this._values,d,f){return this._reduceValues(u,v=>{if(v.value===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return v.value.code},d,f)}_reduceValues(u,d,f={},v){let b=t.nil;for(const m in u){const g=u[m];if(!g)continue;const y=f[m]=f[m]||new Map;g.forEach(h=>{if(y.has(h))return;y.set(h,n.Started);let _=d(h);if(_){const P=this.opts.es5?e.varKinds.var:e.varKinds.const;b=(0,t._)`${b}${P} ${h} = ${_};${this.opts._n}`}else if(_=v?.(h))b=(0,t._)`${b}${_}${this.opts._n}`;else throw new r(h);y.set(h,n.Completed)})}return b}}e.ValueScope=a})(Ar);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=St,r=Ar;var n=St;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Ar;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,p){return this}}class i extends o{constructor(l,p,E){super(),this.varKind=l,this.name=p,this.rhs=E}render({es5:l,_n:p}){const E=l?r.varKinds.var:this.varKind,M=this.rhs===void 0?"":` = ${this.rhs}`;return`${E} ${this.name}${M};`+p}optimizeNames(l,p){if(!!l[this.name.str])return this.rhs&&(this.rhs=ie(this.rhs,l,p)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(l,p,E){super(),this.lhs=l,this.rhs=p,this.sideEffects=E}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,p){if(!(this.lhs instanceof t.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=ie(this.rhs,l,p),this}get names(){const l=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ce(l,this.rhs)}}class c extends a{constructor(l,p,E,M){super(l,E,M),this.op=p}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class f extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class v extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,p){return this.code=ie(this.code,l,p),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class b extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((p,E)=>p+E.render(l),"")}optimizeNodes(){const{nodes:l}=this;let p=l.length;for(;p--;){const E=l[p].optimizeNodes();Array.isArray(E)?l.splice(p,1,...E):E?l[p]=E:l.splice(p,1)}return l.length>0?this:void 0}optimizeNames(l,p){const{nodes:E}=this;let M=E.length;for(;M--;){const C=E[M];C.optimizeNames(l,p)||(Ie(l,C.names),E.splice(M,1))}return E.length>0?this:void 0}get names(){return this.nodes.reduce((l,p)=>re(l,p.names),{})}}class m extends b{render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class g extends b{}class y extends m{}y.kind="else";class h extends m{constructor(l,p){super(p),this.condition=l}render(l){let p=`if(${this.condition})`+super.render(l);return this.else&&(p+="else "+this.else.render(l)),p}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let p=this.else;if(p){const E=p.optimizeNodes();p=this.else=Array.isArray(E)?new y(E):E}if(p)return l===!1?p instanceof h?p:p.nodes:this.nodes.length?this:new h(Ae(l),p instanceof h?[p]:p.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,p){var E;if(this.else=(E=this.else)===null||E===void 0?void 0:E.optimizeNames(l,p),!!(super.optimizeNames(l,p)||this.else))return this.condition=ie(this.condition,l,p),this}get names(){const l=super.names;return ce(l,this.condition),this.else&&re(l,this.else.names),l}}h.kind="if";class _ extends m{}_.kind="for";class P extends _{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,p){if(!!super.optimizeNames(l,p))return this.iteration=ie(this.iteration,l,p),this}get names(){return re(super.names,this.iteration.names)}}class S extends _{constructor(l,p,E,M){super(),this.varKind=l,this.name=p,this.from=E,this.to=M}render(l){const p=l.es5?r.varKinds.var:this.varKind,{name:E,from:M,to:C}=this;return`for(${p} ${E}=${M}; ${E}<${C}; ${E}++)`+super.render(l)}get names(){const l=ce(super.names,this.from);return ce(l,this.to)}}class N extends _{constructor(l,p,E,M){super(),this.loop=l,this.varKind=p,this.name=E,this.iterable=M}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,p){if(!!super.optimizeNames(l,p))return this.iterable=ie(this.iterable,l,p),this}get names(){return re(super.names,this.iterable.names)}}class O extends m{constructor(l,p,E){super(),this.name=l,this.args=p,this.async=E}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}O.kind="func";class R extends b{render(l){return"return "+super.render(l)}}R.kind="return";class x extends m{render(l){let p="try"+super.render(l);return this.catch&&(p+=this.catch.render(l)),this.finally&&(p+=this.finally.render(l)),p}optimizeNodes(){var l,p;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(p=this.finally)===null||p===void 0||p.optimizeNodes(),this}optimizeNames(l,p){var E,M;return super.optimizeNames(l,p),(E=this.catch)===null||E===void 0||E.optimizeNames(l,p),(M=this.finally)===null||M===void 0||M.optimizeNames(l,p),this}get names(){const l=super.names;return this.catch&&re(l,this.catch.names),this.finally&&re(l,this.finally.names),l}}class F extends m{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}F.kind="catch";class W extends m{render(l){return"finally"+super.render(l)}}W.kind="finally";class Q{constructor(l,p={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...p,_n:p.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,p){const E=this._extScope.value(l,p);return(this._values[E.prefix]||(this._values[E.prefix]=new Set)).add(E),E}getScopeValue(l,p){return this._extScope.getValue(l,p)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,p,E,M){const C=this._scope.toName(p);return E!==void 0&&M&&(this._constants[C.str]=E),this._leafNode(new i(l,C,E)),C}const(l,p,E){return this._def(r.varKinds.const,l,p,E)}let(l,p,E){return this._def(r.varKinds.let,l,p,E)}var(l,p,E){return this._def(r.varKinds.var,l,p,E)}assign(l,p,E){return this._leafNode(new a(l,p,E))}add(l,p){return this._leafNode(new c(l,e.operators.ADD,p))}code(l){return typeof l=="function"?l():l!==t.nil&&this._leafNode(new v(l)),this}object(...l){const p=["{"];for(const[E,M]of l)p.length>1&&p.push(","),p.push(E),(E!==M||this.opts.es5)&&(p.push(":"),(0,t.addCodeArg)(p,M));return p.push("}"),new t._Code(p)}if(l,p,E){if(this._blockNode(new h(l)),p&&E)this.code(p).else().code(E).endIf();else if(p)this.code(p).endIf();else if(E)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new h(l))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(h,y)}_for(l,p){return this._blockNode(l),p&&this.code(p).endFor(),this}for(l,p){return this._for(new P(l),p)}forRange(l,p,E,M,C=this.opts.es5?r.varKinds.var:r.varKinds.let){const K=this._scope.toName(l);return this._for(new S(C,K,p,E),()=>M(K))}forOf(l,p,E,M=r.varKinds.const){const C=this._scope.toName(l);if(this.opts.es5){const K=p instanceof t.Name?p:this.var("_arr",p);return this.forRange("_i",0,(0,t._)`${K}.length`,z=>{this.var(C,(0,t._)`${K}[${z}]`),E(C)})}return this._for(new N("of",M,C,p),()=>E(C))}forIn(l,p,E,M=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,t._)`Object.keys(${p})`,E);const C=this._scope.toName(l);return this._for(new N("in",M,C,p),()=>E(C))}endFor(){return this._endBlockNode(_)}label(l){return this._leafNode(new u(l))}break(l){return this._leafNode(new d(l))}return(l){const p=new R;if(this._blockNode(p),this.code(l),p.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(l,p,E){if(!p&&!E)throw new Error('CodeGen: "try" without "catch" and "finally"');const M=new x;if(this._blockNode(M),this.code(l),p){const C=this.name("e");this._currNode=M.catch=new F(C),p(C)}return E&&(this._currNode=M.finally=new W,this.code(E)),this._endBlockNode(F,W)}throw(l){return this._leafNode(new f(l))}block(l,p){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(p),this}endBlock(l){const p=this._blockStarts.pop();if(p===void 0)throw new Error("CodeGen: not in self-balancing block");const E=this._nodes.length-p;if(E<0||l!==void 0&&E!==l)throw new Error(`CodeGen: wrong number of nodes: ${E} vs ${l} expected`);return this._nodes.length=p,this}func(l,p=t.nil,E,M){return this._blockNode(new O(l,p,E)),M&&this.code(M).endFunc(),this}endFunc(){return this._endBlockNode(O)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,p){const E=this._currNode;if(E instanceof l||p&&E instanceof p)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${p?`${l.kind}/${p.kind}`:l.kind}"`)}_elseNode(l){const p=this._currNode;if(!(p instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=p.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const p=this._nodes;p[p.length-1]=l}}e.CodeGen=Q;function re(w,l){for(const p in l)w[p]=(w[p]||0)+(l[p]||0);return w}function ce(w,l){return l instanceof t._CodeOrName?re(w,l.names):w}function ie(w,l,p){if(w instanceof t.Name)return E(w);if(!M(w))return w;return new t._Code(w._items.reduce((C,K)=>(K instanceof t.Name&&(K=E(K)),K instanceof t._Code?C.push(...K._items):C.push(K),C),[]));function E(C){const K=p[C.str];return K===void 0||l[C.str]!==1?C:(delete l[C.str],K)}function M(C){return C instanceof t._Code&&C._items.some(K=>K instanceof t.Name&&l[K.str]===1&&p[K.str]!==void 0)}}function Ie(w,l){for(const p in l)w[p]=(w[p]||0)-(l[p]||0)}function Ae(w){return typeof w=="boolean"||typeof w=="number"||w===null?!w:(0,t._)`!${k(w)}`}e.not=Ae;const Je=$(e.operators.AND);function Ge(...w){return w.reduce(Je)}e.and=Ge;const Ct=$(e.operators.OR);function j(...w){return w.reduce(Ct)}e.or=j;function $(w){return(l,p)=>l===t.nil?p:p===t.nil?l:(0,t._)`${k(l)} ${w} ${k(p)}`}function k(w){return w instanceof t.Name?w:(0,t._)`(${w})`}})(H);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;const U=H,Wo=St;function Qo(e){const t={};for(const r of e)t[r]=!0;return t}I.toHash=Qo;function Yo(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Cs(e,t),!Ds(t,e.self.RULES.all))}I.alwaysValidSchema=Yo;function Cs(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Ls(e,`unknown keyword: "${o}"`)}I.checkUnknownRules=Cs;function Ds(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}I.schemaHasRules=Ds;function Xo(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}I.schemaHasRulesButRef=Xo;function Zo({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,U._)`${r}`}return(0,U._)`${e}${t}${(0,U.getProperty)(n)}`}I.schemaRefOrVal=Zo;function ea(e){return As(decodeURIComponent(e))}I.unescapeFragment=ea;function ta(e){return encodeURIComponent(Wr(e))}I.escapeFragment=ta;function Wr(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=Wr;function As(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=As;function ra(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}I.eachItem=ra;function es({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,i,a)=>{const c=i===void 0?o:i instanceof U.Name?(o instanceof U.Name?e(s,o,i):t(s,o,i),i):o instanceof U.Name?(t(s,i,o),o):r(o,i);return a===U.Name&&!(c instanceof U.Name)?n(s,c):c}}I.mergeEvaluated={props:es({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,U._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,U._)`${r} || {}`).code((0,U._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,U._)`${r} || {}`),Qr(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Vs}),items:es({mergeNames:(e,t,r)=>e.if((0,U._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,U._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,U._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,U._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Vs(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,U._)`{}`);return t!==void 0&&Qr(e,r,t),r}I.evaluatedPropsToName=Vs;function Qr(e,t,r){Object.keys(r).forEach(n=>e.assign((0,U._)`${t}${(0,U.getProperty)(n)}`,!0))}I.setEvaluated=Qr;const ts={};function na(e,t){return e.scopeValue("func",{ref:t,code:ts[t.code]||(ts[t.code]=new Wo._Code(t.code))})}I.useFunc=na;var Vr;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Vr||(I.Type=Vr={}));function sa(e,t,r){if(e instanceof U.Name){const n=t===Vr.Num;return r?n?(0,U._)`"[" + ${e} + "]"`:(0,U._)`"['" + ${e} + "']"`:n?(0,U._)`"/" + ${e}`:(0,U._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,U.getProperty)(e).toString():"/"+Wr(e)}I.getErrorPath=sa;function Ls(e,t,r=e.opts.strictSchema){if(!!r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}I.checkStrictMode=Ls;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});const ne=H,oa={data:new ne.Name("data"),valCxt:new ne.Name("valCxt"),instancePath:new ne.Name("instancePath"),parentData:new ne.Name("parentData"),parentDataProperty:new ne.Name("parentDataProperty"),rootData:new ne.Name("rootData"),dynamicAnchors:new ne.Name("dynamicAnchors"),vErrors:new ne.Name("vErrors"),errors:new ne.Name("errors"),this:new ne.Name("this"),self:new ne.Name("self"),scope:new ne.Name("scope"),json:new ne.Name("json"),jsonPos:new ne.Name("jsonPos"),jsonLen:new ne.Name("jsonLen"),jsonPart:new ne.Name("jsonPart")};Pe.default=oa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=H,r=I,n=Pe;e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:h})=>h?(0,t.str)`"${y}" keyword must be ${h} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function s(y,h=e.keywordError,_,P){const{it:S}=y,{gen:N,compositeRule:O,allErrors:R}=S,x=f(y,h,_);P??(O||R)?c(N,x):u(S,(0,t._)`[${x}]`)}e.reportError=s;function o(y,h=e.keywordError,_){const{it:P}=y,{gen:S,compositeRule:N,allErrors:O}=P,R=f(y,h,_);c(S,R),N||O||u(P,n.default.vErrors)}e.reportExtraError=o;function i(y,h){y.assign(n.default.errors,h),y.if((0,t._)`${n.default.vErrors} !== null`,()=>y.if(h,()=>y.assign((0,t._)`${n.default.vErrors}.length`,h),()=>y.assign(n.default.vErrors,null)))}e.resetErrorsCount=i;function a({gen:y,keyword:h,schemaValue:_,data:P,errsCount:S,it:N}){if(S===void 0)throw new Error("ajv implementation error");const O=y.name("err");y.forRange("i",S,n.default.errors,R=>{y.const(O,(0,t._)`${n.default.vErrors}[${R}]`),y.if((0,t._)`${O}.instancePath === undefined`,()=>y.assign((0,t._)`${O}.instancePath`,(0,t.strConcat)(n.default.instancePath,N.errorPath))),y.assign((0,t._)`${O}.schemaPath`,(0,t.str)`${N.errSchemaPath}/${h}`),N.opts.verbose&&(y.assign((0,t._)`${O}.schema`,_),y.assign((0,t._)`${O}.data`,P))})}e.extendErrors=a;function c(y,h){const _=y.const("err",h);y.if((0,t._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,t._)`[${_}]`),(0,t._)`${n.default.vErrors}.push(${_})`),y.code((0,t._)`${n.default.errors}++`)}function u(y,h){const{gen:_,validateName:P,schemaEnv:S}=y;S.$async?_.throw((0,t._)`new ${y.ValidationError}(${h})`):(_.assign((0,t._)`${P}.errors`,h),_.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(y,h,_){const{createErrors:P}=y.it;return P===!1?(0,t._)`{}`:v(y,h,_)}function v(y,h,_={}){const{gen:P,it:S}=y,N=[b(S,_),m(y,_)];return g(y,h,N),P.object(...N)}function b({errorPath:y},{instancePath:h}){const _=h?(0,t.str)`${y}${(0,r.getErrorPath)(h,r.Type.Str)}`:y;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,_)]}function m({keyword:y,it:{errSchemaPath:h}},{schemaPath:_,parentSchema:P}){let S=P?h:(0,t.str)`${h}/${y}`;return _&&(S=(0,t.str)`${S}${(0,r.getErrorPath)(_,r.Type.Str)}`),[d.schemaPath,S]}function g(y,{params:h,message:_},P){const{keyword:S,data:N,schemaValue:O,it:R}=y,{opts:x,propertyName:F,topSchemaRef:W,schemaPath:Q}=R;P.push([d.keyword,S],[d.params,typeof h=="function"?h(y):h||(0,t._)`{}`]),x.messages&&P.push([d.message,typeof _=="function"?_(y):_]),x.verbose&&P.push([d.schema,O],[d.parentSchema,(0,t._)`${W}${Q}`],[n.default.data,N]),F&&P.push([d.propertyName,F])}})(kt);Object.defineProperty(rt,"__esModule",{value:!0});rt.boolOrEmptySchema=rt.topBoolOrEmptySchema=void 0;const aa=kt,ia=H,ca=Pe,la={message:"boolean schema is false"};function ua(e){const{gen:t,schema:r,validateName:n}=e;r===!1?qs(e,!1):typeof r=="object"&&r.$async===!0?t.return(ca.default.data):(t.assign((0,ia._)`${n}.errors`,null),t.return(!0))}rt.topBoolOrEmptySchema=ua;function da(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),qs(e)):r.var(t,!0)}rt.boolOrEmptySchema=da;function qs(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,aa.reportError)(s,la,void 0,t)}var Y={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.getRules=Ke.isJSONType=void 0;const fa=["string","number","integer","boolean","null","object","array"],ha=new Set(fa);function pa(e){return typeof e=="string"&&ha.has(e)}Ke.isJSONType=pa;function ma(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ke.getRules=ma;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.shouldUseRule=Ne.shouldUseGroup=Ne.schemaHasRulesForType=void 0;function ya({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Hs(e,n)}Ne.schemaHasRulesForType=ya;function Hs(e,t){return t.rules.some(r=>zs(e,r))}Ne.shouldUseGroup=Hs;function zs(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ne.shouldUseRule=zs;Object.defineProperty(Y,"__esModule",{value:!0});Y.reportTypeError=Y.checkDataTypes=Y.checkDataType=Y.coerceAndCheckDataType=Y.getJSONTypes=Y.getSchemaTypes=Y.DataType=void 0;const ga=Ke,$a=Ne,_a=kt,V=H,Fs=I;var Ze;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ze||(Y.DataType=Ze={}));function va(e){const t=Ks(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Y.getSchemaTypes=va;function Ks(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ga.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Y.getJSONTypes=Ks;function wa(e,t){const{gen:r,data:n,opts:s}=e,o=ba(t,s.coerceTypes),i=t.length>0&&!(o.length===0&&t.length===1&&(0,$a.schemaHasRulesForType)(e,t[0]));if(i){const a=Yr(t,n,s.strictNumbers,Ze.Wrong);r.if(a,()=>{o.length?Sa(e,t,o):Xr(e)})}return i}Y.coerceAndCheckDataType=wa;const Us=new Set(["string","number","integer","boolean","null"]);function ba(e,t){return t?e.filter(r=>Us.has(r)||t==="array"&&r==="array"):[]}function Sa(e,t,r){const{gen:n,data:s,opts:o}=e,i=n.let("dataType",(0,V._)`typeof ${s}`),a=n.let("coerced",(0,V._)`undefined`);o.coerceTypes==="array"&&n.if((0,V._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,V._)`${s}[0]`).assign(i,(0,V._)`typeof ${s}`).if(Yr(t,s,o.strictNumbers),()=>n.assign(a,s))),n.if((0,V._)`${a} !== undefined`);for(const u of r)(Us.has(u)||u==="array"&&o.coerceTypes==="array")&&c(u);n.else(),Xr(e),n.endIf(),n.if((0,V._)`${a} !== undefined`,()=>{n.assign(s,a),Ea(e,a)});function c(u){switch(u){case"string":n.elseIf((0,V._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,V._)`"" + ${s}`).elseIf((0,V._)`${s} === null`).assign(a,(0,V._)`""`);return;case"number":n.elseIf((0,V._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,V._)`+${s}`);return;case"integer":n.elseIf((0,V._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,V._)`+${s}`);return;case"boolean":n.elseIf((0,V._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,V._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,V._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,V._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(a,(0,V._)`[${s}]`)}}}function Ea({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,V._)`${t} !== undefined`,()=>e.assign((0,V._)`${t}[${r}]`,n))}function Lr(e,t,r,n=Ze.Correct){const s=n===Ze.Correct?V.operators.EQ:V.operators.NEQ;let o;switch(e){case"null":return(0,V._)`${t} ${s} null`;case"array":o=(0,V._)`Array.isArray(${t})`;break;case"object":o=(0,V._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=i((0,V._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=i();break;default:return(0,V._)`typeof ${t} ${s} ${e}`}return n===Ze.Correct?o:(0,V.not)(o);function i(a=V.nil){return(0,V.and)((0,V._)`typeof ${t} == "number"`,a,r?(0,V._)`isFinite(${t})`:V.nil)}}Y.checkDataType=Lr;function Yr(e,t,r,n){if(e.length===1)return Lr(e[0],t,r,n);let s;const o=(0,Fs.toHash)(e);if(o.array&&o.object){const i=(0,V._)`typeof ${t} != "object"`;s=o.null?i:(0,V._)`!${t} || ${i}`,delete o.null,delete o.array,delete o.object}else s=V.nil;o.number&&delete o.integer;for(const i in o)s=(0,V.and)(s,Lr(i,t,r,n));return s}Y.checkDataTypes=Yr;const Pa={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,V._)`{type: ${e}}`:(0,V._)`{type: ${t}}`};function Xr(e){const t=Na(e);(0,_a.reportError)(t,Pa)}Y.reportTypeError=Xr;function Na(e){const{gen:t,data:r,schema:n}=e,s=(0,Fs.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.assignDefaults=void 0;const We=H,ka=I;function Oa(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)rs(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>rs(e,o,s.default))}nr.assignDefaults=Oa;function rs(e,t,r){const{gen:n,compositeRule:s,data:o,opts:i}=e;if(r===void 0)return;const a=(0,We._)`${o}${(0,We.getProperty)(t)}`;if(s){(0,ka.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,We._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,We._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,We._)`${a} = ${(0,We.stringify)(r)}`)}var be={},q={};Object.defineProperty(q,"__esModule",{value:!0});q.validateUnion=q.validateArray=q.usePattern=q.callValidateCode=q.schemaProperties=q.allSchemaProperties=q.noPropertyInData=q.propertyInData=q.isOwnProperty=q.hasPropFunc=q.reportMissingProp=q.checkMissingProp=q.checkReportMissingProp=void 0;const J=H,Zr=I,Re=Pe,ja=I;function Ia(e,t){const{gen:r,data:n,it:s}=e;r.if(tn(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,J._)`${t}`},!0),e.error()})}q.checkReportMissingProp=Ia;function Ra({gen:e,data:t,it:{opts:r}},n,s){return(0,J.or)(...n.map(o=>(0,J.and)(tn(e,t,o,r.ownProperties),(0,J._)`${s} = ${o}`)))}q.checkMissingProp=Ra;function Ta(e,t){e.setParams({missingProperty:t},!0),e.error()}q.reportMissingProp=Ta;function xs(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,J._)`Object.prototype.hasOwnProperty`})}q.hasPropFunc=xs;function en(e,t,r){return(0,J._)`${xs(e)}.call(${t}, ${r})`}q.isOwnProperty=en;function Ma(e,t,r,n){const s=(0,J._)`${t}${(0,J.getProperty)(r)} !== undefined`;return n?(0,J._)`${s} && ${en(e,t,r)}`:s}q.propertyInData=Ma;function tn(e,t,r,n){const s=(0,J._)`${t}${(0,J.getProperty)(r)} === undefined`;return n?(0,J.or)(s,(0,J.not)(en(e,t,r))):s}q.noPropertyInData=tn;function Js(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}q.allSchemaProperties=Js;function Ca(e,t){return Js(t).filter(r=>!(0,Zr.alwaysValidSchema)(e,t[r]))}q.schemaProperties=Ca;function Da({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:i},a,c,u){const d=u?(0,J._)`${e}, ${t}, ${n}${s}`:t,f=[[Re.default.instancePath,(0,J.strConcat)(Re.default.instancePath,o)],[Re.default.parentData,i.parentData],[Re.default.parentDataProperty,i.parentDataProperty],[Re.default.rootData,Re.default.rootData]];i.opts.dynamicRef&&f.push([Re.default.dynamicAnchors,Re.default.dynamicAnchors]);const v=(0,J._)`${d}, ${r.object(...f)}`;return c!==J.nil?(0,J._)`${a}.call(${c}, ${v})`:(0,J._)`${a}(${v})`}q.callValidateCode=Da;const Aa=(0,J._)`new RegExp`;function Va({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,J._)`${s.code==="new RegExp"?Aa:(0,ja.useFunc)(e,s)}(${r}, ${n})`})}q.usePattern=Va;function La(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return i(()=>t.assign(a,!1)),a}return t.var(o,!0),i(()=>t.break()),o;function i(a){const c=t.const("len",(0,J._)`${r}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:n,dataProp:u,dataPropType:Zr.Type.Num},o),t.if((0,J.not)(o),a)})}}q.validateArray=La;function qa(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Zr.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const i=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,u)=>{const d=e.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);t.assign(i,(0,J._)`${i} || ${a}`),e.mergeValidEvaluated(d,a)||t.if((0,J.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}q.validateUnion=qa;Object.defineProperty(be,"__esModule",{value:!0});be.validateKeywordUsage=be.validSchemaType=be.funcKeywordCode=be.macroKeywordCode=void 0;const se=H,Le=Pe,Ha=q,za=kt;function Fa(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:i}=e,a=t.macro.call(i.self,s,o,i),c=Gs(r,n,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);const u=r.name("valid");e.subschema({schema:a,schemaPath:se.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}be.macroKeywordCode=Fa;function Ka(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:i,$data:a,it:c}=e;xa(c,t);const u=!a&&t.compile?t.compile.call(c.self,o,i,c):t.validate,d=Gs(n,s,u),f=n.let("valid");e.block$data(f,v),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function v(){if(t.errors===!1)g(),t.modifying&&ns(e),y(()=>e.error());else{const h=t.async?b():m();t.modifying&&ns(e),y(()=>Ua(e,h))}}function b(){const h=n.let("ruleErrs",null);return n.try(()=>g((0,se._)`await `),_=>n.assign(f,!1).if((0,se._)`${_} instanceof ${c.ValidationError}`,()=>n.assign(h,(0,se._)`${_}.errors`),()=>n.throw(_))),h}function m(){const h=(0,se._)`${d}.errors`;return n.assign(h,null),g(se.nil),h}function g(h=t.async?(0,se._)`await `:se.nil){const _=c.opts.passContext?Le.default.this:Le.default.self,P=!("compile"in t&&!a||t.schema===!1);n.assign(f,(0,se._)`${h}${(0,Ha.callValidateCode)(e,d,_,P)}`,t.modifying)}function y(h){var _;n.if((0,se.not)((_=t.valid)!==null&&_!==void 0?_:f),h)}}be.funcKeywordCode=Ka;function ns(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,se._)`${n.parentData}[${n.parentDataProperty}]`))}function Ua(e,t){const{gen:r}=e;r.if((0,se._)`Array.isArray(${t})`,()=>{r.assign(Le.default.vErrors,(0,se._)`${Le.default.vErrors} === null ? ${t} : ${Le.default.vErrors}.concat(${t})`).assign(Le.default.errors,(0,se._)`${Le.default.vErrors}.length`),(0,za.extendErrors)(e)},()=>e.error())}function xa({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Gs(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,se.stringify)(r)})}function Ja(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}be.validSchemaType=Ja;function Ga({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const i=s.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}be.validateKeywordUsage=Ga;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.extendSubschemaMode=Ce.extendSubschemaData=Ce.getSubschema=void 0;const we=H,Bs=I;function Ba(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:i}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,we._)`${e.schemaPath}${(0,we.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,we._)`${e.schemaPath}${(0,we.getProperty)(t)}${(0,we.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Bs.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Ce.getSubschema=Ba;function Wa(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(r!==void 0){const{errorPath:u,dataPathArr:d,opts:f}=t,v=a.let("data",(0,we._)`${t.data}${(0,we.getProperty)(r)}`,!0);c(v),e.errorPath=(0,we.str)`${u}${(0,Bs.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,we._)`${r}`,e.dataPathArr=[...d,e.parentDataProperty]}if(s!==void 0){const u=s instanceof we.Name?s:a.let("data",s,!0);c(u),i!==void 0&&(e.propertyName=i)}o&&(e.dataTypes=o);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}Ce.extendSubschemaData=Wa;function Qa(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Ce.extendSubschemaMode=Qa;var te={},Ws=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var i=o[s];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r},Qs={exports:{}},Me=Qs.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Ft(t,n,s,e,"",e)};Me.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Me.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Me.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Me.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ft(e,t,r,n,s,o,i,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,i,a,c,u);for(var d in n){var f=n[d];if(Array.isArray(f)){if(d in Me.arrayKeywords)for(var v=0;v<f.length;v++)Ft(e,t,r,f[v],s+"/"+d+"/"+v,o,s,d,n,v)}else if(d in Me.propsKeywords){if(f&&typeof f=="object")for(var b in f)Ft(e,t,r,f[b],s+"/"+d+"/"+Ya(b),o,s,d,n,b)}else(d in Me.keywords||e.allKeys&&!(d in Me.skipKeywords))&&Ft(e,t,r,f,s+"/"+d,o,s,d,n)}r(n,s,o,i,a,c,u)}}function Ya(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(te,"__esModule",{value:!0});te.getSchemaRefs=te.resolveUrl=te.normalizeId=te._getFullPath=te.getFullPath=te.inlineRef=void 0;const Xa=I,Za=Ws,ei=Qs.exports,ti=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ri(e,t=!0){return typeof e=="boolean"?!0:t===!0?!qr(e):t?Ys(e)<=t:!1}te.inlineRef=ri;const ni=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function qr(e){for(const t in e){if(ni.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(qr)||typeof r=="object"&&qr(r))return!0}return!1}function Ys(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!ti.has(r)&&(typeof e[r]=="object"&&(0,Xa.eachItem)(e[r],n=>t+=Ys(n)),t===1/0))return 1/0}return t}function Xs(e,t="",r){r!==!1&&(t=et(t));const n=e.parse(t);return Zs(e,n)}te.getFullPath=Xs;function Zs(e,t){return e.serialize(t).split("#")[0]+"#"}te._getFullPath=Zs;const si=/#\/?$/;function et(e){return e?e.replace(si,""):""}te.normalizeId=et;function oi(e,t,r){return r=et(r),e.resolve(t,r)}te.resolveUrl=oi;const ai=/^[a-z_][-a-z0-9._]*$/i;function ii(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=et(e[r]||t),o={"":s},i=Xs(n,s,!1),a={},c=new Set;return ei(e,{allKeys:!0},(f,v,b,m)=>{if(m===void 0)return;const g=i+v;let y=o[m];typeof f[r]=="string"&&(y=h.call(this,f[r])),_.call(this,f.$anchor),_.call(this,f.$dynamicAnchor),o[v]=y;function h(P){const S=this.opts.uriResolver.resolve;if(P=et(y?S(y,P):P),c.has(P))throw d(P);c.add(P);let N=this.refs[P];return typeof N=="string"&&(N=this.refs[N]),typeof N=="object"?u(f,N.schema,P):P!==et(g)&&(P[0]==="#"?(u(f,a[P],P),a[P]=f):this.refs[P]=g),P}function _(P){if(typeof P=="string"){if(!ai.test(P))throw new Error(`invalid anchor "${P}"`);h.call(this,`#${P}`)}}}),a;function u(f,v,b){if(v!==void 0&&!Za(f,v))throw d(b)}function d(f){return new Error(`reference "${f}" resolves to more than one schema`)}}te.getSchemaRefs=ii;Object.defineProperty(_e,"__esModule",{value:!0});_e.getData=_e.KeywordCxt=_e.validateFunctionCode=void 0;const eo=rt,ss=Y,rn=Ne,Wt=Y,ci=nr,mt=be,jr=Ce,T=H,D=Pe,li=te,ke=I,lt=kt;function ui(e){if(no(e)&&(so(e),ro(e))){hi(e);return}to(e,()=>(0,eo.topBoolOrEmptySchema)(e))}_e.validateFunctionCode=ui;function to({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,T._)`${D.default.data}, ${D.default.valCxt}`,n.$async,()=>{e.code((0,T._)`"use strict"; ${os(r,s)}`),fi(e,s),e.code(o)}):e.func(t,(0,T._)`${D.default.data}, ${di(s)}`,n.$async,()=>e.code(os(r,s)).code(o))}function di(e){return(0,T._)`{${D.default.instancePath}="", ${D.default.parentData}, ${D.default.parentDataProperty}, ${D.default.rootData}=${D.default.data}${e.dynamicRef?(0,T._)`, ${D.default.dynamicAnchors}={}`:T.nil}}={}`}function fi(e,t){e.if(D.default.valCxt,()=>{e.var(D.default.instancePath,(0,T._)`${D.default.valCxt}.${D.default.instancePath}`),e.var(D.default.parentData,(0,T._)`${D.default.valCxt}.${D.default.parentData}`),e.var(D.default.parentDataProperty,(0,T._)`${D.default.valCxt}.${D.default.parentDataProperty}`),e.var(D.default.rootData,(0,T._)`${D.default.valCxt}.${D.default.rootData}`),t.dynamicRef&&e.var(D.default.dynamicAnchors,(0,T._)`${D.default.valCxt}.${D.default.dynamicAnchors}`)},()=>{e.var(D.default.instancePath,(0,T._)`""`),e.var(D.default.parentData,(0,T._)`undefined`),e.var(D.default.parentDataProperty,(0,T._)`undefined`),e.var(D.default.rootData,D.default.data),t.dynamicRef&&e.var(D.default.dynamicAnchors,(0,T._)`{}`)})}function hi(e){const{schema:t,opts:r,gen:n}=e;to(e,()=>{r.$comment&&t.$comment&&ao(e),$i(e),n.let(D.default.vErrors,null),n.let(D.default.errors,0),r.unevaluated&&pi(e),oo(e),wi(e)})}function pi(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,T._)`${r}.evaluated`),t.if((0,T._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,T._)`${e.evaluated}.props`,(0,T._)`undefined`)),t.if((0,T._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,T._)`${e.evaluated}.items`,(0,T._)`undefined`))}function os(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,T._)`/*# sourceURL=${r} */`:T.nil}function mi(e,t){if(no(e)&&(so(e),ro(e))){yi(e,t);return}(0,eo.boolOrEmptySchema)(e,t)}function ro({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function no(e){return typeof e.schema!="boolean"}function yi(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&ao(e),_i(e),vi(e);const o=n.const("_errs",D.default.errors);oo(e,o),n.var(t,(0,T._)`${o} === ${D.default.errors}`)}function so(e){(0,ke.checkUnknownRules)(e),gi(e)}function oo(e,t){if(e.opts.jtd)return as(e,[],!1,t);const r=(0,ss.getSchemaTypes)(e.schema),n=(0,ss.coerceAndCheckDataType)(e,r);as(e,r,!n,t)}function gi(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,ke.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function $i(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ke.checkStrictMode)(e,"default is ignored in the schema root")}function _i(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,li.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function vi(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ao({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,T._)`${D.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const i=(0,T.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,T._)`${D.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function wi(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,T._)`${D.default.errors} === 0`,()=>t.return(D.default.data),()=>t.throw((0,T._)`new ${s}(${D.default.vErrors})`)):(t.assign((0,T._)`${n}.errors`,D.default.vErrors),o.unevaluated&&bi(e),t.return((0,T._)`${D.default.errors} === 0`))}function bi({gen:e,evaluated:t,props:r,items:n}){r instanceof T.Name&&e.assign((0,T._)`${t}.props`,r),n instanceof T.Name&&e.assign((0,T._)`${t}.items`,n)}function as(e,t,r,n){const{gen:s,schema:o,data:i,allErrors:a,opts:c,self:u}=e,{RULES:d}=u;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,ke.schemaHasRulesButRef)(o,d))){s.block(()=>lo(e,"$ref",d.all.$ref.definition));return}c.jtd||Si(e,t),s.block(()=>{for(const v of d.rules)f(v);f(d.post)});function f(v){!(0,rn.shouldUseGroup)(o,v)||(v.type?(s.if((0,Wt.checkDataType)(v.type,i,c.strictNumbers)),is(e,v),t.length===1&&t[0]===v.type&&r&&(s.else(),(0,Wt.reportTypeError)(e)),s.endIf()):is(e,v),a||s.if((0,T._)`${D.default.errors} === ${n||0}`))}}function is(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,ci.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,rn.shouldUseRule)(n,o)&&lo(e,o.keyword,o.definition,t.type)})}function Si(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Ei(e,t),e.opts.allowUnionTypes||Pi(e,t),Ni(e,e.dataTypes))}function Ei(e,t){if(!!t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{io(e.dataTypes,r)||nn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Oi(e,t)}}function Pi(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&nn(e,"use allowUnionTypes to allow union type keyword")}function Ni(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,rn.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(i=>ki(t,i))&&nn(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function ki(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function io(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Oi(e,t){const r=[];for(const n of e.dataTypes)io(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function nn(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,ke.checkStrictMode)(e,t,e.opts.strictTypes)}class co{constructor(t,r,n){if((0,mt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ke.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",uo(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,mt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",D.default.errors))}result(t,r,n){this.failResult((0,T.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,T.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,T._)`${r} !== undefined && (${(0,T.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?lt.reportExtraError:lt.reportError)(this,this.def.error,r)}$dataError(){(0,lt.reportError)(this,this.def.$dataError||lt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,lt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=T.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=T.nil,r=T.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:i}=this;n.if((0,T.or)((0,T._)`${s} === undefined`,r)),t!==T.nil&&n.assign(t,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==T.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,T.or)(i(),a());function i(){if(n.length){if(!(r instanceof T.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,T._)`${(0,Wt.checkDataTypes)(c,r,o.opts.strictNumbers,Wt.DataType.Wrong)}`}return T.nil}function a(){if(s.validateSchema){const c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,T._)`!${c}(${r})`}return T.nil}}subschema(t,r){const n=(0,jr.getSubschema)(this.it,t);(0,jr.extendSubschemaData)(n,this.it,t),(0,jr.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return mi(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;!n.opts.unevaluated||(n.props!==!0&&t.props!==void 0&&(n.props=ke.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=ke.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,T.Name)),!0}}_e.KeywordCxt=co;function lo(e,t,r,n){const s=new co(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,mt.funcKeywordCode)(s,r):"macro"in r?(0,mt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,mt.funcKeywordCode)(s,r)}const ji=/^\/(?:[^~]|~0|~1)*$/,Ii=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function uo(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return D.default.rootData;if(e[0]==="/"){if(!ji.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=D.default.rootData}else{const u=Ii.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const d=+u[1];if(s=u[2],s==="#"){if(d>=t)throw new Error(c("property/index",d));return n[t-d]}if(d>t)throw new Error(c("data",d));if(o=r[t-d],!s)return o}let i=o;const a=s.split("/");for(const u of a)u&&(o=(0,T._)`${o}${(0,T.getProperty)((0,ke.unescapeJsonPointer)(u))}`,i=(0,T._)`${i} && ${o}`);return i;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${t}`}}_e.getData=uo;var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});class Ri extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ot.default=Ri;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});const Ir=te;class Ti extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ir.resolveUrl)(t,r,n),this.missingSchema=(0,Ir.normalizeId)((0,Ir.getFullPath)(t,this.missingRef))}}ot.default=Ti;var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.resolveSchema=ae.getCompilingSchema=ae.resolveRef=ae.compileSchema=ae.SchemaEnv=void 0;const ye=H,Mi=Ot,Ve=Pe,$e=te,cs=I,Ci=_e;class sr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,$e.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}}ae.SchemaEnv=sr;function sn(e){const t=fo.call(this,e);if(t)return t;const r=(0,$e.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,i=new ye.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let a;e.$async&&(a=i.scopeValue("Error",{ref:Mi.default,code:(0,ye._)`require("ajv/dist/runtime/validation_error").default`}));const c=i.scopeName("validate");e.validateName=c;const u={gen:i,allErrors:this.opts.allErrors,data:Ve.default.data,parentData:Ve.default.parentData,parentDataProperty:Ve.default.parentDataProperty,dataNames:[Ve.default.data],dataPathArr:[ye.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ye.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:ye.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ye._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,Ci.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);const f=i.toString();d=`${i.scopeRefs(Ve.default.scope)}return ${f}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const b=new Function(`${Ve.default.self}`,`${Ve.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:b}),b.errors=null,b.schema=e.schema,b.schemaEnv=e,e.$async&&(b.$async=!0),this.opts.code.source===!0&&(b.source={validateName:c,validateCode:f,scopeValues:i._values}),this.opts.unevaluated){const{props:m,items:g}=u;b.evaluated={props:m instanceof ye.Name?void 0:m,items:g instanceof ye.Name?void 0:g,dynamicProps:m instanceof ye.Name,dynamicItems:g instanceof ye.Name},b.source&&(b.source.evaluated=(0,ye.stringify)(b.evaluated))}return e.validate=b,e}catch(f){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),f}finally{this._compilations.delete(e)}}ae.compileSchema=sn;function Di(e,t,r){var n;r=(0,$e.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=Li.call(this,e,r);if(o===void 0){const i=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;i&&(o=new sr({schema:i,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ai.call(this,o)}ae.resolveRef=Di;function Ai(e){return(0,$e.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:sn.call(this,e)}function fo(e){for(const t of this._compilations)if(Vi(t,e))return t}ae.getCompilingSchema=fo;function Vi(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Li(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||or.call(this,e,t)}function or(e,t){const r=this.opts.uriResolver.parse(t),n=(0,$e._getFullPath)(this.opts.uriResolver,r);let s=(0,$e.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return Rr.call(this,r,e);const o=(0,$e.normalizeId)(n),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){const a=or.call(this,e,i);return typeof a?.schema!="object"?void 0:Rr.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||sn.call(this,i),o===(0,$e.normalizeId)(t)){const{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,$e.resolveUrl)(this.opts.uriResolver,s,u)),new sr({schema:a,schemaId:c,root:e,baseId:s})}return Rr.call(this,r,i)}}ae.resolveSchema=or;const qi=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Rr(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,cs.unescapeFragment)(a)];if(c===void 0)return;r=c;const u=typeof r=="object"&&r[this.opts.schemaId];!qi.has(a)&&u&&(t=(0,$e.resolveUrl)(this.opts.uriResolver,t,u))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,cs.schemaHasRulesButRef)(r,this.RULES)){const a=(0,$e.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=or.call(this,n,a)}const{schemaId:i}=this.opts;if(o=o||new sr({schema:r,schemaId:i,root:n,baseId:t}),o.schema!==o.root.schema)return o}const Hi="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",zi="Meta-schema for $data reference (JSON AnySchema extension proposal)",Fi="object",Ki=["$data"],Ui={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xi=!1,Ji={$id:Hi,description:zi,type:Fi,required:Ki,properties:Ui,additionalProperties:xi};var on={},ar={exports:{}};const Gi=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),ho=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function an(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const Bi=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function ls(e){return e.length=0,!0}function Wi(e,t,r){if(e.length){const n=an(e);if(n!=="")t.push(n);else return r.error=!0,!1;e.length=0}return!0}function Qi(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let o=!1,i=!1,a=Wi;for(let c=0;c<e.length;c++){const u=e[c];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(i=!0),!a(s,n,r))break;if(++t>7){r.error=!0;break}c>0&&e[c-1]===":"&&(o=!0),n.push(":");continue}else if(u==="%"){if(!a(s,n,r))break;a=ls}else{s.push(u);continue}}return s.length&&(a===ls?r.zone=s.join(""):i?n.push(s.join("")):n.push(an(s))),r.address=n.join(""),r}function po(e){if(Yi(e,":")<2)return{host:e,isIPV6:!1};const t=Qi(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:n}}}function Yi(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}function Xi(e){let t=e;const r=[];let n=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(s===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((n=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")}function Zi(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function ec(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!ho(r)){const n=po(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var mo={nonSimpleDomain:Bi,recomposeAuthority:ec,normalizeComponentEncoding:Zi,removeDotSegments:Xi,isIPv4:ho,isUUID:Gi,normalizeIPv6:po,stringArrayToHexStripped:an};const{isUUID:tc}=mo,rc=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,nc=["http","https","ws","wss","urn","urn:uuid"];function sc(e){return nc.indexOf(e)!==-1}function cn(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function yo(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function go(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function oc(e){return e.secure=cn(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function ac(e){if((e.port===(cn(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function ic(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(rc);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,o=ln(s);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function cc(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,o=ln(s);o&&(e=o.serialize(e,t));const i=e,a=e.nss;return i.path=`${n||t.nid}:${a}`,t.skipEscape=!0,i}function lc(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!tc(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function uc(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const $o={scheme:"http",domainHost:!0,parse:yo,serialize:go},dc={scheme:"https",domainHost:$o.domainHost,parse:yo,serialize:go},Kt={scheme:"ws",domainHost:!0,parse:oc,serialize:ac},fc={scheme:"wss",domainHost:Kt.domainHost,parse:Kt.parse,serialize:Kt.serialize},hc={scheme:"urn",parse:ic,serialize:cc,skipNormalize:!0},pc={scheme:"urn:uuid",parse:lc,serialize:uc,skipNormalize:!0},Qt={http:$o,https:dc,ws:Kt,wss:fc,urn:hc,"urn:uuid":pc};Object.setPrototypeOf(Qt,null);function ln(e){return e&&(Qt[e]||Qt[e.toLowerCase()])||void 0}var mc={wsIsSecure:cn,SCHEMES:Qt,isValidSchemeName:sc,getSchemeHandler:ln};const{normalizeIPv6:yc,removeDotSegments:dt,recomposeAuthority:gc,normalizeComponentEncoding:Dt,isIPv4:$c,nonSimpleDomain:_c}=mo,{SCHEMES:vc,getSchemeHandler:_o}=mc;function wc(e,t){return typeof e=="string"?e=Se(Oe(e,t),t):typeof e=="object"&&(e=Oe(Se(e,t),t)),e}function bc(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=vo(Oe(e,n),Oe(t,n),n,!0);return n.skipEscape=!0,Se(s,n)}function vo(e,t,r,n){const s={};return n||(e=Oe(Se(e,r),r),t=Oe(Se(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dt(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=dt(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=dt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=dt(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Sc(e,t,r){return typeof e=="string"?(e=unescape(e),e=Se(Dt(Oe(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Se(Dt(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Se(Dt(Oe(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Se(Dt(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Se(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=_o(n.scheme||r.scheme);o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const i=gc(r);if(i!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(i),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(a=dt(a)),i===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const Ec=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Oe(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);const o=e.match(Ec);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host)if($c(n.host)===!1){const c=yc(n.host);n.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const i=_o(r.scheme||n.scheme);if(!r.unicodeSupport&&(!i||!i.unicodeSupport)&&n.host&&(r.domainHost||i&&i.domainHost)&&s===!1&&_c(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!i||i&&!i.skipNormalize)&&(e.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),i&&i.parse&&i.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const un={SCHEMES:vc,normalize:wc,resolve:bc,resolveComponent:vo,equal:Sc,serialize:Se,parse:Oe};ar.exports=un;ar.exports.default=un;ar.exports.fastUri=un;Object.defineProperty(on,"__esModule",{value:!0});const wo=ar.exports;wo.code='require("ajv/dist/runtime/uri").default';on.default=wo;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=_e;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=H;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Ot,s=ot,o=Ke,i=ae,a=H,c=te,u=Y,d=I,f=Ji,v=on,b=(j,$)=>new RegExp(j,$);b.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function P(j){var $,k,w,l,p,E,M,C,K,z,X,Be,pr,mr,yr,gr,$r,_r,vr,wr,br,Sr,Er,Pr,Nr;const ct=j.strict,kr=($=j.code)===null||$===void 0?void 0:$.optimize,Yn=kr===!0||kr===void 0?1:kr||0,Xn=(w=(k=j.code)===null||k===void 0?void 0:k.regExp)!==null&&w!==void 0?w:b,Uo=(l=j.uriResolver)!==null&&l!==void 0?l:v.default;return{strictSchema:(E=(p=j.strictSchema)!==null&&p!==void 0?p:ct)!==null&&E!==void 0?E:!0,strictNumbers:(C=(M=j.strictNumbers)!==null&&M!==void 0?M:ct)!==null&&C!==void 0?C:!0,strictTypes:(z=(K=j.strictTypes)!==null&&K!==void 0?K:ct)!==null&&z!==void 0?z:"log",strictTuples:(Be=(X=j.strictTuples)!==null&&X!==void 0?X:ct)!==null&&Be!==void 0?Be:"log",strictRequired:(mr=(pr=j.strictRequired)!==null&&pr!==void 0?pr:ct)!==null&&mr!==void 0?mr:!1,code:j.code?{...j.code,optimize:Yn,regExp:Xn}:{optimize:Yn,regExp:Xn},loopRequired:(yr=j.loopRequired)!==null&&yr!==void 0?yr:_,loopEnum:(gr=j.loopEnum)!==null&&gr!==void 0?gr:_,meta:($r=j.meta)!==null&&$r!==void 0?$r:!0,messages:(_r=j.messages)!==null&&_r!==void 0?_r:!0,inlineRefs:(vr=j.inlineRefs)!==null&&vr!==void 0?vr:!0,schemaId:(wr=j.schemaId)!==null&&wr!==void 0?wr:"$id",addUsedSchema:(br=j.addUsedSchema)!==null&&br!==void 0?br:!0,validateSchema:(Sr=j.validateSchema)!==null&&Sr!==void 0?Sr:!0,validateFormats:(Er=j.validateFormats)!==null&&Er!==void 0?Er:!0,unicodeRegExp:(Pr=j.unicodeRegExp)!==null&&Pr!==void 0?Pr:!0,int32range:(Nr=j.int32range)!==null&&Nr!==void 0?Nr:!0,uriResolver:Uo}}class S{constructor($={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,$=this.opts={...$,...P($)};const{es5:k,lines:w}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:g,es5:k,lines:w}),this.logger=re($.logger);const l=$.validateFormats;$.validateFormats=!1,this.RULES=(0,o.getRules)(),N.call(this,y,$,"NOT SUPPORTED"),N.call(this,h,$,"DEPRECATED","warn"),this._metaOpts=W.call(this),$.formats&&x.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),$.keywords&&F.call(this,$.keywords),typeof $.meta=="object"&&this.addMetaSchema($.meta),R.call(this),$.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:$,meta:k,schemaId:w}=this.opts;let l=f;w==="id"&&(l={...f},l.id=l.$id,delete l.$id),k&&$&&this.addMetaSchema(l,l[w],!1)}defaultMeta(){const{meta:$,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof $=="object"?$[k]||$:void 0}validate($,k){let w;if(typeof $=="string"){if(w=this.getSchema($),!w)throw new Error(`no schema with key or ref "${$}"`)}else w=this.compile($);const l=w(k);return"$async"in w||(this.errors=w.errors),l}compile($,k){const w=this._addSchema($,k);return w.validate||this._compileSchemaEnv(w)}compileAsync($,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:w}=this.opts;return l.call(this,$,k);async function l(z,X){await p.call(this,z.$schema);const Be=this._addSchema(z,X);return Be.validate||E.call(this,Be)}async function p(z){z&&!this.getSchema(z)&&await l.call(this,{$ref:z},!0)}async function E(z){try{return this._compileSchemaEnv(z)}catch(X){if(!(X instanceof s.default))throw X;return M.call(this,X),await C.call(this,X.missingSchema),E.call(this,z)}}function M({missingSchema:z,missingRef:X}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${X} cannot be resolved`)}async function C(z){const X=await K.call(this,z);this.refs[z]||await p.call(this,X.$schema),this.refs[z]||this.addSchema(X,z,k)}async function K(z){const X=this._loading[z];if(X)return X;try{return await(this._loading[z]=w(z))}finally{delete this._loading[z]}}}addSchema($,k,w,l=this.opts.validateSchema){if(Array.isArray($)){for(const E of $)this.addSchema(E,void 0,w,l);return this}let p;if(typeof $=="object"){const{schemaId:E}=this.opts;if(p=$[E],p!==void 0&&typeof p!="string")throw new Error(`schema ${E} must be string`)}return k=(0,c.normalizeId)(k||p),this._checkUnique(k),this.schemas[k]=this._addSchema($,w,k,l,!0),this}addMetaSchema($,k,w=this.opts.validateSchema){return this.addSchema($,k,!0,w),this}validateSchema($,k){if(typeof $=="boolean")return!0;let w;if(w=$.$schema,w!==void 0&&typeof w!="string")throw new Error("$schema must be a string");if(w=w||this.opts.defaultMeta||this.defaultMeta(),!w)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(w,$);if(!l&&k){const p="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(p);else throw new Error(p)}return l}getSchema($){let k;for(;typeof(k=O.call(this,$))=="string";)$=k;if(k===void 0){const{schemaId:w}=this.opts,l=new i.SchemaEnv({schema:{},schemaId:w});if(k=i.resolveSchema.call(this,l,$),!k)return;this.refs[$]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema($){if($ instanceof RegExp)return this._removeAllSchemas(this.schemas,$),this._removeAllSchemas(this.refs,$),this;switch(typeof $){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=O.call(this,$);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[$],delete this.refs[$],this}case"object":{const k=$;this._cache.delete(k);let w=$[this.opts.schemaId];return w&&(w=(0,c.normalizeId)(w),delete this.schemas[w],delete this.refs[w]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary($){for(const k of $)this.addKeyword(k);return this}addKeyword($,k){let w;if(typeof $=="string")w=$,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=w);else if(typeof $=="object"&&k===void 0){if(k=$,w=k.keyword,Array.isArray(w)&&!w.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ie.call(this,w,k),!k)return(0,d.eachItem)(w,p=>Ie.call(this,p)),this;Je.call(this,k);const l={...k,type:(0,u.getJSONTypes)(k.type),schemaType:(0,u.getJSONTypes)(k.schemaType)};return(0,d.eachItem)(w,l.type.length===0?p=>Ie.call(this,p,l):p=>l.type.forEach(E=>Ie.call(this,p,l,E))),this}getKeyword($){const k=this.RULES.all[$];return typeof k=="object"?k.definition:!!k}removeKeyword($){const{RULES:k}=this;delete k.keywords[$],delete k.all[$];for(const w of k.rules){const l=w.rules.findIndex(p=>p.keyword===$);l>=0&&w.rules.splice(l,1)}return this}addFormat($,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[$]=k,this}errorsText($=this.errors,{separator:k=", ",dataVar:w="data"}={}){return!$||$.length===0?"No errors":$.map(l=>`${w}${l.instancePath} ${l.message}`).reduce((l,p)=>l+k+p)}$dataMetaSchema($,k){const w=this.RULES.all;$=JSON.parse(JSON.stringify($));for(const l of k){const p=l.split("/").slice(1);let E=$;for(const M of p)E=E[M];for(const M in w){const C=w[M];if(typeof C!="object")continue;const{$data:K}=C.definition,z=E[M];K&&z&&(E[M]=Ct(z))}}return $}_removeAllSchemas($,k){for(const w in $){const l=$[w];(!k||k.test(w))&&(typeof l=="string"?delete $[w]:l&&!l.meta&&(this._cache.delete(l.schema),delete $[w]))}}_addSchema($,k,w,l=this.opts.validateSchema,p=this.opts.addUsedSchema){let E;const{schemaId:M}=this.opts;if(typeof $=="object")E=$[M];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof $!="boolean")throw new Error("schema must be object or boolean")}let C=this._cache.get($);if(C!==void 0)return C;w=(0,c.normalizeId)(E||w);const K=c.getSchemaRefs.call(this,$,w);return C=new i.SchemaEnv({schema:$,schemaId:M,meta:k,baseId:w,localRefs:K}),this._cache.set(C.schema,C),p&&!w.startsWith("#")&&(w&&this._checkUnique(w),this.refs[w]=C),l&&this.validateSchema($,!0),C}_checkUnique($){if(this.schemas[$]||this.refs[$])throw new Error(`schema with key or id "${$}" already exists`)}_compileSchemaEnv($){if($.meta?this._compileMetaSchema($):i.compileSchema.call(this,$),!$.validate)throw new Error("ajv implementation error");return $.validate}_compileMetaSchema($){const k=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,$)}finally{this.opts=k}}}S.ValidationError=n.default,S.MissingRefError=s.default,e.default=S;function N(j,$,k,w="error"){for(const l in j){const p=l;p in $&&this.logger[w](`${k}: option ${l}. ${j[p]}`)}}function O(j){return j=(0,c.normalizeId)(j),this.schemas[j]||this.refs[j]}function R(){const j=this.opts.schemas;if(!!j)if(Array.isArray(j))this.addSchema(j);else for(const $ in j)this.addSchema(j[$],$)}function x(){for(const j in this.opts.formats){const $=this.opts.formats[j];$&&this.addFormat(j,$)}}function F(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const $ in j){const k=j[$];k.keyword||(k.keyword=$),this.addKeyword(k)}}function W(){const j={...this.opts};for(const $ of m)delete j[$];return j}const Q={log(){},warn(){},error(){}};function re(j){if(j===!1)return Q;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const ce=/^[a-z_$][a-z0-9_$:-]*$/i;function ie(j,$){const{RULES:k}=this;if((0,d.eachItem)(j,w=>{if(k.keywords[w])throw new Error(`Keyword ${w} is already defined`);if(!ce.test(w))throw new Error(`Keyword ${w} has invalid name`)}),!!$&&$.$data&&!("code"in $||"validate"in $))throw new Error('$data keyword must have "code" or "validate" function')}function Ie(j,$,k){var w;const l=$?.post;if(k&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:p}=this;let E=l?p.post:p.rules.find(({type:C})=>C===k);if(E||(E={type:k,rules:[]},p.rules.push(E)),p.keywords[j]=!0,!$)return;const M={keyword:j,definition:{...$,type:(0,u.getJSONTypes)($.type),schemaType:(0,u.getJSONTypes)($.schemaType)}};$.before?Ae.call(this,E,M,$.before):E.rules.push(M),p.all[j]=M,(w=$.implements)===null||w===void 0||w.forEach(C=>this.addKeyword(C))}function Ae(j,$,k){const w=j.rules.findIndex(l=>l.keyword===k);w>=0?j.rules.splice(w,0,$):(j.rules.push($),this.logger.warn(`rule ${k} is not defined`))}function Je(j){let{metaSchema:$}=j;$!==void 0&&(j.$data&&this.opts.$data&&($=Ct($)),j.validateSchema=this.compile($,!0))}const Ge={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ct(j){return{anyOf:[j,Ge]}}})(Ms);var dn={},fn={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});const Pc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hn.default=Pc;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.callRef=Ue.getValidate=void 0;const Nc=ot,us=q,oe=H,Qe=Pe,ds=ae,At=I,kc={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:i,opts:a,self:c}=n,{root:u}=o;if((r==="#"||r==="#/")&&s===u.baseId)return f();const d=ds.resolveRef.call(c,u,s,r);if(d===void 0)throw new Nc.default(n.opts.uriResolver,s,r);if(d instanceof ds.SchemaEnv)return v(d);return b(d);function f(){if(o===u)return Ut(e,i,o,o.$async);const m=t.scopeValue("root",{ref:u});return Ut(e,(0,oe._)`${m}.validate`,u,u.$async)}function v(m){const g=bo(e,m);Ut(e,g,m,m.$async)}function b(m){const g=t.scopeValue("schema",a.code.source===!0?{ref:m,code:(0,oe.stringify)(m)}:{ref:m}),y=t.name("valid"),h=e.subschema({schema:m,dataTypes:[],schemaPath:oe.nil,topSchemaRef:g,errSchemaPath:r},y);e.mergeEvaluated(h),e.ok(y)}}};function bo(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,oe._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Ue.getValidate=bo;function Ut(e,t,r,n){const{gen:s,it:o}=e,{allErrors:i,schemaEnv:a,opts:c}=o,u=c.passContext?Qe.default.this:oe.nil;n?d():f();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");const m=s.let("valid");s.try(()=>{s.code((0,oe._)`await ${(0,us.callValidateCode)(e,t,u)}`),b(t),i||s.assign(m,!0)},g=>{s.if((0,oe._)`!(${g} instanceof ${o.ValidationError})`,()=>s.throw(g)),v(g),i||s.assign(m,!1)}),e.ok(m)}function f(){e.result((0,us.callValidateCode)(e,t,u),()=>b(t),()=>v(t))}function v(m){const g=(0,oe._)`${m}.errors`;s.assign(Qe.default.vErrors,(0,oe._)`${Qe.default.vErrors} === null ? ${g} : ${Qe.default.vErrors}.concat(${g})`),s.assign(Qe.default.errors,(0,oe._)`${Qe.default.vErrors}.length`)}function b(m){var g;if(!o.opts.unevaluated)return;const y=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=At.mergeEvaluated.props(s,y.props,o.props));else{const h=s.var("props",(0,oe._)`${m}.evaluated.props`);o.props=At.mergeEvaluated.props(s,h,o.props,oe.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=At.mergeEvaluated.items(s,y.items,o.items));else{const h=s.var("items",(0,oe._)`${m}.evaluated.items`);o.items=At.mergeEvaluated.items(s,h,o.items,oe.Name)}}}Ue.callRef=Ut;Ue.default=kc;Object.defineProperty(fn,"__esModule",{value:!0});const Oc=hn,jc=Ue,Ic=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Oc.default,jc.default];fn.default=Ic;var pn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});const Yt=H,Te=Yt.operators,Xt={maximum:{okStr:"<=",ok:Te.LTE,fail:Te.GT},minimum:{okStr:">=",ok:Te.GTE,fail:Te.LT},exclusiveMaximum:{okStr:"<",ok:Te.LT,fail:Te.GTE},exclusiveMinimum:{okStr:">",ok:Te.GT,fail:Te.LTE}},Rc={message:({keyword:e,schemaCode:t})=>(0,Yt.str)`must be ${Xt[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Yt._)`{comparison: ${Xt[e].okStr}, limit: ${t}}`},Tc={keyword:Object.keys(Xt),type:"number",schemaType:"number",$data:!0,error:Rc,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Yt._)`${r} ${Xt[t].fail} ${n} || isNaN(${r})`)}};mn.default=Tc;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});const yt=H,Mc={message:({schemaCode:e})=>(0,yt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,yt._)`{multipleOf: ${e}}`},Cc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Mc,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,i=t.let("res"),a=o?(0,yt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,yt._)`${i} !== parseInt(${i})`;e.fail$data((0,yt._)`(${n} === 0 || (${i} = ${r}/${n}, ${a}))`)}};yn.default=Cc;var gn={},$n={};Object.defineProperty($n,"__esModule",{value:!0});function So(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}$n.default=So;So.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(gn,"__esModule",{value:!0});const qe=H,Dc=I,Ac=$n,Vc={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,qe.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,qe._)`{limit: ${e}}`},Lc={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vc,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?qe.operators.GT:qe.operators.LT,i=s.opts.unicode===!1?(0,qe._)`${r}.length`:(0,qe._)`${(0,Dc.useFunc)(e.gen,Ac.default)}(${r})`;e.fail$data((0,qe._)`${i} ${o} ${n}`)}};gn.default=Lc;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});const qc=q,Zt=H,Hc={message:({schemaCode:e})=>(0,Zt.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Zt._)`{pattern: ${e}}`},zc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Hc,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,i=o.opts.unicodeRegExp?"u":"",a=r?(0,Zt._)`(new RegExp(${s}, ${i}))`:(0,qc.usePattern)(e,n);e.fail$data((0,Zt._)`!${a}.test(${t})`)}};_n.default=zc;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});const gt=H,Fc={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,gt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,gt._)`{limit: ${e}}`},Kc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Fc,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?gt.operators.GT:gt.operators.LT;e.fail$data((0,gt._)`Object.keys(${r}).length ${s} ${n}`)}};vn.default=Kc;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});const ut=q,$t=H,Uc=I,xc={message:({params:{missingProperty:e}})=>(0,$t.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,$t._)`{missingProperty: ${e}}`},Jc={keyword:"required",type:"object",schemaType:"array",$data:!0,error:xc,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:i}=e,{opts:a}=i;if(!o&&r.length===0)return;const c=r.length>=a.loopRequired;if(i.allErrors?u():d(),a.strictRequired){const b=e.parentSchema.properties,{definedProperties:m}=e.it;for(const g of r)if(b?.[g]===void 0&&!m.has(g)){const y=i.schemaEnv.baseId+i.errSchemaPath,h=`required property "${g}" is not defined at "${y}" (strictRequired)`;(0,Uc.checkStrictMode)(i,h,i.opts.strictRequired)}}function u(){if(c||o)e.block$data($t.nil,f);else for(const b of r)(0,ut.checkReportMissingProp)(e,b)}function d(){const b=t.let("missing");if(c||o){const m=t.let("valid",!0);e.block$data(m,()=>v(b,m)),e.ok(m)}else t.if((0,ut.checkMissingProp)(e,r,b)),(0,ut.reportMissingProp)(e,b),t.else()}function f(){t.forOf("prop",n,b=>{e.setParams({missingProperty:b}),t.if((0,ut.noPropertyInData)(t,s,b,a.ownProperties),()=>e.error())})}function v(b,m){e.setParams({missingProperty:b}),t.forOf(b,n,()=>{t.assign(m,(0,ut.propertyInData)(t,s,b,a.ownProperties)),t.if((0,$t.not)(m),()=>{e.error(),t.break()})},$t.nil)}}};wn.default=Jc;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});const _t=H,Gc={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,_t.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,_t._)`{limit: ${e}}`},Bc={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Gc,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?_t.operators.GT:_t.operators.LT;e.fail$data((0,_t._)`${r}.length ${s} ${n}`)}};bn.default=Bc;var Sn={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});const Eo=Ws;Eo.code='require("ajv/dist/runtime/equal").default';jt.default=Eo;Object.defineProperty(Sn,"__esModule",{value:!0});const Tr=Y,ee=H,Wc=I,Qc=jt,Yc={message:({params:{i:e,j:t}})=>(0,ee.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ee._)`{i: ${e}, j: ${t}}`},Xc={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Yc,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:i,it:a}=e;if(!n&&!s)return;const c=t.let("valid"),u=o.items?(0,Tr.getSchemaTypes)(o.items):[];e.block$data(c,d,(0,ee._)`${i} === false`),e.ok(c);function d(){const m=t.let("i",(0,ee._)`${r}.length`),g=t.let("j");e.setParams({i:m,j:g}),t.assign(c,!0),t.if((0,ee._)`${m} > 1`,()=>(f()?v:b)(m,g))}function f(){return u.length>0&&!u.some(m=>m==="object"||m==="array")}function v(m,g){const y=t.name("item"),h=(0,Tr.checkDataTypes)(u,y,a.opts.strictNumbers,Tr.DataType.Wrong),_=t.const("indices",(0,ee._)`{}`);t.for((0,ee._)`;${m}--;`,()=>{t.let(y,(0,ee._)`${r}[${m}]`),t.if(h,(0,ee._)`continue`),u.length>1&&t.if((0,ee._)`typeof ${y} == "string"`,(0,ee._)`${y} += "_"`),t.if((0,ee._)`typeof ${_}[${y}] == "number"`,()=>{t.assign(g,(0,ee._)`${_}[${y}]`),e.error(),t.assign(c,!1).break()}).code((0,ee._)`${_}[${y}] = ${m}`)})}function b(m,g){const y=(0,Wc.useFunc)(t,Qc.default),h=t.name("outer");t.label(h).for((0,ee._)`;${m}--;`,()=>t.for((0,ee._)`${g} = ${m}; ${g}--;`,()=>t.if((0,ee._)`${y}(${r}[${m}], ${r}[${g}])`,()=>{e.error(),t.assign(c,!1).break(h)})))}}};Sn.default=Xc;var En={};Object.defineProperty(En,"__esModule",{value:!0});const Hr=H,Zc=I,el=jt,tl={message:"must be equal to constant",params:({schemaCode:e})=>(0,Hr._)`{allowedValue: ${e}}`},rl={keyword:"const",$data:!0,error:tl,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Hr._)`!${(0,Zc.useFunc)(t,el.default)}(${r}, ${s})`):e.fail((0,Hr._)`${o} !== ${r}`)}};En.default=rl;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const ft=H,nl=I,sl=jt,ol={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,ft._)`{allowedValues: ${e}}`},al={keyword:"enum",schemaType:"array",$data:!0,error:ol,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:i}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=i.opts.loopEnum;let c;const u=()=>c??(c=(0,nl.useFunc)(t,sl.default));let d;if(a||n)d=t.let("valid"),e.block$data(d,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const b=t.const("vSchema",o);d=(0,ft.or)(...s.map((m,g)=>v(b,g)))}e.pass(d);function f(){t.assign(d,!1),t.forOf("v",o,b=>t.if((0,ft._)`${u()}(${r}, ${b})`,()=>t.assign(d,!0).break()))}function v(b,m){const g=s[m];return typeof g=="object"&&g!==null?(0,ft._)`${u()}(${r}, ${b}[${m}])`:(0,ft._)`${r} === ${g}`}}};Pn.default=al;Object.defineProperty(pn,"__esModule",{value:!0});const il=mn,cl=yn,ll=gn,ul=_n,dl=vn,fl=wn,hl=bn,pl=Sn,ml=En,yl=Pn,gl=[il.default,cl.default,ll.default,ul.default,dl.default,fl.default,hl.default,pl.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ml.default,yl.default];pn.default=gl;var Nn={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.validateAdditionalItems=void 0;const He=H,zr=I,$l={message:({params:{len:e}})=>(0,He.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,He._)`{limit: ${e}}`},_l={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:$l,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,zr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Po(e,n)}};function Po(e,t){const{gen:r,schema:n,data:s,keyword:o,it:i}=e;i.items=!0;const a=r.const("len",(0,He._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,He._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,zr.alwaysValidSchema)(i,n)){const u=r.var("valid",(0,He._)`${a} <= ${t.length}`);r.if((0,He.not)(u),()=>c(u)),e.ok(u)}function c(u){r.forRange("i",t.length,a,d=>{e.subschema({keyword:o,dataProp:d,dataPropType:zr.Type.Num},u),i.allErrors||r.if((0,He.not)(u),()=>r.break())})}}at.validateAdditionalItems=Po;at.default=_l;var kn={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.validateTuple=void 0;const fs=H,xt=I,vl=q,wl={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return No(e,"additionalItems",t);r.items=!0,!(0,xt.alwaysValidSchema)(r,t)&&e.ok((0,vl.validateArray)(e))}};function No(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:i,it:a}=e;d(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=xt.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),u=n.const("len",(0,fs._)`${o}.length`);r.forEach((f,v)=>{(0,xt.alwaysValidSchema)(a,f)||(n.if((0,fs._)`${u} > ${v}`,()=>e.subschema({keyword:i,schemaProp:v,dataProp:v},c)),e.ok(c))});function d(f){const{opts:v,errSchemaPath:b}=a,m=r.length,g=m===f.minItems&&(m===f.maxItems||f[t]===!1);if(v.strictTuples&&!g){const y=`"${i}" is ${m}-tuple, but minItems or maxItems/${t} are not specified or different at path "${b}"`;(0,xt.checkStrictMode)(a,y,v.strictTuples)}}}it.validateTuple=No;it.default=wl;Object.defineProperty(kn,"__esModule",{value:!0});const bl=it,Sl={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,bl.validateTuple)(e,"items")};kn.default=Sl;var On={};Object.defineProperty(On,"__esModule",{value:!0});const hs=H,El=I,Pl=q,Nl=at,kl={message:({params:{len:e}})=>(0,hs.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,hs._)`{limit: ${e}}`},Ol={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:kl,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,El.alwaysValidSchema)(n,t)&&(s?(0,Nl.validateAdditionalItems)(e,s):e.ok((0,Pl.validateArray)(e)))}};On.default=Ol;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});const le=H,Vt=I,jl={message:({params:{min:e,max:t}})=>t===void 0?(0,le.str)`must contain at least ${e} valid item(s)`:(0,le.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,le._)`{minContains: ${e}}`:(0,le._)`{minContains: ${e}, maxContains: ${t}}`},Il={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:jl,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let i,a;const{minContains:c,maxContains:u}=n;o.opts.next?(i=c===void 0?1:c,a=u):i=1;const d=t.const("len",(0,le._)`${s}.length`);if(e.setParams({min:i,max:a}),a===void 0&&i===0){(0,Vt.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Vt.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Vt.alwaysValidSchema)(o,r)){let g=(0,le._)`${d} >= ${i}`;a!==void 0&&(g=(0,le._)`${g} && ${d} <= ${a}`),e.pass(g);return}o.items=!0;const f=t.name("valid");a===void 0&&i===1?b(f,()=>t.if(f,()=>t.break())):i===0?(t.let(f,!0),a!==void 0&&t.if((0,le._)`${s}.length > 0`,v)):(t.let(f,!1),v()),e.result(f,()=>e.reset());function v(){const g=t.name("_valid"),y=t.let("count",0);b(g,()=>t.if(g,()=>m(y)))}function b(g,y){t.forRange("i",0,d,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:Vt.Type.Num,compositeRule:!0},g),y()})}function m(g){t.code((0,le._)`${g}++`),a===void 0?t.if((0,le._)`${g} >= ${i}`,()=>t.assign(f,!0).break()):(t.if((0,le._)`${g} > ${a}`,()=>t.assign(f,!1).break()),i===1?t.assign(f,!0):t.if((0,le._)`${g} >= ${i}`,()=>t.assign(f,!0)))}}};jn.default=Il;var ko={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=H,r=I,n=q;e.error={message:({params:{property:c,depsCount:u,deps:d}})=>{const f=u===1?"property":"properties";return(0,t.str)`must have ${f} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:d,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[u,d]=o(c);i(c,u),a(c,d)}};function o({schema:c}){const u={},d={};for(const f in c){if(f==="__proto__")continue;const v=Array.isArray(c[f])?u:d;v[f]=c[f]}return[u,d]}function i(c,u=c.schema){const{gen:d,data:f,it:v}=c;if(Object.keys(u).length===0)return;const b=d.let("missing");for(const m in u){const g=u[m];if(g.length===0)continue;const y=(0,n.propertyInData)(d,f,m,v.opts.ownProperties);c.setParams({property:m,depsCount:g.length,deps:g.join(", ")}),v.allErrors?d.if(y,()=>{for(const h of g)(0,n.checkReportMissingProp)(c,h)}):(d.if((0,t._)`${y} && (${(0,n.checkMissingProp)(c,g,b)})`),(0,n.reportMissingProp)(c,b),d.else())}}e.validatePropertyDeps=i;function a(c,u=c.schema){const{gen:d,data:f,keyword:v,it:b}=c,m=d.name("valid");for(const g in u)(0,r.alwaysValidSchema)(b,u[g])||(d.if((0,n.propertyInData)(d,f,g,b.opts.ownProperties),()=>{const y=c.subschema({keyword:v,schemaProp:g},m);c.mergeValidEvaluated(y,m)},()=>d.var(m,!0)),c.ok(m))}e.validateSchemaDeps=a,e.default=s})(ko);var In={};Object.defineProperty(In,"__esModule",{value:!0});const Oo=H,Rl=I,Tl={message:"property name must be valid",params:({params:e})=>(0,Oo._)`{propertyName: ${e.propertyName}}`},Ml={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Tl,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,Rl.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,i=>{e.setParams({propertyName:i}),e.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),t.if((0,Oo.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};In.default=Ml;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});const Lt=q,ge=H,Cl=Pe,qt=I,Dl={message:"must NOT have additional properties",params:({params:e})=>(0,ge._)`{additionalProperty: ${e.additionalProperty}}`},Al={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Dl,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:i}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,qt.alwaysValidSchema)(i,r))return;const u=(0,Lt.allSchemaProperties)(n.properties),d=(0,Lt.allSchemaProperties)(n.patternProperties);f(),e.ok((0,ge._)`${o} === ${Cl.default.errors}`);function f(){t.forIn("key",s,y=>{!u.length&&!d.length?m(y):t.if(v(y),()=>m(y))})}function v(y){let h;if(u.length>8){const _=(0,qt.schemaRefOrVal)(i,n.properties,"properties");h=(0,Lt.isOwnProperty)(t,_,y)}else u.length?h=(0,ge.or)(...u.map(_=>(0,ge._)`${y} === ${_}`)):h=ge.nil;return d.length&&(h=(0,ge.or)(h,...d.map(_=>(0,ge._)`${(0,Lt.usePattern)(e,_)}.test(${y})`))),(0,ge.not)(h)}function b(y){t.code((0,ge._)`delete ${s}[${y}]`)}function m(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){b(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,qt.alwaysValidSchema)(i,r)){const h=t.name("valid");c.removeAdditional==="failing"?(g(y,h,!1),t.if((0,ge.not)(h),()=>{e.reset(),b(y)})):(g(y,h),a||t.if((0,ge.not)(h),()=>t.break()))}}function g(y,h,_){const P={keyword:"additionalProperties",dataProp:y,dataPropType:qt.Type.Str};_===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(P,h)}}};ir.default=Al;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});const Vl=_e,ps=q,Mr=I,ms=ir,Ll={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ms.default.code(new Vl.KeywordCxt(o,ms.default,"additionalProperties"));const i=(0,ps.allSchemaProperties)(r);for(const f of i)o.definedProperties.add(f);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=Mr.mergeEvaluated.props(t,(0,Mr.toHash)(i),o.props));const a=i.filter(f=>!(0,Mr.alwaysValidSchema)(o,r[f]));if(a.length===0)return;const c=t.name("valid");for(const f of a)u(f)?d(f):(t.if((0,ps.propertyInData)(t,s,f,o.opts.ownProperties)),d(f),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function u(f){return o.opts.useDefaults&&!o.compositeRule&&r[f].default!==void 0}function d(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Rn.default=Ll;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});const ys=q,Ht=H,gs=I,$s=I,ql={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:i}=o,a=(0,ys.allSchemaProperties)(r),c=a.filter(g=>(0,gs.alwaysValidSchema)(o,r[g]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const u=i.strictSchema&&!i.allowMatchingProperties&&s.properties,d=t.name("valid");o.props!==!0&&!(o.props instanceof Ht.Name)&&(o.props=(0,$s.evaluatedPropsToName)(t,o.props));const{props:f}=o;v();function v(){for(const g of a)u&&b(g),o.allErrors?m(g):(t.var(d,!0),m(g),t.if(d))}function b(g){for(const y in u)new RegExp(g).test(y)&&(0,gs.checkStrictMode)(o,`property ${y} matches pattern ${g} (use allowMatchingProperties)`)}function m(g){t.forIn("key",n,y=>{t.if((0,Ht._)`${(0,ys.usePattern)(e,g)}.test(${y})`,()=>{const h=c.includes(g);h||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:y,dataPropType:$s.Type.Str},d),o.opts.unevaluated&&f!==!0?t.assign((0,Ht._)`${f}[${y}]`,!0):!h&&!o.allErrors&&t.if((0,Ht.not)(d),()=>t.break())})})}}};Tn.default=ql;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const Hl=I,zl={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Hl.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Mn.default=zl;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});const Fl=q,Kl={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Fl.validateUnion,error:{message:"must match a schema in anyOf"}};Cn.default=Kl;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});const Jt=H,Ul=I,xl={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Jt._)`{passingSchemas: ${e.passing}}`},Jl={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:xl,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,i=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(i,()=>e.reset(),()=>e.error(!0));function u(){o.forEach((d,f)=>{let v;(0,Ul.alwaysValidSchema)(s,d)?t.var(c,!0):v=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,Jt._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Jt._)`[${a}, ${f}]`).else(),t.if(c,()=>{t.assign(i,!0),t.assign(a,f),v&&e.mergeEvaluated(v,Jt.Name)})})}}};Dn.default=Jl;var An={};Object.defineProperty(An,"__esModule",{value:!0});const Gl=I,Bl={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,i)=>{if((0,Gl.alwaysValidSchema)(n,o))return;const a=e.subschema({keyword:"allOf",schemaProp:i},s);e.ok(s),e.mergeEvaluated(a)})}};An.default=Bl;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});const er=H,jo=I,Wl={message:({params:e})=>(0,er.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,er._)`{failingKeyword: ${e.ifClause}}`},Ql={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Wl,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,jo.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=_s(n,"then"),o=_s(n,"else");if(!s&&!o)return;const i=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),s&&o){const d=t.let("ifClause");e.setParams({ifClause:d}),t.if(a,u("then",d),u("else",d))}else s?t.if(a,u("then")):t.if((0,er.not)(a),u("else"));e.pass(i,()=>e.error(!0));function c(){const d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(d)}function u(d,f){return()=>{const v=e.subschema({keyword:d},a);t.assign(i,a),e.mergeValidEvaluated(v,i),f?t.assign(f,(0,er._)`${d}`):e.setParams({ifClause:d})}}}};function _s(e,t){const r=e.schema[t];return r!==void 0&&!(0,jo.alwaysValidSchema)(e,r)}Vn.default=Ql;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});const Yl=I,Xl={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Yl.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Ln.default=Xl;Object.defineProperty(Nn,"__esModule",{value:!0});const Zl=at,eu=kn,tu=it,ru=On,nu=jn,su=ko,ou=In,au=ir,iu=Rn,cu=Tn,lu=Mn,uu=Cn,du=Dn,fu=An,hu=Vn,pu=Ln;function mu(e=!1){const t=[lu.default,uu.default,du.default,fu.default,hu.default,pu.default,ou.default,au.default,su.default,iu.default,cu.default];return e?t.push(eu.default,ru.default):t.push(Zl.default,tu.default),t.push(nu.default),t}Nn.default=mu;var qn={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const B=H,yu={message:({schemaCode:e})=>(0,B.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,B._)`{format: ${e}}`},gu={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:yu,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:i,it:a}=e,{opts:c,errSchemaPath:u,schemaEnv:d,self:f}=a;if(!c.validateFormats)return;s?v():b();function v(){const m=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),g=r.const("fDef",(0,B._)`${m}[${i}]`),y=r.let("fType"),h=r.let("format");r.if((0,B._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(y,(0,B._)`${g}.type || "string"`).assign(h,(0,B._)`${g}.validate`),()=>r.assign(y,(0,B._)`"string"`).assign(h,g)),e.fail$data((0,B.or)(_(),P()));function _(){return c.strictSchema===!1?B.nil:(0,B._)`${i} && !${h}`}function P(){const S=d.$async?(0,B._)`(${g}.async ? await ${h}(${n}) : ${h}(${n}))`:(0,B._)`${h}(${n})`,N=(0,B._)`(typeof ${h} == "function" ? ${S} : ${h}.test(${n}))`;return(0,B._)`${h} && ${h} !== true && ${y} === ${t} && !${N}`}}function b(){const m=f.formats[o];if(!m){_();return}if(m===!0)return;const[g,y,h]=P(m);g===t&&e.pass(S());function _(){if(c.strictSchema===!1){f.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function P(N){const O=N instanceof RegExp?(0,B.regexpCode)(N):c.code.formats?(0,B._)`${c.code.formats}${(0,B.getProperty)(o)}`:void 0,R=r.scopeValue("formats",{key:o,ref:N,code:O});return typeof N=="object"&&!(N instanceof RegExp)?[N.type||"string",N.validate,(0,B._)`${R}.validate`]:["string",N,R]}function S(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!d.$async)throw new Error("async format in sync schema");return(0,B._)`await ${h}(${n})`}return typeof y=="function"?(0,B._)`${h}(${n})`:(0,B._)`${h}.test(${n})`}}}};Hn.default=gu;Object.defineProperty(qn,"__esModule",{value:!0});const $u=Hn,_u=[$u.default];qn.default=_u;var nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.contentVocabulary=nt.metadataVocabulary=void 0;nt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];nt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(dn,"__esModule",{value:!0});const vu=fn,wu=pn,bu=Nn,Su=qn,vs=nt,Eu=[vu.default,wu.default,(0,bu.default)(),Su.default,vs.metadataVocabulary,vs.contentVocabulary];dn.default=Eu;var zn={},cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.DiscrError=void 0;var ws;(function(e){e.Tag="tag",e.Mapping="mapping"})(ws||(cr.DiscrError=ws={}));Object.defineProperty(zn,"__esModule",{value:!0});const Ye=H,Fr=cr,bs=ae,Pu=ot,Nu=I,ku={message:({params:{discrError:e,tagName:t}})=>e===Fr.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ye._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Ou={keyword:"discriminator",type:"object",schemaType:"object",error:ku,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:i}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),u=t.const("tag",(0,Ye._)`${r}${(0,Ye.getProperty)(a)}`);t.if((0,Ye._)`typeof ${u} == "string"`,()=>d(),()=>e.error(!1,{discrError:Fr.DiscrError.Tag,tag:u,tagName:a})),e.ok(c);function d(){const b=v();t.if(!1);for(const m in b)t.elseIf((0,Ye._)`${u} === ${m}`),t.assign(c,f(b[m]));t.else(),e.error(!1,{discrError:Fr.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function f(b){const m=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:b},m);return e.mergeEvaluated(g,Ye.Name),m}function v(){var b;const m={},g=h(s);let y=!0;for(let S=0;S<i.length;S++){let N=i[S];if(N?.$ref&&!(0,Nu.schemaHasRulesButRef)(N,o.self.RULES)){const R=N.$ref;if(N=bs.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,R),N instanceof bs.SchemaEnv&&(N=N.schema),N===void 0)throw new Pu.default(o.opts.uriResolver,o.baseId,R)}const O=(b=N?.properties)===null||b===void 0?void 0:b[a];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(g||h(N)),_(O,S)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return m;function h({required:S}){return Array.isArray(S)&&S.includes(a)}function _(S,N){if(S.const)P(S.const,N);else if(S.enum)for(const O of S.enum)P(O,N);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function P(S,N){if(typeof S!="string"||S in m)throw new Error(`discriminator: "${a}" values must be unique strings`);m[S]=N}}}};zn.default=Ou;const ju="http://json-schema.org/draft-07/schema#",Iu="http://json-schema.org/draft-07/schema#",Ru="Core schema meta-schema",Tu={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Mu=["object","boolean"],Cu={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Du={$schema:ju,$id:Iu,title:Ru,definitions:Tu,type:Mu,properties:Cu,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Ms,n=dn,s=zn,o=Du,i=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(m,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var u=_e;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=H;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var f=Ot;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var v=ot;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return v.default}})})(Dr,Dr.exports);const Au=Bo(Dr.exports),Vu=0xcbf29ce484222325n,Lu=0x84222325cbf29ce4n,qu=0x100000001b3n,Hu=(1n<<64n)-1n,Ss=(e,t)=>{let r=t;for(let n=0;n<e.length;n+=1)r^=BigInt(e.charCodeAt(n)),r=r*qu&Hu;return r},Es=e=>e.toString(16).padStart(16,"0"),lr=(...e)=>{const t=JSON.stringify(e),r=Ss(t,Vu),n=Ss(t,Lu);return`${Es(r)}${Es(n)}`},Ee={type:"string"},zu={type:"number"},xe=(e,t={})=>({type:"object",properties:e,required:Object.keys(e),...t}),je=e=>JSON.stringify(e,null,2),st=e=>JSON.parse(e),Io=(e,t)=>{const r=new Au().compile(t);if(r(e))return!0;throw new Error(r.errors?.map(n=>n.message).join(", ")||"Invalid data")};function de({schemaHash:e,data:t}){if(e==="0"&&je(t)!="{}")throw new Error("schema hash is 0 but data is not empty :"+je(t));return lr(e,t)}function he(e,t,r){return{schemaHash:de(t),data:{...e?{title:e}:{},...r}}}const De={schemaHash:"0",data:{}},It=he("script_schema",De,xe({title:Ee,code:Ee})),Ro=he("script_result_schema",De,xe({title:Ee,script:"#"+de(It),content:{}},{title:"script_result_schema"})),To=he("titled_schema",De,xe({title:Ee})),Fn=he("has_titled_child",De,xe({child:xe({title:Ee})})),Kn=he("a titled",To,{title:"im child"}),Fu=he("titled1",Fn,{child:Kn.data}),Ku=he("titled2",Fn,{child:`#${de(Kn)}`}),Rt=he("function schema",De,xe({title:Ee,code:Ee},{title:"function_schema",required:["code"]})),Mo=he("function schema",De,xe({title:Ee,code:Ee},{title:"server_function",required:["code"]})),Uu=he("example function",Rt,{title:"example function",inputs:["a","b"],code:"return a + b"});he("",De,Ee),he("",De,zu);const ze=e=>typeof e=="string"&&/^#([a-f0-9]+)$/.exec(e),vt=async(e,t)=>{if(typeof e=="string"){const r=ze(e);if(!r)return e;const n=r[1];return vt(await t(n),t)}return Array.isArray(e)?Promise.all(e.map(r=>vt(r,t))):e&&typeof e=="object"?Object.fromEntries(await Promise.all(Object.entries(e).map(async([r,n])=>[r,await vt(n,t)]))):e},xu=(e,t,r)=>typeof e=="number"?t(e):(e[0]=="#"&&(e=e.slice(1)),e.length==32?r(e):t(Number(e))),Un="jsonview",Kr={local:"http://localhost:3000",prod:"https://maincloud.spacetimedb.com"},Ju=()=>["localhost","127.0.0.1"].includes(window.location.hostname),Gu=()=>{const e=new URLSearchParams(window.location.search).get("db"),t=localStorage.getItem("db_preset");return e&&Kr[e]?(localStorage.setItem("db_preset",e),e):t&&Kr[t]?t:Ju()?"local":"prod"},Bu=Gu();let Co=Kr[Bu],tr=localStorage.getItem("access_token");const ur=(e,t,r=null)=>new Promise(n=>setTimeout(()=>{n(fetch(`${Co}${e}`,{method:t,headers:{"Content-Type":"application/json",...tr?{Authorization:`Bearer ${tr}`}:{}},body:r}))},0)),xn=async(e,t)=>{const r=await ur(`/v1/database/${Un}/call/${e}`,"POST",JSON.stringify(t));if(!r.ok)throw new Error(await r.text());return r.text()},pe=async(e,t=!1,r=null)=>{if(t&&r!=null){const s=await pe("select count from note_count");let o=Math.max(0,Number(s.rows[0][0])-r);e=e+` where id > ${o}`}const n=await(await ur(`/v1/database/${Un}/sql`,"POST",e)).text();try{const s=JSON.parse(n);s.length>1&&console.warn("multiple rows returned, TODO: handle this");const{schema:o,rows:i}=s[0];return{names:o.elements.map(a=>a.name.some),rows:t?i.reverse():i}}catch(s){return ue(Z(n)),{names:["error"],rows:[s.message]}}},Do=e=>{const t=new Map,r=lr(e.toString()+":cached:"+Co);return async n=>{const s=r+JSON.stringify(n);if(t.has(s))return t.get(s);const o=localStorage.getItem(s);if(o){const a=JSON.parse(o);return t.set(s,a),a}const i=await e(n);return localStorage.setItem(s,JSON.stringify(i)),t.set(s,i),i}},Jn=async(e,t)=>{let r=await Et(e);const n=await ur(`/v1/database/${Un}/call/add_note`,"POST",JSON.stringify({schemaHash:r,data:je(t)}));if(!n.ok)throw new Error(await n.text());return"#"+de({schemaHash:r,data:t})},dr=Do(async e=>{const t=await pe(xu(e,n=>`select * from note where id = ${n}`,n=>`select * from note where hash = '${n}'`)),r=t.rows[0];if(!r)throw new Error("note not found");return Object.fromEntries(t.names.map((n,s)=>[n,r[s]]))}),Tt=e=>dr(e).then(t=>t.id),Et=e=>dr(e).then(t=>t.hash),Ao=e=>dr(e).then(t=>t.schemaId),fe=Do(async e=>{const t=await dr(e);return{schemaHash:await Et(t.schemaId),data:st(t.data)}});tr===null&&ur("/v1/identity","POST").then(e=>e.json()).then(e=>{tr=e.token});const Wu=async e=>{try{const t=s=>fe(s).then(o=>o.data),r=typeof e.data=="string"?JSON.parse(e.data):e.data,n=(await fe(e.schemaHash)).data;return Io(await vt(r,t),await vt(n,t))}catch(t){throw new Error(t.message||t)}},Ur=e=>fe(e).then(async t=>{let r=t.data,n=typeof r=="string"?r:JSON.stringify(r);return n=n.replace(/\n/g," "),`#${await Tt(e)}`+(r?.title?`:${r.title}`:typeof r=="string"||typeof r=="number"?`:${n.slice(0,20)}`:"")}),Gn=e=>fe(e).then(async t=>{let r=t.data,n="",s=(o,i)=>{let a="  ".repeat(i);if(typeof o=="string")if(o.length>60||o.includes(`
`)){const u=o.split(`
`);n+=`
`+a+"`",u.forEach((d,f)=>{n+=(f===0?"":`
`+a)+d}),n+="`"}else n+=" "+o;else typeof o=="number"?n+=" "+o:typeof o=="object"&&Object.entries(o).forEach(([c,u])=>{n+=`
`+a+c+":",s(u,i+1)})};return s(r,0),n}),Bn=(e,t,r={})=>{let n=tt(t??`#${e}`);const s=typeof e=="string"?e.replace(/^#/,""):String(e);return t===void 0&&Ur(e).then(o=>n.innerHTML=o),Bt(`/${s}`,n,r)},Qu=e=>JSON.stringify(e,null,2),Fe=A(Z("loading...")),fr=(e,t)=>{const r=[...t].sort((i,a)=>(a.count||0)-(i.count||0)||(Number(a.id)||0)-(Number(i.id)||0)),n=i=>{Fe.innerHTML="";const a=A(L({display:"flex",flexDirection:"column",gap:"0.5em"}));i.slice(0,10).forEach(c=>{const u=c.count!==void 0?` (${c.count})`:"",d=A(L({display:"flex",gap:"0.5em",alignItems:"center"}),G(`#${c.id}${c.title?` : ${c.title}`:""}${u}`,{style:{textAlign:"left",width:"100%"},onclick:()=>{e(c),o.remove()}}),G("preview",{onclick:()=>window.open(`/${c.hash}`,"_blank","noopener"),style:{fontSize:"0.85em",padding:"0.2em 0.4em"}}));a.appendChild(d)}),Fe.appendChild(a)};n(r);const s=bt("",{placeholder:"search id, title, hash"});s.oninput=()=>{const i=s.value.trim().toLowerCase();if(!i)return n(r);const a=r.filter(u=>u.id.toLowerCase().includes(i));if(a.length)return n(a);const c=r.filter(u=>u.title.toLowerCase().includes(i));return n(c)};let o=ue(A(L({display:"flex",flexDirection:"column",gap:"0.5em"}),s,Fe))},Vo=(e,t,r="change schema")=>G(r,{onclick:()=>{e().then(n=>{fr(t,n)}).catch(n=>{Fe.innerHTML="",Fe.appendChild(Z(n.message||"failed to load schemas"))})}}),ht=(e,t,r)=>{let{type:n,properties:s,items:o}=e;if(!n){let a=ht({type:"string"},()=>{try{let d=a.getData(),f=st(d);u.innerHTML="",c.onclick=()=>a.setData(je(f))}catch(d){u.innerHTML=String(d)}}),c=G("format"),u=tt("hello",L({color:"red",margin:"0.5em"}));return{element:A(a.element,A(c,u)),getData:()=>st(a.getData()),setData:d=>a.setData(je(d))}}const i=a=>{let c="";const u=tt();u.style.display="none",u.style.cursor=r?"pointer":"default",u.style.textDecoration=r?"underline":"none",u.onclick=m=>{if(r&&ze(c)){m.preventDefault(),r(c.slice(1));return}c="",u.style.display="none",a.element.style.display="",t()};const d=m=>{c=m,ze(c)?(u.innerText=c,u.style.display="",a.element.style.display="none"):(u.style.display="none",a.element.style.display=""),t()},f=()=>pe("select id, data, hash from note",!0,200).then(m=>m.rows.map(g=>{let y="";try{const h=JSON.parse(String(g[1]??""));y=h?.title?String(h.title):""}catch{}return{id:String(g[0]),title:y,hash:String(g[2]??"")}})),b=G("\u{1F517}",{onclick:()=>{f().then(m=>{fr(g=>d(`#${g.hash}`),m)}).catch(m=>{Fe.innerHTML="",Fe.appendChild(Z(m.message||"failed to load notes"))})},style:{background:"transparent",border:"none",padding:"0 0.1em",cursor:"pointer"}});return{element:A(L({display:"inline-flex",alignItems:"center",gap:"0.25em"}),b,u,a.element),getData:()=>ze(c)?c:a.getData(),setData:m=>{typeof m=="string"&&ze(m)?d(m):(d(""),a.setData(m))}}};if(n=="string"){let a=Br();a.rows=1,a.style.resize="none",a.style.overflow="hidden",a.style.verticalAlign="middle",a.style.boxSizing="content-box";const c=50,u=A(L({display:"none",position:"absolute",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)",zIndex:"1000",maxHeight:"200px",overflowY:"auto"})),d=()=>pe("select id, data, hash from note",!0,200).then(m=>m.rows.map(g=>{let y="";try{const h=JSON.parse(String(g[1]??""));y=h?.title?String(h.title):""}catch{}return{id:String(g[0]),title:y,hash:String(g[2]??"")}})),f=()=>{const m=a.selectionStart??0,g=a.value,y=g.lastIndexOf("#",m-1);if(y<0){u.style.display="none";return}const h=g.slice(y+1,m);if(!/^[A-Za-z0-9]*$/.test(h)){u.style.display="none";return}d().then(_=>{const P=h.toLowerCase(),S=_.filter(N=>N.id.toLowerCase().includes(P)||N.title.toLowerCase().includes(P)).slice(0,8);if(u.innerHTML="",!S.length){u.style.display="none";return}S.forEach(N=>{u.appendChild(G(`#${N.id}${N.title?`: ${N.title}`:""}`,{onclick:()=>{const O=g.slice(0,y),R=g.slice(m);a.value=`${O}#${N.id}${R}`;const x=y+1+N.id.length;a.setSelectionRange(x,x),u.style.display="none",v()}}))}),u.style.display="block"})},v=()=>{a.style.height="0px",a.style.height=`${a.scrollHeight}px`;const m=a.value.split(`
`).reduce((g,y)=>Math.max(g,y.length),0);a.style.width=`${Math.max(c,m+1)}ch`,t()};a.oninput=()=>{v(),f()},a.onkeydown=m=>{m.key==="#"&&f()},requestAnimationFrame(v);const b=A(L({position:"relative",display:"inline-block"}),a,u);return i({element:b,getData:()=>a.value,setData:m=>{a.value=m,v()}})}if(n=="number"){let a=bt();return a.type="number",a.oninput=t,i({element:a,getData:()=>Number(a.value),setData:c=>{a.value=String(c)}})}if(n=="array"){let a=[],c=A();const u=f=>{const v=A(L({display:"flex",alignItems:"center",gap:"0.25em"}),G("-",{onclick:()=>{a=a.filter(b=>b!==f),v.remove(),t()}}),f.element);return v};let d=A(L({paddingLeft:"0.5em"}),c,G("+",{onclick:()=>{let f=ht(o,t);a.push(f),c.append(u(f)),t()}}));return i({element:d,getData:()=>a.map(f=>f.getData()),setData:f=>{a=f.map(v=>{let b=ht(o,t);return b.setData(v),c.append(u(b)),b})}})}if(n=="object"){const a=new Set(e.required||[]);let c=Object.entries(s).map(([u,d])=>({key:u,field:ht(d,t),box:bt()}));return i({element:A(c.map(({key:u,field:d,box:f})=>(f.type="checkbox",a.has(u)&&(f.checked=!0,f.disabled=!0),f.oninput=()=>t(),f.onchange=()=>{const v=f.checked||a.has(u);d.element.style.display=v?"":"none",t()},a.has(u)||(d.element.style.display="none"),Z(f,u,":",d.element)))),getData:()=>Object.fromEntries(c.filter(({key:u,field:d})=>a.has(u)||d.element.style.display!=="none").map(({key:u,field:d})=>[u,d.getData()])),setData:u=>{c.forEach(({key:d,field:f,box:v})=>{a.has(d)?f.element.style.display="":(v.checked=!1,f.element.style.display="none")}),Object.entries(u).forEach(([d,f])=>{const v=c.find(b=>b.key===d);v&&(v.field.setData(f),a.has(d)||(v.box.checked=!0,v.field.element.style.display=""))})}})}},Lo="$"+lr("openrouter");let zt=localStorage.getItem(Lo)||"";const qo=async(e,t,r="openai/gpt-4o")=>{zt===""&&await new Promise((o,i)=>{let a=bt(),c=ue(Z("Please enter your OpenRouter API key to use the LLM feature"),a);a.addEventListener("keydown",u=>{u.key=="Enter"&&(zt=a.value,localStorage.setItem(Lo,zt),o(),c.remove())})});const s=await(await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${await zt}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],response_format:{type:"json_schema",json_schema:{name:"response",schema:t}}})})).json();try{let o=JSON.parse(s.choices[0].message.content);return Io(o,t),o}catch{return s}},xr=new Map;let Yu=1;const Xu=e=>(...t)=>new Promise((r,n)=>{const s=Yu++;xr.set(s,{resolve:r,reject:n}),self.postMessage({type:"call",id:s,name:e,args:JSON.stringify(t)})}),Jr=["openrouter","getNote","addNote","callNote","remote"];self.onmessage=async e=>{const t=e.data||{};if(t.type==="response"){const s=xr.get(Number(t.id));if(!s)return;xr.delete(Number(t.id)),t.error?s.reject(t.error):s.resolve(t.result);return}if(t.type!=="run")return;const{code:r,input:n}=t;try{const o=await new Function("input",...Jr,`return (async () => {${r}})()`)(n,...Jr.map(Xu));self.postMessage({type:"run_result",ok:!0,result:o})}catch(s){self.postMessage({type:"run_result",ok:!1,error:String(s)})}};const Wn=async(e,...t)=>{const r=await fe(e);if(r.schemaHash!=de(Rt))throw new Error("can only call Function schema notes");const n=r.data,s={getNote:fe,addNote:Jn,call:Wn,remote:async(o,i)=>{const a=String(o).replace(/^#/,""),c=/^\d+$/.test(a)?Number(a):await Tt(a),u=i!==void 0?JSON.stringify(i):"null",d=await xn("run_note_async",{id:c,arg:u});try{return JSON.parse(d)}catch{return d}},openrouter:async(o,i)=>(ze(i)&&(i=(await fe(i)).data),qo(o,i)),hash:lr};return n.inputs&&n.inputs.length>0?new Function(...n.inputs,...Object.keys(s),`return (async () => {${n.code}})()`)(...t,...Object.values(s)):new Function("args",...Object.keys(s),`return (async () => {${n.code}})()`)(t.length===1?t[0]:t,...Object.values(s))},Zu={openrouter:async(e,t)=>(ze(t)&&(t=(await fe(t)).data),qo(e,t)),getNote:fe,addNote:Jn,callNote:Wn,remote:async(e,t)=>{const r=String(e).replace(/^#/,""),n=/^\d+$/.test(r)?BigInt(r):await Tt(r),s=await xn("run_note_async",{id:n,arg:JSON.stringify(t)});try{return JSON.parse(s)}catch{return s}}};for(let e of Jr)if(!Object.keys(Zu).includes(e))throw new Error("buildin missing but expected: "+e);const Ps=e=>{const t=tt(L({margin:"0.5em"})),r=/#([a-f0-9]+)/g;let n=0,s;for(;s=r.exec(e);){const o=s.index,i=s[1],a=/^\d+$/.test(i)?Number(i):i;o>n&&t.append(document.createTextNode(e.slice(n,o))),t.append(Bn(a)),n=o+s[0].length}return n<e.length&&t.append(document.createTextNode(e.slice(n))),t},ed=(e,t)=>{const r=A(L({display:"flex",flexDirection:"column",gap:"0.75em"}));return fe(e).then(async n=>{const s=await Tt(e),o=await Ao(e),i=n.data?.title??"",a=n.schemaHash===de(It),c=a?String(n.data.code||""):Qu(n.data);let u=localStorage.getItem("note_view_mode")==="overview";const d=A(L({fontFamily:"monospace",whiteSpace:"pre",marginTop:"1em",overflowX:"auto",paddingBottom:"0.5em"})),f=()=>{d.innerHTML="",u&&!a?Gn(e).then(m=>{d.append(pt(Ps(m)))}):d.append(Ps(c))},v=G(u?"json view":"overview",{onclick:()=>{u=!u,localStorage.setItem("note_view_mode",u?"overview":"json"),v.textContent=u?"json view":"overview",f()}});r.innerHTML="";const b=Gr(`${a?"Script":"Note"} #${s} ${i} `);if(n.schemaHash===de(Mo)){const m=G("run async",{onclick:async()=>{let g=localStorage.getItem("server_fun_arg")??"{}";const y=prompt("args as JSON (array or value)",g);if(localStorage.setItem("server_fun_arg",y),y!=null)try{m.textContent="running...";const h=await xn("run_note_async",{id:s,arg:y});let _=h;try{_=JSON.parse(h)}catch{}if(typeof _=="string")try{_=JSON.parse(_)}catch{}ue(ve("result"),pt(JSON.stringify(_,null,2)))}catch(h){ue(ve("ERROR"),Z(h.message||"run failed"))}finally{m.textContent="run async"}}});b.append(m)}if(n.schemaHash===de(Rt)){const m=G("run local",{onclick:async()=>{const y=n.data.code.includes("args");let h={};if(y){const _='{"a": 1, "b": 2}';let P=localStorage.getItem("local_fun_arg")??_;const S=prompt('args as JSON object (e.g., {"a": 5, "b": 3})',P);if(S==null)return;const N=S.trim();if(!N){ue(ve("ERROR"),Z("Args cannot be empty. Use {} for no arguments."));return}try{h=JSON.parse(N),localStorage.setItem("local_fun_arg",N)}catch(O){ue(ve("ERROR"),Z("Invalid JSON: "+O.message));return}}try{m.textContent="running...";const _=Array.isArray(h)?h:[h],P=await Wn(e,..._);ue(ve("result"),pt(JSON.stringify(P,null,2)))}catch(_){ue(ve("ERROR"),Z(_.message||"run failed"))}finally{m.textContent="run local"}}});b.append(m)}f(),r.append(b,a?"":Z("schema: ",Bn(o)),a?"":A(L({marginBottom:"0.5em"}),v),d,A(L({display:"flex",gap:"0.75em",alignItems:"center",paddingBottom:"0.5em"}),Bt(`/edit?id=${s}`,"edit"),Bt(`/deps/${e}`,"deps"),G("copy",{onclick:m=>navigator.clipboard.writeText(c).then(()=>m.target.textContent="copied").catch(g=>ue(ve("ERROR"),Z(g.message||"copy failed")))})))}),r},td=({query:e,navigate:t,onRow:r})=>{let n=100;const s="any",o=de(It),i=de(Ro);let a=null,c=new Map;const u=A(),d=A(L({display:"flex",gap:"0.5em",alignItems:"center",flexWrap:"wrap"}),G("any",{onclick:()=>m(s)}),G("function",{onclick:()=>m(de(Rt))}),G("script",{onclick:()=>m(o)}),G("script output",{onclick:()=>m(i)}),Vo(()=>Promise.all([e("select id, data, hash from note where schemaId = 0"),e("select schemaId from note")]).then(([P,S])=>{const N=new Map;return S.rows.forEach(O=>{const R=String(O[0]);N.set(R,(N.get(R)||0)+1)}),P.rows.map(O=>{let R="";try{const F=JSON.parse(String(O[1]??""));R=F?.title?String(F.title):""}catch{}const x=String(O[0]);return{id:x,title:R,hash:String(O[2]??""),count:N.get(x)||0}})}),P=>m(P.hash)));let f=s;const v=()=>e("select id, data, hash from note limit 200").then(P=>P.rows.map(S=>{let N="";try{N=JSON.parse(String(S[1]??""))?.title??""}catch{}return{id:String(S[0]),title:N,hash:String(S[2]??"")}})),b=()=>{v().then(P=>{fr(S=>t(`/${S.id}`),P)})},m=P=>{f=P,y()},g=P=>{u.innerHTML="";const S=A(L({display:"flex",flexDirection:"column",gap:"0.5em"}));[...P].reverse().forEach(O=>{const R={id:O[0],data:O[1]};r&&r(R),S.append(Bn(R.id))}),u.append(S)},y=async()=>{c.has(f)?g(c.get(f)):(u.innerHTML="",u.append(Z("running...")));let S=null;try{const W=await e("select count from note_count");S=Number(W.rows[0][0]),n=Math.max(50,S)}catch{}if(S!==null&&S===a&&c.has(f))return;S!==a&&(c.clear(),a=S);let N=null;if(f!==s&&(/^\d+$/.test(f)?N=Number(f):N=(await e(`select id from note where hash = '${f}'`)).rows[0]?.[0]??null),f!==s&&N===null){u.innerHTML="",u.append(Z("no matches"));return}const O=`id >= ${n-50} and id < ${n}`,x=`select id, data from note where ${N===null?O:`schemaId = ${N} and ${O}`} limit 50`,F=await e(x);c.set(f,F.rows),g(F.rows)},h=G("\u{1F50D} Search Notes",{onclick:b,style:{padding:"0.25em 0.5em",border:"1px solid #ccc",borderRadius:"0.25em",background:"inherit",color:"inherit",cursor:"pointer"}});return{root:A(L({display:"flex",flexDirection:"column",gap:"0.75em"}),A(L({display:"flex",gap:"0.5em",flexWrap:"wrap"}),Bt("/edit?new=1",{style:{textDecoration:"none",color:"inherit",fontWeight:"bold",border:"1px solid #ccc",borderRadius:"0.25em",padding:"0.25em 0.5em"}},"+ Add Note"),h),d,u),runQuery:y}},rd=()=>Promise.all([pe("select id, data, hash from note where schemaId = 0"),pe("select schemaId from note")]).then(([e,t])=>{const r=new Map;return t.rows.forEach(n=>r.set(String(n[0]),(r.get(String(n[0]))||0)+1)),e.rows.map(n=>{let s="";try{s=JSON.parse(String(n[1]??""))?.title??""}catch{}const o=String(n[0]);return{id:o,title:s,hash:String(n[2]??""),count:r.get(o)||0}})}),nd=()=>pe("select id, data, hash from note limit 200").then(e=>e.rows.map(t=>{let r="";try{r=JSON.parse(String(t[1]??""))?.title??""}catch{}return{id:String(t[0]),title:r,hash:String(t[2]??"")}})),sd=e=>{let t="";const r=rr({href:"/0",style:{textDecoration:"underline",color:"inherit"}},"view");r.onclick=c=>{c.metaKey||c.ctrlKey||(c.preventDefault(),history.pushState({},"",r.getAttribute("href")||"/"),window.dispatchEvent(new PopStateEvent("popstate")))};const n=pt(),s=()=>Gn(t).then(c=>n.innerHTML=c),o=c=>{c!==t&&(t=c,r.setAttribute("href",`/${c}`),e(c),s())},i=Vo(rd,c=>o(c.hash));return{root:A(L({padding:"1em",marginTop:"0.5em",borderRadius:"1em",border:"1px solid #ccc",background:"var(--background-color)"}),A(L({display:"flex",alignItems:"center",gap:"0.75em",flexWrap:"wrap"}),r,i),A(L({display:"flex",gap:"1em",alignItems:"flex-start"}),A(n))),setSchemaHash:o,getSchemaHash:()=>t}},od=({submit:e})=>{const t=de(It);let r="",n=null;const s=bt("",{placeholder:"script title",style:{display:"none",marginBottom:"0.5em",fontSize:"1.1em",padding:"0.4em 0.6em",color:"inherit",background:"inherit",border:"none",outline:"none",width:"100%"}}),o=Br(L({fontFamily:"monospace",minHeight:"12em",resize:"vertical",background:"inherit",color:"inherit",width:"100%"}));o.rows=10,o.cols=100;const i=document.createElement("p"),a=A(L({display:"none",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)"})),c=()=>r===t,u=()=>c()?{schemaHash:r,text:je({title:s.value,code:o.value})}:{schemaHash:r,text:o.value},d=()=>{o.style.height="auto",o.style.height=`${o.scrollHeight}px`},f=(S,N)=>{i.textContent=S,i.style.color=N};f("valid","green");const v=S=>{if(o.dispatchEvent(new Event("input")),(S.metaKey||S.ctrlKey)&&S.key.toLowerCase()==="s"){S.preventDefault(),_.click();return}if(S.key==="Enter"){S.preventDefault();const Q=o.selectionStart||0,re=o.selectionEnd||0,ce=o.value.slice(0,Q),ie=o.value.slice(re),Ie=ce.slice(ce.lastIndexOf(`
`)+1),Ae=Ie.match(/^\s*/)?.[0]||"",Je=/[\{\[]\s*$/.test(Ie)?"  ":"";o.value=`${ce}
${Ae}${Je}${ie}`;const Ge=Q+1+Ae.length+Je.length;o.setSelectionRange(Ge,Ge);return}const N={"{":"}","[":"]","(":")",'"':'"'};if(S.metaKey||S.ctrlKey||S.altKey||!(S.key in N))return;const O=o.selectionStart||0,R=o.selectionEnd||0;if(O===R&&o.value[O]===N[S.key]){S.preventDefault(),o.setSelectionRange(O+1,O+1);return}if(S.key==='"'&&O===R&&o.value[O-1]==="\\")return;S.preventDefault();const x=o.value.slice(0,O),F=o.value.slice(R),W=o.value.slice(O,R);o.value=`${x}${S.key}${W}${N[S.key]}${F}`,o.setSelectionRange(O+1+W.length,O+1+W.length)};o.onkeydown=v;const b=()=>n?Promise.resolve(n):nd().then(S=>n=S),m=()=>{const S=o.selectionStart??0,N=o.value,O=N.lastIndexOf("#",S-1);if(O<0){a.style.display="none";return}const R=N.slice(O+1,S);if(!/^[A-Za-z0-9]*$/.test(R)){a.style.display="none";return}b().then(x=>{const F=R.toLowerCase(),W=x.filter(Q=>Q.id.toLowerCase().includes(F)||Q.title.toLowerCase().includes(F)).slice(0,8);if(a.innerHTML="",!W.length){a.style.display="none";return}W.forEach(Q=>{a.appendChild(G(`#${Q.id}${Q.title?`: ${Q.title}`:""}`,{onclick:()=>{const re=N.slice(0,O),ce=N.slice(S);o.value=`${re}#${Q.id}${ce}`;const ie=O+1+Q.id.length;o.setSelectionRange(ie,ie),y(o.value),a.style.display="none"}}))}),a.style.display="block"})},g=async()=>{i.innerText="validating...",i.style.color="#666";try{await Wu({schemaHash:r,data:JSON.parse(u().text)}),f("valid","#2a3")}catch(S){f(S.message||"invalid json","#f66")}},y=S=>{o.value!==S&&(o.value=S),g(),localStorage.setItem("edit_draft",JSON.stringify(u()))},h=S=>{r=S,s.style.display=c()?"block":"none"};o.oninput=()=>{y(o.value),m(),d(),window.location.search.includes("new=1")&&history.replaceState({},"","/edit")};const _=G("format json (cmd+s)",{onclick:()=>{c()||y(je(st(o.value)))}}),P=A(s,o,a,A(L({display:"flex",gap:"0.5em",alignItems:"center"}),_,i),G("push",{onclick:()=>e({schemaHash:r,data:JSON.parse(u().text)})}));return d(),{root:P,setSchemaHash:h,getDraft:u,fill:({schemaHash:S,text:N})=>{if(h(S),c())try{const O=st(N);s.value=O.title??"",o.value=O.code??""}catch{o.value=N}else o.value=N;g(),localStorage.setItem("edit_draft",JSON.stringify(u())),o.focus()}}},ad=({submit:e})=>{let t,r;const n=A(),s=()=>({schemaHash:t,text:je(r.getData())}),o=()=>{localStorage.setItem("edit_draft",JSON.stringify(s()))},i=c=>(t=c,n.innerHTML="",fe(t).then(u=>{r=ht(u.data,o),n.innerHTML="",n.append(r.element,A(L({marginTop:"0.5em"}),G("push",{onclick:()=>e({schemaHash:t,data:r.getData()})})))})),a=c=>{r.setData(st(c)),o()};return{setSchemaHash:i,getDraft:s,fill:({schemaHash:c,text:u})=>i(c).then(()=>a(u)),root:n}},id=e=>{const t=od(e),r=ad(e);let n={plain:t,nice:r}[localStorage.editmode||"nice"]??r;const s=sd(d=>n.setSchemaHash(d));let o;const a=G("niceview",{onclick:()=>{o=n.getDraft(),n=n===r?t:r,n.fill(o),localStorage.editmode=n===r?"nice":"plain",u()}}),c=A(),u=()=>{c.innerHTML="",c.append(a,n.root,s.root)};return u(),{fill:d=>{o=d,s.setSchemaHash(d.schemaHash),n.fill(d)},root:c}},cd=({query:e,onRow:t})=>{const r="dashboard_sql",n=localStorage.getItem(r),s=Br(L({fontFamily:"monospace",padding:".5em"}),n||"select id, data from note limit 50");s.rows=2,s.cols=100,s.onkeydown=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&(d.preventDefault(),a())},s.oninput=()=>{localStorage.setItem(r,s.value)};const o=A(),i=d=>{if(typeof d=="bigint")return d.toString();if(typeof d=="number"){const f=String(d);return f.includes("e")||f.includes("E")?d.toLocaleString("fullwide",{useGrouping:!1}):f}return String(d)},a=()=>{o.innerHTML="",o.append(Z("running...")),e(s.value).then(d=>{o.innerHTML="";const f=xo(L({borderCollapse:"collapse"}),Zn(d.names.map(v=>Go(L({border:"1px solid #ccc",padding:".5em"}),v))),...d.rows.map(v=>{const b={};return d.names.forEach((m,g)=>{b[m]=v[g]}),t&&t(b),Zn(...v.map(m=>{let g=i(m).replace(/[\n\r]/g,"");return g=g.length>20?g.substring(0,20)+"...":g,Jo(L({border:"1px solid #ccc",padding:".5em"}),g)}))}));o.append(f)})},c=A(L({display:"flex",alignItems:"center",gap:"0.5em"}),Z(L({opacity:"0.6",margin:"0"}),"SQL console:"),G("run",{onclick:a,style:{fontSize:"0.85em",padding:"0.2em 0.5em"}}));return{root:A(L({display:"flex",flexDirection:"column",gap:"0.75em"}),Gr("SQL"),c,s,o),runQuery:a}},Pt=(e,t)=>(e.insertAdjacentHTML("beforeend",t),e.lastElementChild),Nt=(e,t)=>{if(t.x>1||t.y>1)return t;const{width:r,height:n}=e.getBoundingClientRect();return{x:t.x*r,y:t.y*n}},Ns=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2,curvature:i=.4}=n,a=Nt(e,t),c=Nt(e,r),u=Math.max(10,Math.abs(c.x-a.x)*i);Pt(e,`<path d="M ${a.x} ${a.y} C ${a.x+u} ${a.y} ${c.x-u} ${c.y} ${c.x} ${c.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const d=10,f=c.x-d,v=c.y-d*.5,b=c.x-d,m=c.y+d*.5;return Pt(e,`<path d="M ${c.x} ${c.y} L ${f} ${v} M ${c.x} ${c.y} L ${b} ${m}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},ld=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2}=n,i=Nt(e,t),a=Nt(e,r);Pt(e,`<path d="M ${i.x} ${i.y} L ${a.x} ${a.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const c=10,u=a.x-c*.5,d=a.y-c,f=a.x+c*.5,v=a.y-c;return Pt(e,`<path d="M ${a.x} ${a.y} L ${u} ${d} M ${a.x} ${a.y} L ${f} ${v}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},ks=(e,t,r)=>{const s=Nt(e,t),o=Pt(e,`<g><text x="${s.x}" y="${s.y}" dominant-baseline="middle" text-anchor="middle" fill="var(--color)" font-size="14" cursor="pointer" font-family="sans-serif">${r}</text></g>`),i=o?.querySelector("text"),a=5,u=i.getBBox().height+a*2,d=s.x-220/2,f=s.y-u/2;return o.insertAdjacentHTML("afterbegin",`<rect x="${d}" y="${f}" width="${220}" height="${u}" rx="2" ry="2" fill="var(--background-color)" cursor="pointer" stroke="var(--color)" stroke-width="2"></rect>`),{node:o,rect:{x:d,y:f,width:220,height:u}}},ud=(e,t,r=10)=>{const n=[],s=[];e.forEach(i=>{const a=Number(i[0]),c=i[1]||[];c.some(u=>Number(u)===Number(t))&&n.push(a),a===Number(t)&&s.push(...c)});const o=i=>[...new Set(i)];return{currentId:t,inputs:o(n).slice(0,r),outputs:o(s).slice(0,r)}},dd=({query:e,navigate:t})=>{const r=A(L({display:"flex",flexDirection:"column",gap:"0.75em"})),n=A(L({width:"100%",minHeight:"320px"})),s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=pt();s.setAttribute("width","100%"),s.setAttribute("height","320"),n.append(s,o);const i=()=>Promise.all([pe("select id, data, hash from note where schemaId = 0"),pe("select schemaId from note")]).then(([c,u])=>{const d=new Map;return u.rows.forEach(f=>{const v=String(f[0]);d.set(v,(d.get(v)||0)+1)}),c.rows.map(f=>{let v="";try{const m=JSON.parse(String(f[1]??""));v=m?.title?String(m.title):""}catch{}const b=String(f[0]);return{id:b,title:v,hash:String(f[2]??""),count:d.get(b)||0}})});r.append(Gr("Dependencies"),n);const a=async c=>{if(s.innerHTML="",!c){i().then(O=>fr(R=>{window.history.pushState({},"",`/deps/${R.id}`),a(R.id)},O));return}const u=await Tt(c),d=await Ao(c),f=await e("select to, from from links"),v=ud(f.rows,u);v.inputs=v.inputs.filter(O=>O!=d);const b=[{ids:v.inputs,x:.2},{ids:[v.currentId],x:.5},{ids:v.outputs,x:.8}],m=new Map;await Promise.all(b.flatMap(O=>O.ids.map(async R=>{const x=await Ur(R).then(F=>F.slice(0,15)).catch(()=>`#${R}`);m.set(R,x)})));const g=await Ur(d).then(O=>O.slice(0,15)).catch(()=>`#${d}`);m.set(d,g);const y=new Map;b.forEach(({ids:O,x:R})=>{const x=Math.max(O.length,1);O.forEach((F,W)=>{const Q=x===1?.5:.2+.6*(W+.5)/x,re=ks(s,{x:R,y:Q},m.get(F)||`#${F}`);re.node.onclick=()=>{F===v.currentId?(window.history.pushState({},"",`/${F}`),t(`/${F}`)):(window.history.pushState({},"",`/deps/${F}`),a(F))},y.set(F,re.rect)})});const h=ks(s,{x:.5,y:.1},m.get(d)||`#${d}`);h.node.onclick=()=>{window.history.pushState({},"",`/deps/${d}`),a(d)};const _=h.rect,P=(O,R)=>({x:R==="left"?O.x:O.x+O.width,y:O.y+O.height/2}),S=(O,R)=>({x:O.x+O.width/2,y:R==="top"?O.y:O.y+O.height}),N=y.get(v.currentId);N&&(v.inputs.forEach(O=>{const R=y.get(O);R&&Ns(s,P(R,"right"),P(N,"left"))}),v.outputs.forEach(O=>{const R=y.get(O);R&&Ns(s,P(N,"right"),P(R,"left"))}),_&&ld(s,S(_,"bottom"),S(N,"top"))),Gn(v.currentId).then(O=>{o.innerHTML=O})};return{root:r,render:a}};let Ho=()=>{},Gt=null,wt=null,Os=null,hr=()=>{};const zo=document.body,Xe=e=>wt&&(wt.innerHTML="",wt.appendChild(e)),Mt=e=>(history.pushState({},"",e),hr()),fd=async e=>{try{const t=await Jn(e.schemaHash,e.data),r=typeof t=="string"?t.slice(1):String(await Et(t));Mt(`/${r}`)}catch(t){ue(ve("ERROR"),Z(t.message||"failed to add note"))}},js=e=>Xe(ed(e)),hd=e=>e?e.startsWith("deps/")?"/deps":`/${e}`:"/";hr=()=>{const e=window.location.pathname.replace(/^\/+/,"");if(console.log(e),Fo.forEach(t=>{t.style.setProperty("opacity",t.pathname===hd(e)?"1":"0.5")}),e==="edit"){Xe(Ko.root);const t=new URLSearchParams(window.location.search),r=t.get("id");if(t.get("new")==="1"&&localStorage.removeItem("edit_draft"),r===null){const s=localStorage.getItem("edit_draft");if(s&&s!==Os){Os=s;try{const o=JSON.parse(s);Gt(o)}catch{}}else Et(0).then(o=>Gt({schemaHash:o,text:"{}"})).catch(()=>{})}else fe(Number(r)).then(s=>Gt({schemaHash:s.schemaHash,text:je(s.data)})).catch(s=>ue(ve("ERROR"),Z(s.message)));window.location.search&&history.replaceState({},"","/edit")}else e?e==="sql"?Xe(md.root):e.startsWith("deps")?(Xe(Is.root),Is.render(e.slice(5)||Cr)):Number.isFinite(Number(e))?Et(Number(e)).then(t=>{Cr=String(t),js(t)}):(Cr=e,js(e)):(Xe(Qn.root),Ho())};const pd=L({padding:"1.5em",margin:".5em",borderRadius:"1em",background:"var(--background-color)",color:"var(--color)",border:"1px solid #ccc"});let Cr=null,Fo=[["Dashboard","/"],["Edit","/edit"],["SQL","/sql"],["Deps","/deps"]].map(([e,t])=>rr(L({textDecoration:"none",color:"inherit",fontWeight:"bold"}),{href:t,onclick:r=>{r.metaKey||(r.preventDefault(),Mt(t))}},e));zo.appendChild(A(L({display:"flex",flexDirection:"column",gap:"0.75em",padding:"1em"}),rr(L({textDecoration:"none",color:"inherit"}),ve("Json View"),{href:"/",onclick:e=>{e.preventDefault(),Mt("/")}}),A(L({display:"flex",gap:"1em"}),Fo)));const Qn=td({query:pe,navigate:Mt}),Ko=id({submit:fd});Gt=Ko.fill;const md=cd({query:pe}),Is=dd({query:pe,navigate:Mt});wt=A(pd);zo.appendChild(wt);Ho=Qn.runQuery;Xe(Qn.root);hr();window.addEventListener("popstate",hr);
