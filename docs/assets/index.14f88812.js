(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const _r=(e,t,r="",n)=>{const s=document.createElement(e);return s.innerText=t,n&&Object.entries(n).forEach(([o,c])=>{o==="parent"&&c.appendChild(s),o==="children"?c.forEach(a=>s.appendChild(a)):o==="eventListeners"?Object.entries(c).forEach(([a,i])=>{s.addEventListener(a,i)}):o==="color"||o==="background"?s.style[o]=c:o==="style"?Object.entries(c).forEach(([a,i])=>{a=a.replace(/([A-Z])/g,"-$1").toLowerCase(),s.style.setProperty(a,i)}):o==="class"?s.classList.add(...c.split(".").filter(a=>a)):o.startsWith("data-")?s.setAttribute(o,c):s[o]=c}),s},_s=(e,...t)=>{let r=[],n={};const s=o=>{if(typeof o=="string")r.push(_r("span",o));else if(typeof o=="number")r.push(_r("span",o.toString()));else if(o instanceof Promise){const c=it();o.then(a=>{c.innerHTML="",c.appendChild(it(a))}),r.push(c)}else o instanceof HTMLElement?r.push(o):o instanceof Array?o.forEach(s):n={...n,...o}};for(let o of t)s(o);return _r(e,"","",{...n,children:r})},Se=e=>(...t)=>_s(e,...t),oe=Se("p"),Ie=Se("h2"),Vr=Se("h3"),q=Se("div"),_t=Se("pre"),re=Se("button"),sr=Se("a"),Yt=(e,t=null,...r)=>sr(t??e,{href:e,onclick:n=>{n.metaKey||n.ctrlKey||(n.preventDefault(),history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate")))},style:{color:"inherit",textDecoration:"none",border:"1px solid #ccc",padding:"0.1em",borderRadius:"0.25em"}},...r),it=Se("span"),$o=Se("table"),zn=Se("tr"),_o=Se("td"),vo=Se("th"),z=(...e)=>({style:Object.assign({},...e)}),vs=(e,t)=>{const r=t.filter(s=>typeof s=="string").join(" "),n=_s(e,...t);return n.value=r,n},Nt=(...e)=>vs("input",e),Lr=(...e)=>vs("textarea",e),$e=(...e)=>{const t=q({style:{background:"var(--background-color)",color:"var(--color)",padding:"1em",paddingBottom:"2em",borderRadius:"1em",zIndex:"2000",overflowY:"scroll"}},...e),r=q({style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(166, 166, 166, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"2000"}});r.appendChild(t),document.body.appendChild(r);const n=()=>{r.remove(),document.removeEventListener("keydown",s)},s=o=>{o.key==="Escape"&&n()};return r.onclick=n,document.addEventListener("keydown",s),t.onclick=o=>{o.stopPropagation()},r};function wo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pr={exports:{}},ws={},Ce={},xe={},Rt={},U={},kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(w){if(super(),!e.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((k,P)=>`${k}${P}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((k,P)=>(P instanceof r&&(k[P.str]=(k[P.str]||0)+1),k),{})}}e._Code=n,e.nil=new n("");function s(h,...w){const k=[h[0]];let P=0;for(;P<w.length;)a(k,w[P]),k.push(h[++P]);return new n(k)}e._=s;const o=new n("+");function c(h,...w){const k=[_(h[0])];let P=0;for(;P<w.length;)k.push(o),a(k,w[P]),k.push(o,_(h[++P]));return i(k),new n(k)}e.str=c;function a(h,w){w instanceof n?h.push(...w._items):w instanceof r?h.push(w):h.push(f(w))}e.addCodeArg=a;function i(h){let w=1;for(;w<h.length-1;){if(h[w]===o){const k=l(h[w-1],h[w+1]);if(k!==void 0){h.splice(w-1,3,k);continue}h[w++]="+"}w++}}function l(h,w){if(w==='""')return h;if(h==='""')return w;if(typeof h=="string")return w instanceof r||h[h.length-1]!=='"'?void 0:typeof w!="string"?`${h.slice(0,-1)}${w}"`:w[0]==='"'?h.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(h instanceof r))return`"${h}${w.slice(1)}`}function d(h,w){return w.emptyStr()?h:h.emptyStr()?w:c`${h}${w}`}e.strConcat=d;function f(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:_(Array.isArray(h)?h.join(","):h)}function g(h){return new n(_(h))}e.stringify=g;function _(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=_;function p(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new n(`.${h}`):s`[${h}]`}e.getProperty=p;function $(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new n(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=$;function y(h){return new n(h.toString())}e.regexpCode=y})(kt);var Nr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=kt;class r extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var n;(function(i){i[i.Started=0]="Started",i[i.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:l,parent:d}={}){this._names={},this._prefixes=l,this._parent=d}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const d=this._names[l]||this._nameGroup(l);return`${l}${d.index++}`}_nameGroup(l){var d,f;if(((f=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||f===void 0?void 0:f.has(l))||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=s;class o extends t.Name{constructor(l,d){super(d),this.prefix=l}setValue(l,{property:d,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(d)}[${f}]`}}e.ValueScopeName=o;const c=(0,t._)`\n`;class a extends s{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?c:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,d){var f;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const g=this.toName(l),{prefix:_}=g,p=(f=d.key)!==null&&f!==void 0?f:d.ref;let $=this._values[_];if($){const w=$.get(p);if(w)return w}else $=this._values[_]=new Map;$.set(p,g);const y=this._scope[_]||(this._scope[_]=[]),h=y.length;return y[h]=d.ref,g.setValue(d,{property:_,itemIndex:h}),g}getValue(l,d){const f=this._values[l];if(!!f)return f.get(d)}scopeRefs(l,d=this._values){return this._reduceValues(d,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,d,f){return this._reduceValues(l,g=>{if(g.value===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return g.value.code},d,f)}_reduceValues(l,d,f={},g){let _=t.nil;for(const p in l){const $=l[p];if(!$)continue;const y=f[p]=f[p]||new Map;$.forEach(h=>{if(y.has(h))return;y.set(h,n.Started);let w=d(h);if(w){const k=this.opts.es5?e.varKinds.var:e.varKinds.const;_=(0,t._)`${_}${k} ${h} = ${w};${this.opts._n}`}else if(w=g?.(h))_=(0,t._)`${_}${w}${this.opts._n}`;else throw new r(h);y.set(h,n.Completed)})}return _}}e.ValueScope=a})(Nr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=kt,r=Nr;var n=kt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Nr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(u,m){return this}}class c extends o{constructor(u,m,N){super(),this.varKind=u,this.name=m,this.rhs=N}render({es5:u,_n:m}){const N=u?r.varKinds.var:this.varKind,C=this.rhs===void 0?"":` = ${this.rhs}`;return`${N} ${this.name}${C};`+m}optimizeNames(u,m){if(!!u[this.name.str])return this.rhs&&(this.rhs=Z(this.rhs,u,m)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(u,m,N){super(),this.lhs=u,this.rhs=m,this.sideEffects=N}render({_n:u}){return`${this.lhs} = ${this.rhs};`+u}optimizeNames(u,m){if(!(this.lhs instanceof t.Name&&!u[this.lhs.str]&&!this.sideEffects))return this.rhs=Z(this.rhs,u,m),this}get names(){const u=this.lhs instanceof t.Name?{}:{...this.lhs.names};return Y(u,this.rhs)}}class i extends a{constructor(u,m,N,C){super(u,N,C),this.op=m}render({_n:u}){return`${this.lhs} ${this.op}= ${this.rhs};`+u}}class l extends o{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`${this.label}:`+u}}class d extends o{constructor(u){super(),this.label=u,this.names={}}render({_n:u}){return`break${this.label?` ${this.label}`:""};`+u}}class f extends o{constructor(u){super(),this.error=u}render({_n:u}){return`throw ${this.error};`+u}get names(){return this.error.names}}class g extends o{constructor(u){super(),this.code=u}render({_n:u}){return`${this.code};`+u}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(u,m){return this.code=Z(this.code,u,m),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class _ extends o{constructor(u=[]){super(),this.nodes=u}render(u){return this.nodes.reduce((m,N)=>m+N.render(u),"")}optimizeNodes(){const{nodes:u}=this;let m=u.length;for(;m--;){const N=u[m].optimizeNodes();Array.isArray(N)?u.splice(m,1,...N):N?u[m]=N:u.splice(m,1)}return u.length>0?this:void 0}optimizeNames(u,m){const{nodes:N}=this;let C=N.length;for(;C--;){const L=N[C];L.optimizeNames(u,m)||(me(u,L.names),N.splice(C,1))}return N.length>0?this:void 0}get names(){return this.nodes.reduce((u,m)=>te(u,m.names),{})}}class p extends _{render(u){return"{"+u._n+super.render(u)+"}"+u._n}}class $ extends _{}class y extends p{}y.kind="else";class h extends p{constructor(u,m){super(m),this.condition=u}render(u){let m=`if(${this.condition})`+super.render(u);return this.else&&(m+="else "+this.else.render(u)),m}optimizeNodes(){super.optimizeNodes();const u=this.condition;if(u===!0)return this.nodes;let m=this.else;if(m){const N=m.optimizeNodes();m=this.else=Array.isArray(N)?new y(N):N}if(m)return u===!1?m instanceof h?m:m.nodes:this.nodes.length?this:new h(je(u),m instanceof h?[m]:m.nodes);if(!(u===!1||!this.nodes.length))return this}optimizeNames(u,m){var N;if(this.else=(N=this.else)===null||N===void 0?void 0:N.optimizeNames(u,m),!!(super.optimizeNames(u,m)||this.else))return this.condition=Z(this.condition,u,m),this}get names(){const u=super.names;return Y(u,this.condition),this.else&&te(u,this.else.names),u}}h.kind="if";class w extends p{}w.kind="for";class k extends w{constructor(u){super(),this.iteration=u}render(u){return`for(${this.iteration})`+super.render(u)}optimizeNames(u,m){if(!!super.optimizeNames(u,m))return this.iteration=Z(this.iteration,u,m),this}get names(){return te(super.names,this.iteration.names)}}class P extends w{constructor(u,m,N,C){super(),this.varKind=u,this.name=m,this.from=N,this.to=C}render(u){const m=u.es5?r.varKinds.var:this.varKind,{name:N,from:C,to:L}=this;return`for(${m} ${N}=${C}; ${N}<${L}; ${N}++)`+super.render(u)}get names(){const u=Y(super.names,this.from);return Y(u,this.to)}}class O extends w{constructor(u,m,N,C){super(),this.loop=u,this.varKind=m,this.name=N,this.iterable=C}render(u){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(u)}optimizeNames(u,m){if(!!super.optimizeNames(u,m))return this.iterable=Z(this.iterable,u,m),this}get names(){return te(super.names,this.iterable.names)}}class R extends p{constructor(u,m,N){super(),this.name=u,this.args=m,this.async=N}render(u){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(u)}}R.kind="func";class A extends _{render(u){return"return "+super.render(u)}}A.kind="return";class B extends p{render(u){let m="try"+super.render(u);return this.catch&&(m+=this.catch.render(u)),this.finally&&(m+=this.finally.render(u)),m}optimizeNodes(){var u,m;return super.optimizeNodes(),(u=this.catch)===null||u===void 0||u.optimizeNodes(),(m=this.finally)===null||m===void 0||m.optimizeNodes(),this}optimizeNames(u,m){var N,C;return super.optimizeNames(u,m),(N=this.catch)===null||N===void 0||N.optimizeNames(u,m),(C=this.finally)===null||C===void 0||C.optimizeNames(u,m),this}get names(){const u=super.names;return this.catch&&te(u,this.catch.names),this.finally&&te(u,this.finally.names),u}}class J extends p{constructor(u){super(),this.error=u}render(u){return`catch(${this.error})`+super.render(u)}}J.kind="catch";class W extends p{render(u){return"finally"+super.render(u)}}W.kind="finally";class Q{constructor(u,m={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...m,_n:m.lines?`
`:""},this._extScope=u,this._scope=new r.Scope({parent:u}),this._nodes=[new $]}toString(){return this._root.render(this.opts)}name(u){return this._scope.name(u)}scopeName(u){return this._extScope.name(u)}scopeValue(u,m){const N=this._extScope.value(u,m);return(this._values[N.prefix]||(this._values[N.prefix]=new Set)).add(N),N}getScopeValue(u,m){return this._extScope.getValue(u,m)}scopeRefs(u){return this._extScope.scopeRefs(u,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(u,m,N,C){const L=this._scope.toName(m);return N!==void 0&&C&&(this._constants[L.str]=N),this._leafNode(new c(u,L,N)),L}const(u,m,N){return this._def(r.varKinds.const,u,m,N)}let(u,m,N){return this._def(r.varKinds.let,u,m,N)}var(u,m,N){return this._def(r.varKinds.var,u,m,N)}assign(u,m,N){return this._leafNode(new a(u,m,N))}add(u,m){return this._leafNode(new i(u,e.operators.ADD,m))}code(u){return typeof u=="function"?u():u!==t.nil&&this._leafNode(new g(u)),this}object(...u){const m=["{"];for(const[N,C]of u)m.length>1&&m.push(","),m.push(N),(N!==C||this.opts.es5)&&(m.push(":"),(0,t.addCodeArg)(m,C));return m.push("}"),new t._Code(m)}if(u,m,N){if(this._blockNode(new h(u)),m&&N)this.code(m).else().code(N).endIf();else if(m)this.code(m).endIf();else if(N)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(u){return this._elseNode(new h(u))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(h,y)}_for(u,m){return this._blockNode(u),m&&this.code(m).endFor(),this}for(u,m){return this._for(new k(u),m)}forRange(u,m,N,C,L=this.opts.es5?r.varKinds.var:r.varKinds.let){const G=this._scope.toName(u);return this._for(new P(L,G,m,N),()=>C(G))}forOf(u,m,N,C=r.varKinds.const){const L=this._scope.toName(u);if(this.opts.es5){const G=m instanceof t.Name?m:this.var("_arr",m);return this.forRange("_i",0,(0,t._)`${G}.length`,x=>{this.var(L,(0,t._)`${G}[${x}]`),N(L)})}return this._for(new O("of",C,L,m),()=>N(L))}forIn(u,m,N,C=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(u,(0,t._)`Object.keys(${m})`,N);const L=this._scope.toName(u);return this._for(new O("in",C,L,m),()=>N(L))}endFor(){return this._endBlockNode(w)}label(u){return this._leafNode(new l(u))}break(u){return this._leafNode(new d(u))}return(u){const m=new A;if(this._blockNode(m),this.code(u),m.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(A)}try(u,m,N){if(!m&&!N)throw new Error('CodeGen: "try" without "catch" and "finally"');const C=new B;if(this._blockNode(C),this.code(u),m){const L=this.name("e");this._currNode=C.catch=new J(L),m(L)}return N&&(this._currNode=C.finally=new W,this.code(N)),this._endBlockNode(J,W)}throw(u){return this._leafNode(new f(u))}block(u,m){return this._blockStarts.push(this._nodes.length),u&&this.code(u).endBlock(m),this}endBlock(u){const m=this._blockStarts.pop();if(m===void 0)throw new Error("CodeGen: not in self-balancing block");const N=this._nodes.length-m;if(N<0||u!==void 0&&N!==u)throw new Error(`CodeGen: wrong number of nodes: ${N} vs ${u} expected`);return this._nodes.length=m,this}func(u,m=t.nil,N,C){return this._blockNode(new R(u,m,N)),C&&this.code(C).endFunc(),this}endFunc(){return this._endBlockNode(R)}optimize(u=1){for(;u-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(u){return this._currNode.nodes.push(u),this}_blockNode(u){this._currNode.nodes.push(u),this._nodes.push(u)}_endBlockNode(u,m){const N=this._currNode;if(N instanceof u||m&&N instanceof m)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${m?`${u.kind}/${m.kind}`:u.kind}"`)}_elseNode(u){const m=this._currNode;if(!(m instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=m.else=u,this}get _root(){return this._nodes[0]}get _currNode(){const u=this._nodes;return u[u.length-1]}set _currNode(u){const m=this._nodes;m[m.length-1]=u}}e.CodeGen=Q;function te(E,u){for(const m in u)E[m]=(E[m]||0)+(u[m]||0);return E}function Y(E,u){return u instanceof t._CodeOrName?te(E,u.names):E}function Z(E,u,m){if(E instanceof t.Name)return N(E);if(!C(E))return E;return new t._Code(E._items.reduce((L,G)=>(G instanceof t.Name&&(G=N(G)),G instanceof t._Code?L.push(...G._items):L.push(G),L),[]));function N(L){const G=m[L.str];return G===void 0||u[L.str]!==1?L:(delete u[L.str],G)}function C(L){return L instanceof t._Code&&L._items.some(G=>G instanceof t.Name&&u[G.str]===1&&m[G.str]!==void 0)}}function me(E,u){for(const m in u)E[m]=(E[m]||0)-(u[m]||0)}function je(E){return typeof E=="boolean"||typeof E=="number"||E===null?!E:(0,t._)`!${I(E)}`}e.not=je;const De=b(e.operators.AND);function He(...E){return E.reduce(De)}e.and=He;const et=b(e.operators.OR);function M(...E){return E.reduce(et)}e.or=M;function b(E){return(u,m)=>u===t.nil?m:m===t.nil?u:(0,t._)`${I(u)} ${E} ${I(m)}`}function I(E){return E instanceof t.Name?E:(0,t._)`(${E})`}})(U);var D={};Object.defineProperty(D,"__esModule",{value:!0});D.checkStrictMode=D.getErrorPath=D.Type=D.useFunc=D.setEvaluated=D.evaluatedPropsToName=D.mergeEvaluated=D.eachItem=D.unescapeJsonPointer=D.escapeJsonPointer=D.escapeFragment=D.unescapeFragment=D.schemaRefOrVal=D.schemaHasRulesButRef=D.schemaHasRules=D.checkUnknownRules=D.alwaysValidSchema=D.toHash=void 0;const X=U,bo=kt;function So(e){const t={};for(const r of e)t[r]=!0;return t}D.toHash=So;function Eo(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(bs(e,t),!Ss(t,e.self.RULES.all))}D.alwaysValidSchema=Eo;function bs(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Ns(e,`unknown keyword: "${o}"`)}D.checkUnknownRules=bs;function Ss(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}D.schemaHasRules=Ss;function Po(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}D.schemaHasRulesButRef=Po;function No({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,X._)`${r}`}return(0,X._)`${e}${t}${(0,X.getProperty)(n)}`}D.schemaRefOrVal=No;function ko(e){return Es(decodeURIComponent(e))}D.unescapeFragment=ko;function Oo(e){return encodeURIComponent(qr(e))}D.escapeFragment=Oo;function qr(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}D.escapeJsonPointer=qr;function Es(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}D.unescapeJsonPointer=Es;function jo(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}D.eachItem=jo;function Fn({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,c,a)=>{const i=c===void 0?o:c instanceof X.Name?(o instanceof X.Name?e(s,o,c):t(s,o,c),c):o instanceof X.Name?(t(s,c,o),o):r(o,c);return a===X.Name&&!(i instanceof X.Name)?n(s,i):i}}D.mergeEvaluated={props:Fn({mergeNames:(e,t,r)=>e.if((0,X._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,X._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,X._)`${r} || {}`).code((0,X._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,X._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,X._)`${r} || {}`),Hr(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Ps}),items:Fn({mergeNames:(e,t,r)=>e.if((0,X._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,X._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,X._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,X._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Ps(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,X._)`{}`);return t!==void 0&&Hr(e,r,t),r}D.evaluatedPropsToName=Ps;function Hr(e,t,r){Object.keys(r).forEach(n=>e.assign((0,X._)`${t}${(0,X.getProperty)(n)}`,!0))}D.setEvaluated=Hr;const Kn={};function Io(e,t){return e.scopeValue("func",{ref:t,code:Kn[t.code]||(Kn[t.code]=new bo._Code(t.code))})}D.useFunc=Io;var kr;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(kr||(D.Type=kr={}));function Ro(e,t,r){if(e instanceof X.Name){const n=t===kr.Num;return r?n?(0,X._)`"[" + ${e} + "]"`:(0,X._)`"['" + ${e} + "']"`:n?(0,X._)`"/" + ${e}`:(0,X._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,X.getProperty)(e).toString():"/"+qr(e)}D.getErrorPath=Ro;function Ns(e,t,r=e.opts.strictSchema){if(!!r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}D.checkStrictMode=Ns;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});const ue=U,To={data:new ue.Name("data"),valCxt:new ue.Name("valCxt"),instancePath:new ue.Name("instancePath"),parentData:new ue.Name("parentData"),parentDataProperty:new ue.Name("parentDataProperty"),rootData:new ue.Name("rootData"),dynamicAnchors:new ue.Name("dynamicAnchors"),vErrors:new ue.Name("vErrors"),errors:new ue.Name("errors"),this:new ue.Name("this"),self:new ue.Name("self"),scope:new ue.Name("scope"),json:new ue.Name("json"),jsonPos:new ue.Name("jsonPos"),jsonLen:new ue.Name("jsonLen"),jsonPart:new ue.Name("jsonPart")};Me.default=To;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=U,r=D,n=Me;e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:h})=>h?(0,t.str)`"${y}" keyword must be ${h} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function s(y,h=e.keywordError,w,k){const{it:P}=y,{gen:O,compositeRule:R,allErrors:A}=P,B=f(y,h,w);k??(R||A)?i(O,B):l(P,(0,t._)`[${B}]`)}e.reportError=s;function o(y,h=e.keywordError,w){const{it:k}=y,{gen:P,compositeRule:O,allErrors:R}=k,A=f(y,h,w);i(P,A),O||R||l(k,n.default.vErrors)}e.reportExtraError=o;function c(y,h){y.assign(n.default.errors,h),y.if((0,t._)`${n.default.vErrors} !== null`,()=>y.if(h,()=>y.assign((0,t._)`${n.default.vErrors}.length`,h),()=>y.assign(n.default.vErrors,null)))}e.resetErrorsCount=c;function a({gen:y,keyword:h,schemaValue:w,data:k,errsCount:P,it:O}){if(P===void 0)throw new Error("ajv implementation error");const R=y.name("err");y.forRange("i",P,n.default.errors,A=>{y.const(R,(0,t._)`${n.default.vErrors}[${A}]`),y.if((0,t._)`${R}.instancePath === undefined`,()=>y.assign((0,t._)`${R}.instancePath`,(0,t.strConcat)(n.default.instancePath,O.errorPath))),y.assign((0,t._)`${R}.schemaPath`,(0,t.str)`${O.errSchemaPath}/${h}`),O.opts.verbose&&(y.assign((0,t._)`${R}.schema`,w),y.assign((0,t._)`${R}.data`,k))})}e.extendErrors=a;function i(y,h){const w=y.const("err",h);y.if((0,t._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,t._)`[${w}]`),(0,t._)`${n.default.vErrors}.push(${w})`),y.code((0,t._)`${n.default.errors}++`)}function l(y,h){const{gen:w,validateName:k,schemaEnv:P}=y;P.$async?w.throw((0,t._)`new ${y.ValidationError}(${h})`):(w.assign((0,t._)`${k}.errors`,h),w.return(!1))}const d={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(y,h,w){const{createErrors:k}=y.it;return k===!1?(0,t._)`{}`:g(y,h,w)}function g(y,h,w={}){const{gen:k,it:P}=y,O=[_(P,w),p(y,w)];return $(y,h,O),k.object(...O)}function _({errorPath:y},{instancePath:h}){const w=h?(0,t.str)`${y}${(0,r.getErrorPath)(h,r.Type.Str)}`:y;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,w)]}function p({keyword:y,it:{errSchemaPath:h}},{schemaPath:w,parentSchema:k}){let P=k?h:(0,t.str)`${h}/${y}`;return w&&(P=(0,t.str)`${P}${(0,r.getErrorPath)(w,r.Type.Str)}`),[d.schemaPath,P]}function $(y,{params:h,message:w},k){const{keyword:P,data:O,schemaValue:R,it:A}=y,{opts:B,propertyName:J,topSchemaRef:W,schemaPath:Q}=A;k.push([d.keyword,P],[d.params,typeof h=="function"?h(y):h||(0,t._)`{}`]),B.messages&&k.push([d.message,typeof w=="function"?w(y):w]),B.verbose&&k.push([d.schema,R],[d.parentSchema,(0,t._)`${W}${Q}`],[n.default.data,O]),J&&k.push([d.propertyName,J])}})(Rt);var Un;function Mo(){if(Un)return xe;Un=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.boolOrEmptySchema=xe.topBoolOrEmptySchema=void 0;const e=Rt,t=U,r=Me,n={message:"boolean schema is false"};function s(a){const{gen:i,schema:l,validateName:d}=a;l===!1?c(a,!1):typeof l=="object"&&l.$async===!0?i.return(r.default.data):(i.assign((0,t._)`${d}.errors`,null),i.return(!0))}xe.topBoolOrEmptySchema=s;function o(a,i){const{gen:l,schema:d}=a;d===!1?(l.var(i,!1),c(a)):l.var(i,!0)}xe.boolOrEmptySchema=o;function c(a,i){const{gen:l,data:d}=a,f={gen:l,keyword:"false schema",data:d,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,n,void 0,i)}return xe}var se={},Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getRules=Ye.isJSONType=void 0;const Do=["string","number","integer","boolean","null","object","array"],Co=new Set(Do);function Ao(e){return typeof e=="string"&&Co.has(e)}Ye.isJSONType=Ao;function Vo(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ye.getRules=Vo;var Ae={},xn;function ks(){if(xn)return Ae;xn=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.shouldUseRule=Ae.shouldUseGroup=Ae.schemaHasRulesForType=void 0;function e({schema:n,self:s},o){const c=s.RULES.types[o];return c&&c!==!0&&t(n,c)}Ae.schemaHasRulesForType=e;function t(n,s){return s.rules.some(o=>r(n,o))}Ae.shouldUseGroup=t;function r(n,s){var o;return n[s.keyword]!==void 0||((o=s.definition.implements)===null||o===void 0?void 0:o.some(c=>n[c]!==void 0))}return Ae.shouldUseRule=r,Ae}Object.defineProperty(se,"__esModule",{value:!0});se.reportTypeError=se.checkDataTypes=se.checkDataType=se.coerceAndCheckDataType=se.getJSONTypes=se.getSchemaTypes=se.DataType=void 0;const Lo=Ye,qo=ks(),Ho=Rt,H=U,Os=D;var ot;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ot||(se.DataType=ot={}));function zo(e){const t=js(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}se.getSchemaTypes=zo;function js(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Lo.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}se.getJSONTypes=js;function Fo(e,t){const{gen:r,data:n,opts:s}=e,o=Ko(t,s.coerceTypes),c=t.length>0&&!(o.length===0&&t.length===1&&(0,qo.schemaHasRulesForType)(e,t[0]));if(c){const a=zr(t,n,s.strictNumbers,ot.Wrong);r.if(a,()=>{o.length?Uo(e,t,o):Fr(e)})}return c}se.coerceAndCheckDataType=Fo;const Is=new Set(["string","number","integer","boolean","null"]);function Ko(e,t){return t?e.filter(r=>Is.has(r)||t==="array"&&r==="array"):[]}function Uo(e,t,r){const{gen:n,data:s,opts:o}=e,c=n.let("dataType",(0,H._)`typeof ${s}`),a=n.let("coerced",(0,H._)`undefined`);o.coerceTypes==="array"&&n.if((0,H._)`${c} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,H._)`${s}[0]`).assign(c,(0,H._)`typeof ${s}`).if(zr(t,s,o.strictNumbers),()=>n.assign(a,s))),n.if((0,H._)`${a} !== undefined`);for(const l of r)(Is.has(l)||l==="array"&&o.coerceTypes==="array")&&i(l);n.else(),Fr(e),n.endIf(),n.if((0,H._)`${a} !== undefined`,()=>{n.assign(s,a),xo(e,a)});function i(l){switch(l){case"string":n.elseIf((0,H._)`${c} == "number" || ${c} == "boolean"`).assign(a,(0,H._)`"" + ${s}`).elseIf((0,H._)`${s} === null`).assign(a,(0,H._)`""`);return;case"number":n.elseIf((0,H._)`${c} == "boolean" || ${s} === null
              || (${c} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,H._)`+${s}`);return;case"integer":n.elseIf((0,H._)`${c} === "boolean" || ${s} === null
              || (${c} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,H._)`+${s}`);return;case"boolean":n.elseIf((0,H._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,H._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,H._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,H._)`${c} === "string" || ${c} === "number"
              || ${c} === "boolean" || ${s} === null`).assign(a,(0,H._)`[${s}]`)}}}function xo({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,H._)`${t} !== undefined`,()=>e.assign((0,H._)`${t}[${r}]`,n))}function Or(e,t,r,n=ot.Correct){const s=n===ot.Correct?H.operators.EQ:H.operators.NEQ;let o;switch(e){case"null":return(0,H._)`${t} ${s} null`;case"array":o=(0,H._)`Array.isArray(${t})`;break;case"object":o=(0,H._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=c((0,H._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=c();break;default:return(0,H._)`typeof ${t} ${s} ${e}`}return n===ot.Correct?o:(0,H.not)(o);function c(a=H.nil){return(0,H.and)((0,H._)`typeof ${t} == "number"`,a,r?(0,H._)`isFinite(${t})`:H.nil)}}se.checkDataType=Or;function zr(e,t,r,n){if(e.length===1)return Or(e[0],t,r,n);let s;const o=(0,Os.toHash)(e);if(o.array&&o.object){const c=(0,H._)`typeof ${t} != "object"`;s=o.null?c:(0,H._)`!${t} || ${c}`,delete o.null,delete o.array,delete o.object}else s=H.nil;o.number&&delete o.integer;for(const c in o)s=(0,H.and)(s,Or(c,t,r,n));return s}se.checkDataTypes=zr;const Jo={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,H._)`{type: ${e}}`:(0,H._)`{type: ${t}}`};function Fr(e){const t=Go(e);(0,Ho.reportError)(t,Jo)}se.reportTypeError=Fr;function Go(e){const{gen:t,data:r,schema:n}=e,s=(0,Os.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var pt={},Jn;function Bo(){if(Jn)return pt;Jn=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.assignDefaults=void 0;const e=U,t=D;function r(s,o){const{properties:c,items:a}=s.schema;if(o==="object"&&c)for(const i in c)n(s,i,c[i].default);else o==="array"&&Array.isArray(a)&&a.forEach((i,l)=>n(s,l,i.default))}pt.assignDefaults=r;function n(s,o,c){const{gen:a,compositeRule:i,data:l,opts:d}=s;if(c===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(o)}`;if(i){(0,t.checkStrictMode)(s,`default is ignored for: ${f}`);return}let g=(0,e._)`${f} === undefined`;d.useDefaults==="empty"&&(g=(0,e._)`${g} || ${f} === null || ${f} === ""`),a.if(g,(0,e._)`${f} = ${(0,e.stringify)(c)}`)}return pt}var Pe={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.validateUnion=K.validateArray=K.usePattern=K.callValidateCode=K.schemaProperties=K.allSchemaProperties=K.noPropertyInData=K.propertyInData=K.isOwnProperty=K.hasPropFunc=K.reportMissingProp=K.checkMissingProp=K.checkReportMissingProp=void 0;const ee=U,Kr=D,ze=Me,Wo=D;function Qo(e,t){const{gen:r,data:n,it:s}=e;r.if(xr(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ee._)`${t}`},!0),e.error()})}K.checkReportMissingProp=Qo;function Yo({gen:e,data:t,it:{opts:r}},n,s){return(0,ee.or)(...n.map(o=>(0,ee.and)(xr(e,t,o,r.ownProperties),(0,ee._)`${s} = ${o}`)))}K.checkMissingProp=Yo;function Xo(e,t){e.setParams({missingProperty:t},!0),e.error()}K.reportMissingProp=Xo;function Rs(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ee._)`Object.prototype.hasOwnProperty`})}K.hasPropFunc=Rs;function Ur(e,t,r){return(0,ee._)`${Rs(e)}.call(${t}, ${r})`}K.isOwnProperty=Ur;function Zo(e,t,r,n){const s=(0,ee._)`${t}${(0,ee.getProperty)(r)} !== undefined`;return n?(0,ee._)`${s} && ${Ur(e,t,r)}`:s}K.propertyInData=Zo;function xr(e,t,r,n){const s=(0,ee._)`${t}${(0,ee.getProperty)(r)} === undefined`;return n?(0,ee.or)(s,(0,ee.not)(Ur(e,t,r))):s}K.noPropertyInData=xr;function Ts(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}K.allSchemaProperties=Ts;function ea(e,t){return Ts(t).filter(r=>!(0,Kr.alwaysValidSchema)(e,t[r]))}K.schemaProperties=ea;function ta({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:c},a,i,l){const d=l?(0,ee._)`${e}, ${t}, ${n}${s}`:t,f=[[ze.default.instancePath,(0,ee.strConcat)(ze.default.instancePath,o)],[ze.default.parentData,c.parentData],[ze.default.parentDataProperty,c.parentDataProperty],[ze.default.rootData,ze.default.rootData]];c.opts.dynamicRef&&f.push([ze.default.dynamicAnchors,ze.default.dynamicAnchors]);const g=(0,ee._)`${d}, ${r.object(...f)}`;return i!==ee.nil?(0,ee._)`${a}.call(${i}, ${g})`:(0,ee._)`${a}(${g})`}K.callValidateCode=ta;const ra=(0,ee._)`new RegExp`;function na({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,ee._)`${s.code==="new RegExp"?ra:(0,Wo.useFunc)(e,s)}(${r}, ${n})`})}K.usePattern=na;function sa(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const a=t.let("valid",!0);return c(()=>t.assign(a,!1)),a}return t.var(o,!0),c(()=>t.break()),o;function c(a){const i=t.const("len",(0,ee._)`${r}.length`);t.forRange("i",0,i,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:Kr.Type.Num},o),t.if((0,ee.not)(o),a)})}}K.validateArray=sa;function oa(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(i=>(0,Kr.alwaysValidSchema)(s,i))&&!s.opts.unevaluated)return;const c=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((i,l)=>{const d=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(c,(0,ee._)`${c} || ${a}`),e.mergeValidEvaluated(d,a)||t.if((0,ee.not)(c))})),e.result(c,()=>e.reset(),()=>e.error(!0))}K.validateUnion=oa;var Gn;function aa(){if(Gn)return Pe;Gn=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.validateKeywordUsage=Pe.validSchemaType=Pe.funcKeywordCode=Pe.macroKeywordCode=void 0;const e=U,t=Me,r=K,n=Rt;function s(g,_){const{gen:p,keyword:$,schema:y,parentSchema:h,it:w}=g,k=_.macro.call(w.self,y,h,w),P=l(p,$,k);w.opts.validateSchema!==!1&&w.self.validateSchema(k,!0);const O=p.name("valid");g.subschema({schema:k,schemaPath:e.nil,errSchemaPath:`${w.errSchemaPath}/${$}`,topSchemaRef:P,compositeRule:!0},O),g.pass(O,()=>g.error(!0))}Pe.macroKeywordCode=s;function o(g,_){var p;const{gen:$,keyword:y,schema:h,parentSchema:w,$data:k,it:P}=g;i(P,_);const O=!k&&_.compile?_.compile.call(P.self,h,w,P):_.validate,R=l($,y,O),A=$.let("valid");g.block$data(A,B),g.ok((p=_.valid)!==null&&p!==void 0?p:A);function B(){if(_.errors===!1)Q(),_.modifying&&c(g),te(()=>g.error());else{const Y=_.async?J():W();_.modifying&&c(g),te(()=>a(g,Y))}}function J(){const Y=$.let("ruleErrs",null);return $.try(()=>Q((0,e._)`await `),Z=>$.assign(A,!1).if((0,e._)`${Z} instanceof ${P.ValidationError}`,()=>$.assign(Y,(0,e._)`${Z}.errors`),()=>$.throw(Z))),Y}function W(){const Y=(0,e._)`${R}.errors`;return $.assign(Y,null),Q(e.nil),Y}function Q(Y=_.async?(0,e._)`await `:e.nil){const Z=P.opts.passContext?t.default.this:t.default.self,me=!("compile"in _&&!k||_.schema===!1);$.assign(A,(0,e._)`${Y}${(0,r.callValidateCode)(g,R,Z,me)}`,_.modifying)}function te(Y){var Z;$.if((0,e.not)((Z=_.valid)!==null&&Z!==void 0?Z:A),Y)}}Pe.funcKeywordCode=o;function c(g){const{gen:_,data:p,it:$}=g;_.if($.parentData,()=>_.assign(p,(0,e._)`${$.parentData}[${$.parentDataProperty}]`))}function a(g,_){const{gen:p}=g;p.if((0,e._)`Array.isArray(${_})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${_} : ${t.default.vErrors}.concat(${_})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,n.extendErrors)(g)},()=>g.error())}function i({schemaEnv:g},_){if(_.async&&!g.$async)throw new Error("async keyword in sync schema")}function l(g,_,p){if(p===void 0)throw new Error(`keyword "${_}" failed to compile`);return g.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function d(g,_,p=!1){return!_.length||_.some($=>$==="array"?Array.isArray(g):$==="object"?g&&typeof g=="object"&&!Array.isArray(g):typeof g==$||p&&typeof g>"u")}Pe.validSchemaType=d;function f({schema:g,opts:_,self:p,errSchemaPath:$},y,h){if(Array.isArray(y.keyword)?!y.keyword.includes(h):y.keyword!==h)throw new Error("ajv implementation error");const w=y.dependencies;if(w?.some(k=>!Object.prototype.hasOwnProperty.call(g,k)))throw new Error(`parent schema must have dependencies of ${h}: ${w.join(",")}`);if(y.validateSchema&&!y.validateSchema(g[h])){const P=`keyword "${h}" value is invalid at path "${$}": `+p.errorsText(y.validateSchema.errors);if(_.validateSchema==="log")p.logger.error(P);else throw new Error(P)}}return Pe.validateKeywordUsage=f,Pe}var Ve={},Bn;function ia(){if(Bn)return Ve;Bn=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.extendSubschemaMode=Ve.extendSubschemaData=Ve.getSubschema=void 0;const e=U,t=D;function r(o,{keyword:c,schemaProp:a,schema:i,schemaPath:l,errSchemaPath:d,topSchemaRef:f}){if(c!==void 0&&i!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(c!==void 0){const g=o.schema[c];return a===void 0?{schema:g,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(c)}`,errSchemaPath:`${o.errSchemaPath}/${c}`}:{schema:g[a],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(c)}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${c}/${(0,t.escapeFragment)(a)}`}}if(i!==void 0){if(l===void 0||d===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:l,topSchemaRef:f,errSchemaPath:d}}throw new Error('either "keyword" or "schema" must be passed')}Ve.getSubschema=r;function n(o,c,{dataProp:a,dataPropType:i,data:l,dataTypes:d,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:g}=c;if(a!==void 0){const{errorPath:p,dataPathArr:$,opts:y}=c,h=g.let("data",(0,e._)`${c.data}${(0,e.getProperty)(a)}`,!0);_(h),o.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,i,y.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${a}`,o.dataPathArr=[...$,o.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:g.let("data",l,!0);_(p),f!==void 0&&(o.propertyName=f)}d&&(o.dataTypes=d);function _(p){o.data=p,o.dataLevel=c.dataLevel+1,o.dataTypes=[],c.definedProperties=new Set,o.parentData=c.data,o.dataNames=[...c.dataNames,p]}}Ve.extendSubschemaData=n;function s(o,{jtdDiscriminator:c,jtdMetadata:a,compositeRule:i,createErrors:l,allErrors:d}){i!==void 0&&(o.compositeRule=i),l!==void 0&&(o.createErrors=l),d!==void 0&&(o.allErrors=d),o.jtdDiscriminator=c,o.jtdMetadata=a}return Ve.extendSubschemaMode=s,Ve}var le={},Ms=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var c=o[s];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r},Ds={exports:{}},Ke=Ds.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};xt(t,n,s,e,"",e)};Ke.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ke.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ke.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ke.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function xt(e,t,r,n,s,o,c,a,i,l){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,c,a,i,l);for(var d in n){var f=n[d];if(Array.isArray(f)){if(d in Ke.arrayKeywords)for(var g=0;g<f.length;g++)xt(e,t,r,f[g],s+"/"+d+"/"+g,o,s,d,n,g)}else if(d in Ke.propsKeywords){if(f&&typeof f=="object")for(var _ in f)xt(e,t,r,f[_],s+"/"+d+"/"+ca(_),o,s,d,n,_)}else(d in Ke.keywords||e.allKeys&&!(d in Ke.skipKeywords))&&xt(e,t,r,f,s+"/"+d,o,s,d,n)}r(n,s,o,c,a,i,l)}}function ca(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(le,"__esModule",{value:!0});le.getSchemaRefs=le.resolveUrl=le.normalizeId=le._getFullPath=le.getFullPath=le.inlineRef=void 0;const la=D,ua=Ms,da=Ds.exports,fa=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ha(e,t=!0){return typeof e=="boolean"?!0:t===!0?!jr(e):t?Cs(e)<=t:!1}le.inlineRef=ha;const pa=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function jr(e){for(const t in e){if(pa.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(jr)||typeof r=="object"&&jr(r))return!0}return!1}function Cs(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!fa.has(r)&&(typeof e[r]=="object"&&(0,la.eachItem)(e[r],n=>t+=Cs(n)),t===1/0))return 1/0}return t}function As(e,t="",r){r!==!1&&(t=at(t));const n=e.parse(t);return Vs(e,n)}le.getFullPath=As;function Vs(e,t){return e.serialize(t).split("#")[0]+"#"}le._getFullPath=Vs;const ma=/#\/?$/;function at(e){return e?e.replace(ma,""):""}le.normalizeId=at;function ya(e,t,r){return r=at(r),e.resolve(t,r)}le.resolveUrl=ya;const ga=/^[a-z_][-a-z0-9._]*$/i;function $a(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=at(e[r]||t),o={"":s},c=As(n,s,!1),a={},i=new Set;return da(e,{allKeys:!0},(f,g,_,p)=>{if(p===void 0)return;const $=c+g;let y=o[p];typeof f[r]=="string"&&(y=h.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),o[g]=y;function h(k){const P=this.opts.uriResolver.resolve;if(k=at(y?P(y,k):k),i.has(k))throw d(k);i.add(k);let O=this.refs[k];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?l(f,O.schema,k):k!==at($)&&(k[0]==="#"?(l(f,a[k],k),a[k]=f):this.refs[k]=$),k}function w(k){if(typeof k=="string"){if(!ga.test(k))throw new Error(`invalid anchor "${k}"`);h.call(this,`#${k}`)}}}),a;function l(f,g,_){if(g!==void 0&&!ua(f,g))throw d(_)}function d(f){return new Error(`reference "${f}" resolves to more than one schema`)}}le.getSchemaRefs=$a;var Wn;function or(){if(Wn)return Ce;Wn=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;const e=Mo(),t=se,r=ks(),n=se,s=Bo(),o=aa(),c=ia(),a=U,i=Me,l=le,d=D,f=Rt;function g(v){if(O(v)&&(A(v),P(v))){y(v);return}_(v,()=>(0,e.topBoolOrEmptySchema)(v))}Ce.validateFunctionCode=g;function _({gen:v,validateName:S,schema:j,schemaEnv:T,opts:V},F){V.code.es5?v.func(S,(0,a._)`${i.default.data}, ${i.default.valCxt}`,T.$async,()=>{v.code((0,a._)`"use strict"; ${w(j,V)}`),$(v,V),v.code(F)}):v.func(S,(0,a._)`${i.default.data}, ${p(V)}`,T.$async,()=>v.code(w(j,V)).code(F))}function p(v){return(0,a._)`{${i.default.instancePath}="", ${i.default.parentData}, ${i.default.parentDataProperty}, ${i.default.rootData}=${i.default.data}${v.dynamicRef?(0,a._)`, ${i.default.dynamicAnchors}={}`:a.nil}}={}`}function $(v,S){v.if(i.default.valCxt,()=>{v.var(i.default.instancePath,(0,a._)`${i.default.valCxt}.${i.default.instancePath}`),v.var(i.default.parentData,(0,a._)`${i.default.valCxt}.${i.default.parentData}`),v.var(i.default.parentDataProperty,(0,a._)`${i.default.valCxt}.${i.default.parentDataProperty}`),v.var(i.default.rootData,(0,a._)`${i.default.valCxt}.${i.default.rootData}`),S.dynamicRef&&v.var(i.default.dynamicAnchors,(0,a._)`${i.default.valCxt}.${i.default.dynamicAnchors}`)},()=>{v.var(i.default.instancePath,(0,a._)`""`),v.var(i.default.parentData,(0,a._)`undefined`),v.var(i.default.parentDataProperty,(0,a._)`undefined`),v.var(i.default.rootData,i.default.data),S.dynamicRef&&v.var(i.default.dynamicAnchors,(0,a._)`{}`)})}function y(v){const{schema:S,opts:j,gen:T}=v;_(v,()=>{j.$comment&&S.$comment&&Y(v),W(v),T.let(i.default.vErrors,null),T.let(i.default.errors,0),j.unevaluated&&h(v),B(v),Z(v)})}function h(v){const{gen:S,validateName:j}=v;v.evaluated=S.const("evaluated",(0,a._)`${j}.evaluated`),S.if((0,a._)`${v.evaluated}.dynamicProps`,()=>S.assign((0,a._)`${v.evaluated}.props`,(0,a._)`undefined`)),S.if((0,a._)`${v.evaluated}.dynamicItems`,()=>S.assign((0,a._)`${v.evaluated}.items`,(0,a._)`undefined`))}function w(v,S){const j=typeof v=="object"&&v[S.schemaId];return j&&(S.code.source||S.code.process)?(0,a._)`/*# sourceURL=${j} */`:a.nil}function k(v,S){if(O(v)&&(A(v),P(v))){R(v,S);return}(0,e.boolOrEmptySchema)(v,S)}function P({schema:v,self:S}){if(typeof v=="boolean")return!v;for(const j in v)if(S.RULES.all[j])return!0;return!1}function O(v){return typeof v.schema!="boolean"}function R(v,S){const{schema:j,gen:T,opts:V}=v;V.$comment&&j.$comment&&Y(v),Q(v),te(v);const F=T.const("_errs",i.default.errors);B(v,F),T.var(S,(0,a._)`${F} === ${i.default.errors}`)}function A(v){(0,d.checkUnknownRules)(v),J(v)}function B(v,S){if(v.opts.jtd)return je(v,[],!1,S);const j=(0,t.getSchemaTypes)(v.schema),T=(0,t.coerceAndCheckDataType)(v,j);je(v,j,!T,S)}function J(v){const{schema:S,errSchemaPath:j,opts:T,self:V}=v;S.$ref&&T.ignoreKeywordsWithRef&&(0,d.schemaHasRulesButRef)(S,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${j}"`)}function W(v){const{schema:S,opts:j}=v;S.default!==void 0&&j.useDefaults&&j.strictSchema&&(0,d.checkStrictMode)(v,"default is ignored in the schema root")}function Q(v){const S=v.schema[v.opts.schemaId];S&&(v.baseId=(0,l.resolveUrl)(v.opts.uriResolver,v.baseId,S))}function te(v){if(v.schema.$async&&!v.schemaEnv.$async)throw new Error("async schema in sync schema")}function Y({gen:v,schemaEnv:S,schema:j,errSchemaPath:T,opts:V}){const F=j.$comment;if(V.$comment===!0)v.code((0,a._)`${i.default.self}.logger.log(${F})`);else if(typeof V.$comment=="function"){const ae=(0,a.str)`${T}/$comment`,Ee=v.scopeValue("root",{ref:S.root});v.code((0,a._)`${i.default.self}.opts.$comment(${F}, ${ae}, ${Ee}.schema)`)}}function Z(v){const{gen:S,schemaEnv:j,validateName:T,ValidationError:V,opts:F}=v;j.$async?S.if((0,a._)`${i.default.errors} === 0`,()=>S.return(i.default.data),()=>S.throw((0,a._)`new ${V}(${i.default.vErrors})`)):(S.assign((0,a._)`${T}.errors`,i.default.vErrors),F.unevaluated&&me(v),S.return((0,a._)`${i.default.errors} === 0`))}function me({gen:v,evaluated:S,props:j,items:T}){j instanceof a.Name&&v.assign((0,a._)`${S}.props`,j),T instanceof a.Name&&v.assign((0,a._)`${S}.items`,T)}function je(v,S,j,T){const{gen:V,schema:F,data:ae,allErrors:Ee,opts:de,self:fe}=v,{RULES:ie}=fe;if(F.$ref&&(de.ignoreKeywordsWithRef||!(0,d.schemaHasRulesButRef)(F,ie))){V.block(()=>C(v,"$ref",ie.all.$ref.definition));return}de.jtd||He(v,S),V.block(()=>{for(const ye of ie.rules)tt(ye);tt(ie.post)});function tt(ye){!(0,r.shouldUseGroup)(F,ye)||(ye.type?(V.if((0,n.checkDataType)(ye.type,ae,de.strictNumbers)),De(v,ye),S.length===1&&S[0]===ye.type&&j&&(V.else(),(0,n.reportTypeError)(v)),V.endIf()):De(v,ye),Ee||V.if((0,a._)`${i.default.errors} === ${T||0}`))}}function De(v,S){const{gen:j,schema:T,opts:{useDefaults:V}}=v;V&&(0,s.assignDefaults)(v,S.type),j.block(()=>{for(const F of S.rules)(0,r.shouldUseRule)(T,F)&&C(v,F.keyword,F.definition,S.type)})}function He(v,S){v.schemaEnv.meta||!v.opts.strictTypes||(et(v,S),v.opts.allowUnionTypes||M(v,S),b(v,v.dataTypes))}function et(v,S){if(!!S.length){if(!v.dataTypes.length){v.dataTypes=S;return}S.forEach(j=>{E(v.dataTypes,j)||m(v,`type "${j}" not allowed by context "${v.dataTypes.join(",")}"`)}),u(v,S)}}function M(v,S){S.length>1&&!(S.length===2&&S.includes("null"))&&m(v,"use allowUnionTypes to allow union type keyword")}function b(v,S){const j=v.self.RULES.all;for(const T in j){const V=j[T];if(typeof V=="object"&&(0,r.shouldUseRule)(v.schema,V)){const{type:F}=V.definition;F.length&&!F.some(ae=>I(S,ae))&&m(v,`missing type "${F.join(",")}" for keyword "${T}"`)}}}function I(v,S){return v.includes(S)||S==="number"&&v.includes("integer")}function E(v,S){return v.includes(S)||S==="integer"&&v.includes("number")}function u(v,S){const j=[];for(const T of v.dataTypes)E(S,T)?j.push(T):S.includes("integer")&&T==="number"&&j.push("integer");v.dataTypes=j}function m(v,S){const j=v.schemaEnv.baseId+v.errSchemaPath;S+=` at "${j}" (strictTypes)`,(0,d.checkStrictMode)(v,S,v.opts.strictTypes)}class N{constructor(S,j,T){if((0,o.validateKeywordUsage)(S,j,T),this.gen=S.gen,this.allErrors=S.allErrors,this.keyword=T,this.data=S.data,this.schema=S.schema[T],this.$data=j.$data&&S.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,d.schemaRefOrVal)(S,this.schema,T,this.$data),this.schemaType=j.schemaType,this.parentSchema=S.schema,this.params={},this.it=S,this.def=j,this.$data)this.schemaCode=S.gen.const("vSchema",x(this.$data,S));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,j.schemaType,j.allowUndefined))throw new Error(`${T} value must be ${JSON.stringify(j.schemaType)}`);("code"in j?j.trackErrors:j.errors!==!1)&&(this.errsCount=S.gen.const("_errs",i.default.errors))}result(S,j,T){this.failResult((0,a.not)(S),j,T)}failResult(S,j,T){this.gen.if(S),T?T():this.error(),j?(this.gen.else(),j(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(S,j){this.failResult((0,a.not)(S),void 0,j)}fail(S){if(S===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(S),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(S){if(!this.$data)return this.fail(S);const{schemaCode:j}=this;this.fail((0,a._)`${j} !== undefined && (${(0,a.or)(this.invalid$data(),S)})`)}error(S,j,T){if(j){this.setParams(j),this._error(S,T),this.setParams({});return}this._error(S,T)}_error(S,j){(S?f.reportExtraError:f.reportError)(this,this.def.error,j)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(S){this.allErrors||this.gen.if(S)}setParams(S,j){j?Object.assign(this.params,S):this.params=S}block$data(S,j,T=a.nil){this.gen.block(()=>{this.check$data(S,T),j()})}check$data(S=a.nil,j=a.nil){if(!this.$data)return;const{gen:T,schemaCode:V,schemaType:F,def:ae}=this;T.if((0,a.or)((0,a._)`${V} === undefined`,j)),S!==a.nil&&T.assign(S,!0),(F.length||ae.validateSchema)&&(T.elseIf(this.invalid$data()),this.$dataError(),S!==a.nil&&T.assign(S,!1)),T.else()}invalid$data(){const{gen:S,schemaCode:j,schemaType:T,def:V,it:F}=this;return(0,a.or)(ae(),Ee());function ae(){if(T.length){if(!(j instanceof a.Name))throw new Error("ajv implementation error");const de=Array.isArray(T)?T:[T];return(0,a._)`${(0,n.checkDataTypes)(de,j,F.opts.strictNumbers,n.DataType.Wrong)}`}return a.nil}function Ee(){if(V.validateSchema){const de=S.scopeValue("validate$data",{ref:V.validateSchema});return(0,a._)`!${de}(${j})`}return a.nil}}subschema(S,j){const T=(0,c.getSubschema)(this.it,S);(0,c.extendSubschemaData)(T,this.it,S),(0,c.extendSubschemaMode)(T,S);const V={...this.it,...T,items:void 0,props:void 0};return k(V,j),V}mergeEvaluated(S,j){const{it:T,gen:V}=this;!T.opts.unevaluated||(T.props!==!0&&S.props!==void 0&&(T.props=d.mergeEvaluated.props(V,S.props,T.props,j)),T.items!==!0&&S.items!==void 0&&(T.items=d.mergeEvaluated.items(V,S.items,T.items,j)))}mergeValidEvaluated(S,j){const{it:T,gen:V}=this;if(T.opts.unevaluated&&(T.props!==!0||T.items!==!0))return V.if(j,()=>this.mergeEvaluated(S,a.Name)),!0}}Ce.KeywordCxt=N;function C(v,S,j,T){const V=new N(v,j,S);"code"in j?j.code(V,T):V.$data&&j.validate?(0,o.funcKeywordCode)(V,j):"macro"in j?(0,o.macroKeywordCode)(V,j):(j.compile||j.validate)&&(0,o.funcKeywordCode)(V,j)}const L=/^\/(?:[^~]|~0|~1)*$/,G=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(v,{dataLevel:S,dataNames:j,dataPathArr:T}){let V,F;if(v==="")return i.default.rootData;if(v[0]==="/"){if(!L.test(v))throw new Error(`Invalid JSON-pointer: ${v}`);V=v,F=i.default.rootData}else{const fe=G.exec(v);if(!fe)throw new Error(`Invalid JSON-pointer: ${v}`);const ie=+fe[1];if(V=fe[2],V==="#"){if(ie>=S)throw new Error(de("property/index",ie));return T[S-ie]}if(ie>S)throw new Error(de("data",ie));if(F=j[S-ie],!V)return F}let ae=F;const Ee=V.split("/");for(const fe of Ee)fe&&(F=(0,a._)`${F}${(0,a.getProperty)((0,d.unescapeJsonPointer)(fe))}`,ae=(0,a._)`${ae} && ${F}`);return ae;function de(fe,ie){return`Cannot access ${fe} ${ie} levels up, current level is ${S}`}}return Ce.getData=x,Ce}var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});class _a extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Tt.default=_a;var ut={};Object.defineProperty(ut,"__esModule",{value:!0});const vr=le;class va extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,vr.resolveUrl)(t,r,n),this.missingSchema=(0,vr.normalizeId)((0,vr.getFullPath)(t,this.missingRef))}}ut.default=va;var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.resolveSchema=pe.getCompilingSchema=pe.resolveRef=pe.compileSchema=pe.SchemaEnv=void 0;const Ne=U,wa=Tt,Je=Me,Oe=le,Qn=D,ba=or();class ar{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Oe.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}}pe.SchemaEnv=ar;function Jr(e){const t=Ls.call(this,e);if(t)return t;const r=(0,Oe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,c=new Ne.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let a;e.$async&&(a=c.scopeValue("Error",{ref:wa.default,code:(0,Ne._)`require("ajv/dist/runtime/validation_error").default`}));const i=c.scopeName("validate");e.validateName=i;const l={gen:c,allErrors:this.opts.allErrors,data:Je.default.data,parentData:Je.default.parentData,parentDataProperty:Je.default.parentDataProperty,dataNames:[Je.default.data],dataPathArr:[Ne.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ne.stringify)(e.schema)}:{ref:e.schema}),validateName:i,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Ne.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ne._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,ba.validateFunctionCode)(l),c.optimize(this.opts.code.optimize);const f=c.toString();d=`${c.scopeRefs(Je.default.scope)}return ${f}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const _=new Function(`${Je.default.self}`,`${Je.default.scope}`,d)(this,this.scope.get());if(this.scope.value(i,{ref:_}),_.errors=null,_.schema=e.schema,_.schemaEnv=e,e.$async&&(_.$async=!0),this.opts.code.source===!0&&(_.source={validateName:i,validateCode:f,scopeValues:c._values}),this.opts.unevaluated){const{props:p,items:$}=l;_.evaluated={props:p instanceof Ne.Name?void 0:p,items:$ instanceof Ne.Name?void 0:$,dynamicProps:p instanceof Ne.Name,dynamicItems:$ instanceof Ne.Name},_.source&&(_.source.evaluated=(0,Ne.stringify)(_.evaluated))}return e.validate=_,e}catch(f){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),f}finally{this._compilations.delete(e)}}pe.compileSchema=Jr;function Sa(e,t,r){var n;r=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=Na.call(this,e,r);if(o===void 0){const c=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;c&&(o=new ar({schema:c,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Ea.call(this,o)}pe.resolveRef=Sa;function Ea(e){return(0,Oe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Jr.call(this,e)}function Ls(e){for(const t of this._compilations)if(Pa(t,e))return t}pe.getCompilingSchema=Ls;function Pa(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Na(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||ir.call(this,e,t)}function ir(e,t){const r=this.opts.uriResolver.parse(t),n=(0,Oe._getFullPath)(this.opts.uriResolver,r);let s=(0,Oe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return wr.call(this,r,e);const o=(0,Oe.normalizeId)(n),c=this.refs[o]||this.schemas[o];if(typeof c=="string"){const a=ir.call(this,e,c);return typeof a?.schema!="object"?void 0:wr.call(this,r,a)}if(typeof c?.schema=="object"){if(c.validate||Jr.call(this,c),o===(0,Oe.normalizeId)(t)){const{schema:a}=c,{schemaId:i}=this.opts,l=a[i];return l&&(s=(0,Oe.resolveUrl)(this.opts.uriResolver,s,l)),new ar({schema:a,schemaId:i,root:e,baseId:s})}return wr.call(this,r,c)}}pe.resolveSchema=ir;const ka=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function wr(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const i=r[(0,Qn.unescapeFragment)(a)];if(i===void 0)return;r=i;const l=typeof r=="object"&&r[this.opts.schemaId];!ka.has(a)&&l&&(t=(0,Oe.resolveUrl)(this.opts.uriResolver,t,l))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Qn.schemaHasRulesButRef)(r,this.RULES)){const a=(0,Oe.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=ir.call(this,n,a)}const{schemaId:c}=this.opts;if(o=o||new ar({schema:r,schemaId:c,root:n,baseId:t}),o.schema!==o.root.schema)return o}const Oa="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",ja="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ia="object",Ra=["$data"],Ta={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Ma=!1,Da={$id:Oa,description:ja,type:Ia,required:Ra,properties:Ta,additionalProperties:Ma};var Gr={},cr={exports:{}};const Ca=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),qs=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function Br(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const Aa=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Yn(e){return e.length=0,!0}function Va(e,t,r){if(e.length){const n=Br(e);if(n!=="")t.push(n);else return r.error=!0,!1;e.length=0}return!0}function La(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let o=!1,c=!1,a=Va;for(let i=0;i<e.length;i++){const l=e[i];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(c=!0),!a(s,n,r))break;if(++t>7){r.error=!0;break}i>0&&e[i-1]===":"&&(o=!0),n.push(":");continue}else if(l==="%"){if(!a(s,n,r))break;a=Yn}else{s.push(l);continue}}return s.length&&(a===Yn?r.zone=s.join(""):c?n.push(s.join("")):n.push(Br(s))),r.address=n.join(""),r}function Hs(e){if(qa(e,":")<2)return{host:e,isIPV6:!1};const t=La(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:n}}}function qa(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}function Ha(e){let t=e;const r=[];let n=-1,s=0;for(;s=t.length;){if(s===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(s===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(s===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((n=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")}function za(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Fa(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!qs(r)){const n=Hs(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var zs={nonSimpleDomain:Aa,recomposeAuthority:Fa,normalizeComponentEncoding:za,removeDotSegments:Ha,isIPv4:qs,isUUID:Ca,normalizeIPv6:Hs,stringArrayToHexStripped:Br};const{isUUID:Ka}=zs,Ua=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,xa=["http","https","ws","wss","urn","urn:uuid"];function Ja(e){return xa.indexOf(e)!==-1}function Wr(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function Fs(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Ks(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Ga(e){return e.secure=Wr(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Ba(e){if((e.port===(Wr(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Wa(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(Ua);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,o=Qr(s);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Qa(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,o=Qr(s);o&&(e=o.serialize(e,t));const c=e,a=e.nss;return c.path=`${n||t.nid}:${a}`,t.skipEscape=!0,c}function Ya(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Ka(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Xa(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const Us={scheme:"http",domainHost:!0,parse:Fs,serialize:Ks},Za={scheme:"https",domainHost:Us.domainHost,parse:Fs,serialize:Ks},Jt={scheme:"ws",domainHost:!0,parse:Ga,serialize:Ba},ei={scheme:"wss",domainHost:Jt.domainHost,parse:Jt.parse,serialize:Jt.serialize},ti={scheme:"urn",parse:Wa,serialize:Qa,skipNormalize:!0},ri={scheme:"urn:uuid",parse:Ya,serialize:Xa,skipNormalize:!0},Xt={http:Us,https:Za,ws:Jt,wss:ei,urn:ti,"urn:uuid":ri};Object.setPrototypeOf(Xt,null);function Qr(e){return e&&(Xt[e]||Xt[e.toLowerCase()])||void 0}var ni={wsIsSecure:Wr,SCHEMES:Xt,isValidSchemeName:Ja,getSchemeHandler:Qr};const{normalizeIPv6:si,removeDotSegments:yt,recomposeAuthority:oi,normalizeComponentEncoding:Lt,isIPv4:ai,nonSimpleDomain:ii}=zs,{SCHEMES:ci,getSchemeHandler:xs}=ni;function li(e,t){return typeof e=="string"?e=Re(Le(e,t),t):typeof e=="object"&&(e=Le(Re(e,t),t)),e}function ui(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},s=Js(Le(e,n),Le(t,n),n,!0);return n.skipEscape=!0,Re(s,n)}function Js(e,t,r,n){const s={};return n||(e=Le(Re(e,r),r),t=Le(Re(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=yt(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=yt(t.path||""),s.query=t.query):(t.path?(t.path[0]==="/"?s.path=yt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=yt(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function di(e,t,r){return typeof e=="string"?(e=unescape(e),e=Re(Lt(Le(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Re(Lt(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Re(Lt(Le(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Re(Lt(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Re(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=xs(n.scheme||r.scheme);o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");const c=oi(r);if(c!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(c),r.path&&r.path[0]!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(a=yt(a)),c===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}const fi=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Le(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);const o=e.match(fi);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host)if(ai(n.host)===!1){const i=si(n.host);n.host=i.host.toLowerCase(),s=i.isIPV6}else s=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const c=xs(r.scheme||n.scheme);if(!r.unicodeSupport&&(!c||!c.unicodeSupport)&&n.host&&(r.domainHost||c&&c.domainHost)&&s===!1&&ii(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!c||c&&!c.skipNormalize)&&(e.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),c&&c.parse&&c.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const Yr={SCHEMES:ci,normalize:li,resolve:ui,resolveComponent:Js,equal:di,serialize:Re,parse:Le};cr.exports=Yr;cr.exports.default=Yr;cr.exports.fastUri=Yr;Object.defineProperty(Gr,"__esModule",{value:!0});const Gs=cr.exports;Gs.code='require("ajv/dist/runtime/uri").default';Gr.default=Gs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=or();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=U;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Tt,s=ut,o=Ye,c=pe,a=U,i=le,l=se,d=D,f=Da,g=Gr,_=(M,b)=>new RegExp(M,b);_.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],$=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function k(M){var b,I,E,u,m,N,C,L,G,x,v,S,j,T,V,F,ae,Ee,de,fe,ie,tt,ye,yr,gr;const ht=M.strict,$r=(b=M.code)===null||b===void 0?void 0:b.optimize,qn=$r===!0||$r===void 0?1:$r||0,Hn=(E=(I=M.code)===null||I===void 0?void 0:I.regExp)!==null&&E!==void 0?E:_,go=(u=M.uriResolver)!==null&&u!==void 0?u:g.default;return{strictSchema:(N=(m=M.strictSchema)!==null&&m!==void 0?m:ht)!==null&&N!==void 0?N:!0,strictNumbers:(L=(C=M.strictNumbers)!==null&&C!==void 0?C:ht)!==null&&L!==void 0?L:!0,strictTypes:(x=(G=M.strictTypes)!==null&&G!==void 0?G:ht)!==null&&x!==void 0?x:"log",strictTuples:(S=(v=M.strictTuples)!==null&&v!==void 0?v:ht)!==null&&S!==void 0?S:"log",strictRequired:(T=(j=M.strictRequired)!==null&&j!==void 0?j:ht)!==null&&T!==void 0?T:!1,code:M.code?{...M.code,optimize:qn,regExp:Hn}:{optimize:qn,regExp:Hn},loopRequired:(V=M.loopRequired)!==null&&V!==void 0?V:w,loopEnum:(F=M.loopEnum)!==null&&F!==void 0?F:w,meta:(ae=M.meta)!==null&&ae!==void 0?ae:!0,messages:(Ee=M.messages)!==null&&Ee!==void 0?Ee:!0,inlineRefs:(de=M.inlineRefs)!==null&&de!==void 0?de:!0,schemaId:(fe=M.schemaId)!==null&&fe!==void 0?fe:"$id",addUsedSchema:(ie=M.addUsedSchema)!==null&&ie!==void 0?ie:!0,validateSchema:(tt=M.validateSchema)!==null&&tt!==void 0?tt:!0,validateFormats:(ye=M.validateFormats)!==null&&ye!==void 0?ye:!0,unicodeRegExp:(yr=M.unicodeRegExp)!==null&&yr!==void 0?yr:!0,int32range:(gr=M.int32range)!==null&&gr!==void 0?gr:!0,uriResolver:go}}class P{constructor(b={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,b=this.opts={...b,...k(b)};const{es5:I,lines:E}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:$,es5:I,lines:E}),this.logger=te(b.logger);const u=b.validateFormats;b.validateFormats=!1,this.RULES=(0,o.getRules)(),O.call(this,y,b,"NOT SUPPORTED"),O.call(this,h,b,"DEPRECATED","warn"),this._metaOpts=W.call(this),b.formats&&B.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),b.keywords&&J.call(this,b.keywords),typeof b.meta=="object"&&this.addMetaSchema(b.meta),A.call(this),b.validateFormats=u}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:b,meta:I,schemaId:E}=this.opts;let u=f;E==="id"&&(u={...f},u.id=u.$id,delete u.$id),I&&b&&this.addMetaSchema(u,u[E],!1)}defaultMeta(){const{meta:b,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof b=="object"?b[I]||b:void 0}validate(b,I){let E;if(typeof b=="string"){if(E=this.getSchema(b),!E)throw new Error(`no schema with key or ref "${b}"`)}else E=this.compile(b);const u=E(I);return"$async"in E||(this.errors=E.errors),u}compile(b,I){const E=this._addSchema(b,I);return E.validate||this._compileSchemaEnv(E)}compileAsync(b,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:E}=this.opts;return u.call(this,b,I);async function u(x,v){await m.call(this,x.$schema);const S=this._addSchema(x,v);return S.validate||N.call(this,S)}async function m(x){x&&!this.getSchema(x)&&await u.call(this,{$ref:x},!0)}async function N(x){try{return this._compileSchemaEnv(x)}catch(v){if(!(v instanceof s.default))throw v;return C.call(this,v),await L.call(this,v.missingSchema),N.call(this,x)}}function C({missingSchema:x,missingRef:v}){if(this.refs[x])throw new Error(`AnySchema ${x} is loaded but ${v} cannot be resolved`)}async function L(x){const v=await G.call(this,x);this.refs[x]||await m.call(this,v.$schema),this.refs[x]||this.addSchema(v,x,I)}async function G(x){const v=this._loading[x];if(v)return v;try{return await(this._loading[x]=E(x))}finally{delete this._loading[x]}}}addSchema(b,I,E,u=this.opts.validateSchema){if(Array.isArray(b)){for(const N of b)this.addSchema(N,void 0,E,u);return this}let m;if(typeof b=="object"){const{schemaId:N}=this.opts;if(m=b[N],m!==void 0&&typeof m!="string")throw new Error(`schema ${N} must be string`)}return I=(0,i.normalizeId)(I||m),this._checkUnique(I),this.schemas[I]=this._addSchema(b,E,I,u,!0),this}addMetaSchema(b,I,E=this.opts.validateSchema){return this.addSchema(b,I,!0,E),this}validateSchema(b,I){if(typeof b=="boolean")return!0;let E;if(E=b.$schema,E!==void 0&&typeof E!="string")throw new Error("$schema must be a string");if(E=E||this.opts.defaultMeta||this.defaultMeta(),!E)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const u=this.validate(E,b);if(!u&&I){const m="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(m);else throw new Error(m)}return u}getSchema(b){let I;for(;typeof(I=R.call(this,b))=="string";)b=I;if(I===void 0){const{schemaId:E}=this.opts,u=new c.SchemaEnv({schema:{},schemaId:E});if(I=c.resolveSchema.call(this,u,b),!I)return;this.refs[b]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(b){if(b instanceof RegExp)return this._removeAllSchemas(this.schemas,b),this._removeAllSchemas(this.refs,b),this;switch(typeof b){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=R.call(this,b);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[b],delete this.refs[b],this}case"object":{const I=b;this._cache.delete(I);let E=b[this.opts.schemaId];return E&&(E=(0,i.normalizeId)(E),delete this.schemas[E],delete this.refs[E]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(b){for(const I of b)this.addKeyword(I);return this}addKeyword(b,I){let E;if(typeof b=="string")E=b,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=E);else if(typeof b=="object"&&I===void 0){if(I=b,E=I.keyword,Array.isArray(E)&&!E.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Z.call(this,E,I),!I)return(0,d.eachItem)(E,m=>me.call(this,m)),this;De.call(this,I);const u={...I,type:(0,l.getJSONTypes)(I.type),schemaType:(0,l.getJSONTypes)(I.schemaType)};return(0,d.eachItem)(E,u.type.length===0?m=>me.call(this,m,u):m=>u.type.forEach(N=>me.call(this,m,u,N))),this}getKeyword(b){const I=this.RULES.all[b];return typeof I=="object"?I.definition:!!I}removeKeyword(b){const{RULES:I}=this;delete I.keywords[b],delete I.all[b];for(const E of I.rules){const u=E.rules.findIndex(m=>m.keyword===b);u>=0&&E.rules.splice(u,1)}return this}addFormat(b,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[b]=I,this}errorsText(b=this.errors,{separator:I=", ",dataVar:E="data"}={}){return!b||b.length===0?"No errors":b.map(u=>`${E}${u.instancePath} ${u.message}`).reduce((u,m)=>u+I+m)}$dataMetaSchema(b,I){const E=this.RULES.all;b=JSON.parse(JSON.stringify(b));for(const u of I){const m=u.split("/").slice(1);let N=b;for(const C of m)N=N[C];for(const C in E){const L=E[C];if(typeof L!="object")continue;const{$data:G}=L.definition,x=N[C];G&&x&&(N[C]=et(x))}}return b}_removeAllSchemas(b,I){for(const E in b){const u=b[E];(!I||I.test(E))&&(typeof u=="string"?delete b[E]:u&&!u.meta&&(this._cache.delete(u.schema),delete b[E]))}}_addSchema(b,I,E,u=this.opts.validateSchema,m=this.opts.addUsedSchema){let N;const{schemaId:C}=this.opts;if(typeof b=="object")N=b[C];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof b!="boolean")throw new Error("schema must be object or boolean")}let L=this._cache.get(b);if(L!==void 0)return L;E=(0,i.normalizeId)(N||E);const G=i.getSchemaRefs.call(this,b,E);return L=new c.SchemaEnv({schema:b,schemaId:C,meta:I,baseId:E,localRefs:G}),this._cache.set(L.schema,L),m&&!E.startsWith("#")&&(E&&this._checkUnique(E),this.refs[E]=L),u&&this.validateSchema(b,!0),L}_checkUnique(b){if(this.schemas[b]||this.refs[b])throw new Error(`schema with key or id "${b}" already exists`)}_compileSchemaEnv(b){if(b.meta?this._compileMetaSchema(b):c.compileSchema.call(this,b),!b.validate)throw new Error("ajv implementation error");return b.validate}_compileMetaSchema(b){const I=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,b)}finally{this.opts=I}}}P.ValidationError=n.default,P.MissingRefError=s.default,e.default=P;function O(M,b,I,E="error"){for(const u in M){const m=u;m in b&&this.logger[E](`${I}: option ${u}. ${M[m]}`)}}function R(M){return M=(0,i.normalizeId)(M),this.schemas[M]||this.refs[M]}function A(){const M=this.opts.schemas;if(!!M)if(Array.isArray(M))this.addSchema(M);else for(const b in M)this.addSchema(M[b],b)}function B(){for(const M in this.opts.formats){const b=this.opts.formats[M];b&&this.addFormat(M,b)}}function J(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const b in M){const I=M[b];I.keyword||(I.keyword=b),this.addKeyword(I)}}function W(){const M={...this.opts};for(const b of p)delete M[b];return M}const Q={log(){},warn(){},error(){}};function te(M){if(M===!1)return Q;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const Y=/^[a-z_$][a-z0-9_$:-]*$/i;function Z(M,b){const{RULES:I}=this;if((0,d.eachItem)(M,E=>{if(I.keywords[E])throw new Error(`Keyword ${E} is already defined`);if(!Y.test(E))throw new Error(`Keyword ${E} has invalid name`)}),!!b&&b.$data&&!("code"in b||"validate"in b))throw new Error('$data keyword must have "code" or "validate" function')}function me(M,b,I){var E;const u=b?.post;if(I&&u)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:m}=this;let N=u?m.post:m.rules.find(({type:L})=>L===I);if(N||(N={type:I,rules:[]},m.rules.push(N)),m.keywords[M]=!0,!b)return;const C={keyword:M,definition:{...b,type:(0,l.getJSONTypes)(b.type),schemaType:(0,l.getJSONTypes)(b.schemaType)}};b.before?je.call(this,N,C,b.before):N.rules.push(C),m.all[M]=C,(E=b.implements)===null||E===void 0||E.forEach(L=>this.addKeyword(L))}function je(M,b,I){const E=M.rules.findIndex(u=>u.keyword===I);E>=0?M.rules.splice(E,0,b):(M.rules.push(b),this.logger.warn(`rule ${I} is not defined`))}function De(M){let{metaSchema:b}=M;b!==void 0&&(M.$data&&this.opts.$data&&(b=et(b)),M.validateSchema=this.compile(b,!0))}const He={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function et(M){return{anyOf:[M,He]}}})(ws);var Xr={},Zr={},en={};Object.defineProperty(en,"__esModule",{value:!0});const hi={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};en.default=hi;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.callRef=Xe.getValidate=void 0;const pi=ut,Xn=K,he=U,rt=Me,Zn=pe,qt=D,mi={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:c,opts:a,self:i}=n,{root:l}=o;if((r==="#"||r==="#/")&&s===l.baseId)return f();const d=Zn.resolveRef.call(i,l,s,r);if(d===void 0)throw new pi.default(n.opts.uriResolver,s,r);if(d instanceof Zn.SchemaEnv)return g(d);return _(d);function f(){if(o===l)return Gt(e,c,o,o.$async);const p=t.scopeValue("root",{ref:l});return Gt(e,(0,he._)`${p}.validate`,l,l.$async)}function g(p){const $=Bs(e,p);Gt(e,$,p,p.$async)}function _(p){const $=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,he.stringify)(p)}:{ref:p}),y=t.name("valid"),h=e.subschema({schema:p,dataTypes:[],schemaPath:he.nil,topSchemaRef:$,errSchemaPath:r},y);e.mergeEvaluated(h),e.ok(y)}}};function Bs(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,he._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Xe.getValidate=Bs;function Gt(e,t,r,n){const{gen:s,it:o}=e,{allErrors:c,schemaEnv:a,opts:i}=o,l=i.passContext?rt.default.this:he.nil;n?d():f();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=s.let("valid");s.try(()=>{s.code((0,he._)`await ${(0,Xn.callValidateCode)(e,t,l)}`),_(t),c||s.assign(p,!0)},$=>{s.if((0,he._)`!(${$} instanceof ${o.ValidationError})`,()=>s.throw($)),g($),c||s.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Xn.callValidateCode)(e,t,l),()=>_(t),()=>g(t))}function g(p){const $=(0,he._)`${p}.errors`;s.assign(rt.default.vErrors,(0,he._)`${rt.default.vErrors} === null ? ${$} : ${rt.default.vErrors}.concat(${$})`),s.assign(rt.default.errors,(0,he._)`${rt.default.vErrors}.length`)}function _(p){var $;if(!o.opts.unevaluated)return;const y=($=r?.validate)===null||$===void 0?void 0:$.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=qt.mergeEvaluated.props(s,y.props,o.props));else{const h=s.var("props",(0,he._)`${p}.evaluated.props`);o.props=qt.mergeEvaluated.props(s,h,o.props,he.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=qt.mergeEvaluated.items(s,y.items,o.items));else{const h=s.var("items",(0,he._)`${p}.evaluated.items`);o.items=qt.mergeEvaluated.items(s,h,o.items,he.Name)}}}Xe.callRef=Gt;Xe.default=mi;Object.defineProperty(Zr,"__esModule",{value:!0});const yi=en,gi=Xe,$i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",yi.default,gi.default];Zr.default=$i;var tn={},rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Zt=U,Fe=Zt.operators,er={maximum:{okStr:"<=",ok:Fe.LTE,fail:Fe.GT},minimum:{okStr:">=",ok:Fe.GTE,fail:Fe.LT},exclusiveMaximum:{okStr:"<",ok:Fe.LT,fail:Fe.GTE},exclusiveMinimum:{okStr:">",ok:Fe.GT,fail:Fe.LTE}},_i={message:({keyword:e,schemaCode:t})=>(0,Zt.str)`must be ${er[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Zt._)`{comparison: ${er[e].okStr}, limit: ${t}}`},vi={keyword:Object.keys(er),type:"number",schemaType:"number",$data:!0,error:_i,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Zt._)`${r} ${er[t].fail} ${n} || isNaN(${r})`)}};rn.default=vi;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const vt=U,wi={message:({schemaCode:e})=>(0,vt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,vt._)`{multipleOf: ${e}}`},bi={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:wi,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,c=t.let("res"),a=o?(0,vt._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${o}`:(0,vt._)`${c} !== parseInt(${c})`;e.fail$data((0,vt._)`(${n} === 0 || (${c} = ${r}/${n}, ${a}))`)}};nn.default=bi;var sn={},on={};Object.defineProperty(on,"__esModule",{value:!0});function Ws(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}on.default=Ws;Ws.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(sn,"__esModule",{value:!0});const Ge=U,Si=D,Ei=on,Pi={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,Ge.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Ge._)`{limit: ${e}}`},Ni={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Pi,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?Ge.operators.GT:Ge.operators.LT,c=s.opts.unicode===!1?(0,Ge._)`${r}.length`:(0,Ge._)`${(0,Si.useFunc)(e.gen,Ei.default)}(${r})`;e.fail$data((0,Ge._)`${c} ${o} ${n}`)}};sn.default=Ni;var an={};Object.defineProperty(an,"__esModule",{value:!0});const ki=K,tr=U,Oi={message:({schemaCode:e})=>(0,tr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,tr._)`{pattern: ${e}}`},ji={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Oi,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,c=o.opts.unicodeRegExp?"u":"",a=r?(0,tr._)`(new RegExp(${s}, ${c}))`:(0,ki.usePattern)(e,n);e.fail$data((0,tr._)`!${a}.test(${t})`)}};an.default=ji;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});const wt=U,Ii={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,wt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,wt._)`{limit: ${e}}`},Ri={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ii,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?wt.operators.GT:wt.operators.LT;e.fail$data((0,wt._)`Object.keys(${r}).length ${s} ${n}`)}};cn.default=Ri;var ln={};Object.defineProperty(ln,"__esModule",{value:!0});const mt=K,bt=U,Ti=D,Mi={message:({params:{missingProperty:e}})=>(0,bt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,bt._)`{missingProperty: ${e}}`},Di={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Mi,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:c}=e,{opts:a}=c;if(!o&&r.length===0)return;const i=r.length>=a.loopRequired;if(c.allErrors?l():d(),a.strictRequired){const _=e.parentSchema.properties,{definedProperties:p}=e.it;for(const $ of r)if(_?.[$]===void 0&&!p.has($)){const y=c.schemaEnv.baseId+c.errSchemaPath,h=`required property "${$}" is not defined at "${y}" (strictRequired)`;(0,Ti.checkStrictMode)(c,h,c.opts.strictRequired)}}function l(){if(i||o)e.block$data(bt.nil,f);else for(const _ of r)(0,mt.checkReportMissingProp)(e,_)}function d(){const _=t.let("missing");if(i||o){const p=t.let("valid",!0);e.block$data(p,()=>g(_,p)),e.ok(p)}else t.if((0,mt.checkMissingProp)(e,r,_)),(0,mt.reportMissingProp)(e,_),t.else()}function f(){t.forOf("prop",n,_=>{e.setParams({missingProperty:_}),t.if((0,mt.noPropertyInData)(t,s,_,a.ownProperties),()=>e.error())})}function g(_,p){e.setParams({missingProperty:_}),t.forOf(_,n,()=>{t.assign(p,(0,mt.propertyInData)(t,s,_,a.ownProperties)),t.if((0,bt.not)(p),()=>{e.error(),t.break()})},bt.nil)}}};ln.default=Di;var un={};Object.defineProperty(un,"__esModule",{value:!0});const St=U,Ci={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,St.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,St._)`{limit: ${e}}`},Ai={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ci,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?St.operators.GT:St.operators.LT;e.fail$data((0,St._)`${r}.length ${s} ${n}`)}};un.default=Ai;var dn={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});const Qs=Ms;Qs.code='require("ajv/dist/runtime/equal").default';Mt.default=Qs;Object.defineProperty(dn,"__esModule",{value:!0});const br=se,ce=U,Vi=D,Li=Mt,qi={message:({params:{i:e,j:t}})=>(0,ce.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ce._)`{i: ${e}, j: ${t}}`},Hi={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:qi,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:c,it:a}=e;if(!n&&!s)return;const i=t.let("valid"),l=o.items?(0,br.getSchemaTypes)(o.items):[];e.block$data(i,d,(0,ce._)`${c} === false`),e.ok(i);function d(){const p=t.let("i",(0,ce._)`${r}.length`),$=t.let("j");e.setParams({i:p,j:$}),t.assign(i,!0),t.if((0,ce._)`${p} > 1`,()=>(f()?g:_)(p,$))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function g(p,$){const y=t.name("item"),h=(0,br.checkDataTypes)(l,y,a.opts.strictNumbers,br.DataType.Wrong),w=t.const("indices",(0,ce._)`{}`);t.for((0,ce._)`;${p}--;`,()=>{t.let(y,(0,ce._)`${r}[${p}]`),t.if(h,(0,ce._)`continue`),l.length>1&&t.if((0,ce._)`typeof ${y} == "string"`,(0,ce._)`${y} += "_"`),t.if((0,ce._)`typeof ${w}[${y}] == "number"`,()=>{t.assign($,(0,ce._)`${w}[${y}]`),e.error(),t.assign(i,!1).break()}).code((0,ce._)`${w}[${y}] = ${p}`)})}function _(p,$){const y=(0,Vi.useFunc)(t,Li.default),h=t.name("outer");t.label(h).for((0,ce._)`;${p}--;`,()=>t.for((0,ce._)`${$} = ${p}; ${$}--;`,()=>t.if((0,ce._)`${y}(${r}[${p}], ${r}[${$}])`,()=>{e.error(),t.assign(i,!1).break(h)})))}}};dn.default=Hi;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});const Ir=U,zi=D,Fi=Mt,Ki={message:"must be equal to constant",params:({schemaCode:e})=>(0,Ir._)`{allowedValue: ${e}}`},Ui={keyword:"const",$data:!0,error:Ki,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Ir._)`!${(0,zi.useFunc)(t,Fi.default)}(${r}, ${s})`):e.fail((0,Ir._)`${o} !== ${r}`)}};fn.default=Ui;var hn={};Object.defineProperty(hn,"__esModule",{value:!0});const gt=U,xi=D,Ji=Mt,Gi={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,gt._)`{allowedValues: ${e}}`},Bi={keyword:"enum",schemaType:"array",$data:!0,error:Gi,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:c}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=c.opts.loopEnum;let i;const l=()=>i??(i=(0,xi.useFunc)(t,Ji.default));let d;if(a||n)d=t.let("valid"),e.block$data(d,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const _=t.const("vSchema",o);d=(0,gt.or)(...s.map((p,$)=>g(_,$)))}e.pass(d);function f(){t.assign(d,!1),t.forOf("v",o,_=>t.if((0,gt._)`${l()}(${r}, ${_})`,()=>t.assign(d,!0).break()))}function g(_,p){const $=s[p];return typeof $=="object"&&$!==null?(0,gt._)`${l()}(${r}, ${_}[${p}])`:(0,gt._)`${r} === ${$}`}}};hn.default=Bi;Object.defineProperty(tn,"__esModule",{value:!0});const Wi=rn,Qi=nn,Yi=sn,Xi=an,Zi=cn,ec=ln,tc=un,rc=dn,nc=fn,sc=hn,oc=[Wi.default,Qi.default,Yi.default,Xi.default,Zi.default,ec.default,tc.default,rc.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},nc.default,sc.default];tn.default=oc;var pn={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.validateAdditionalItems=void 0;const Be=U,Rr=D,ac={message:({params:{len:e}})=>(0,Be.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Be._)`{limit: ${e}}`},ic={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ac,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Rr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ys(e,n)}};function Ys(e,t){const{gen:r,schema:n,data:s,keyword:o,it:c}=e;c.items=!0;const a=r.const("len",(0,Be._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Be._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,Rr.alwaysValidSchema)(c,n)){const l=r.var("valid",(0,Be._)`${a} <= ${t.length}`);r.if((0,Be.not)(l),()=>i(l)),e.ok(l)}function i(l){r.forRange("i",t.length,a,d=>{e.subschema({keyword:o,dataProp:d,dataPropType:Rr.Type.Num},l),c.allErrors||r.if((0,Be.not)(l),()=>r.break())})}}dt.validateAdditionalItems=Ys;dt.default=ic;var mn={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.validateTuple=void 0;const es=U,Bt=D,cc=K,lc={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Xs(e,"additionalItems",t);r.items=!0,!(0,Bt.alwaysValidSchema)(r,t)&&e.ok((0,cc.validateArray)(e))}};function Xs(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:c,it:a}=e;d(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Bt.mergeEvaluated.items(n,r.length,a.items));const i=n.name("valid"),l=n.const("len",(0,es._)`${o}.length`);r.forEach((f,g)=>{(0,Bt.alwaysValidSchema)(a,f)||(n.if((0,es._)`${l} > ${g}`,()=>e.subschema({keyword:c,schemaProp:g,dataProp:g},i)),e.ok(i))});function d(f){const{opts:g,errSchemaPath:_}=a,p=r.length,$=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(g.strictTuples&&!$){const y=`"${c}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${_}"`;(0,Bt.checkStrictMode)(a,y,g.strictTuples)}}}ft.validateTuple=Xs;ft.default=lc;Object.defineProperty(mn,"__esModule",{value:!0});const uc=ft,dc={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,uc.validateTuple)(e,"items")};mn.default=dc;var yn={};Object.defineProperty(yn,"__esModule",{value:!0});const ts=U,fc=D,hc=K,pc=dt,mc={message:({params:{len:e}})=>(0,ts.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ts._)`{limit: ${e}}`},yc={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:mc,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,fc.alwaysValidSchema)(n,t)&&(s?(0,pc.validateAdditionalItems)(e,s):e.ok((0,hc.validateArray)(e)))}};yn.default=yc;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});const ge=U,Ht=D,gc={message:({params:{min:e,max:t}})=>t===void 0?(0,ge.str)`must contain at least ${e} valid item(s)`:(0,ge.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ge._)`{minContains: ${e}}`:(0,ge._)`{minContains: ${e}, maxContains: ${t}}`},$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:gc,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let c,a;const{minContains:i,maxContains:l}=n;o.opts.next?(c=i===void 0?1:i,a=l):c=1;const d=t.const("len",(0,ge._)`${s}.length`);if(e.setParams({min:c,max:a}),a===void 0&&c===0){(0,Ht.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&c>a){(0,Ht.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Ht.alwaysValidSchema)(o,r)){let $=(0,ge._)`${d} >= ${c}`;a!==void 0&&($=(0,ge._)`${$} && ${d} <= ${a}`),e.pass($);return}o.items=!0;const f=t.name("valid");a===void 0&&c===1?_(f,()=>t.if(f,()=>t.break())):c===0?(t.let(f,!0),a!==void 0&&t.if((0,ge._)`${s}.length > 0`,g)):(t.let(f,!1),g()),e.result(f,()=>e.reset());function g(){const $=t.name("_valid"),y=t.let("count",0);_($,()=>t.if($,()=>p(y)))}function _($,y){t.forRange("i",0,d,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:Ht.Type.Num,compositeRule:!0},$),y()})}function p($){t.code((0,ge._)`${$}++`),a===void 0?t.if((0,ge._)`${$} >= ${c}`,()=>t.assign(f,!0).break()):(t.if((0,ge._)`${$} > ${a}`,()=>t.assign(f,!1).break()),c===1?t.assign(f,!0):t.if((0,ge._)`${$} >= ${c}`,()=>t.assign(f,!0)))}}};gn.default=$c;var Zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=U,r=D,n=K;e.error={message:({params:{property:i,depsCount:l,deps:d}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${d} when property ${i} is present`},params:({params:{property:i,depsCount:l,deps:d,missingProperty:f}})=>(0,t._)`{property: ${i},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(i){const[l,d]=o(i);c(i,l),a(i,d)}};function o({schema:i}){const l={},d={};for(const f in i){if(f==="__proto__")continue;const g=Array.isArray(i[f])?l:d;g[f]=i[f]}return[l,d]}function c(i,l=i.schema){const{gen:d,data:f,it:g}=i;if(Object.keys(l).length===0)return;const _=d.let("missing");for(const p in l){const $=l[p];if($.length===0)continue;const y=(0,n.propertyInData)(d,f,p,g.opts.ownProperties);i.setParams({property:p,depsCount:$.length,deps:$.join(", ")}),g.allErrors?d.if(y,()=>{for(const h of $)(0,n.checkReportMissingProp)(i,h)}):(d.if((0,t._)`${y} && (${(0,n.checkMissingProp)(i,$,_)})`),(0,n.reportMissingProp)(i,_),d.else())}}e.validatePropertyDeps=c;function a(i,l=i.schema){const{gen:d,data:f,keyword:g,it:_}=i,p=d.name("valid");for(const $ in l)(0,r.alwaysValidSchema)(_,l[$])||(d.if((0,n.propertyInData)(d,f,$,_.opts.ownProperties),()=>{const y=i.subschema({keyword:g,schemaProp:$},p);i.mergeValidEvaluated(y,p)},()=>d.var(p,!0)),i.ok(p))}e.validateSchemaDeps=a,e.default=s})(Zs);var $n={};Object.defineProperty($n,"__esModule",{value:!0});const eo=U,_c=D,vc={message:"property name must be valid",params:({params:e})=>(0,eo._)`{propertyName: ${e.propertyName}}`},wc={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:vc,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,_c.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,c=>{e.setParams({propertyName:c}),e.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},o),t.if((0,eo.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};$n.default=wc;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const zt=K,ke=U,bc=Me,Ft=D,Sc={message:"must NOT have additional properties",params:({params:e})=>(0,ke._)`{additionalProperty: ${e.additionalProperty}}`},Ec={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Sc,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:c}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:i}=c;if(c.props=!0,i.removeAdditional!=="all"&&(0,Ft.alwaysValidSchema)(c,r))return;const l=(0,zt.allSchemaProperties)(n.properties),d=(0,zt.allSchemaProperties)(n.patternProperties);f(),e.ok((0,ke._)`${o} === ${bc.default.errors}`);function f(){t.forIn("key",s,y=>{!l.length&&!d.length?p(y):t.if(g(y),()=>p(y))})}function g(y){let h;if(l.length>8){const w=(0,Ft.schemaRefOrVal)(c,n.properties,"properties");h=(0,zt.isOwnProperty)(t,w,y)}else l.length?h=(0,ke.or)(...l.map(w=>(0,ke._)`${y} === ${w}`)):h=ke.nil;return d.length&&(h=(0,ke.or)(h,...d.map(w=>(0,ke._)`${(0,zt.usePattern)(e,w)}.test(${y})`))),(0,ke.not)(h)}function _(y){t.code((0,ke._)`delete ${s}[${y}]`)}function p(y){if(i.removeAdditional==="all"||i.removeAdditional&&r===!1){_(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,Ft.alwaysValidSchema)(c,r)){const h=t.name("valid");i.removeAdditional==="failing"?($(y,h,!1),t.if((0,ke.not)(h),()=>{e.reset(),_(y)})):($(y,h),a||t.if((0,ke.not)(h),()=>t.break()))}}function $(y,h,w){const k={keyword:"additionalProperties",dataProp:y,dataPropType:Ft.Type.Str};w===!1&&Object.assign(k,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(k,h)}}};lr.default=Ec;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});const Pc=or(),rs=K,Sr=D,ns=lr,Nc={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&ns.default.code(new Pc.KeywordCxt(o,ns.default,"additionalProperties"));const c=(0,rs.allSchemaProperties)(r);for(const f of c)o.definedProperties.add(f);o.opts.unevaluated&&c.length&&o.props!==!0&&(o.props=Sr.mergeEvaluated.props(t,(0,Sr.toHash)(c),o.props));const a=c.filter(f=>!(0,Sr.alwaysValidSchema)(o,r[f]));if(a.length===0)return;const i=t.name("valid");for(const f of a)l(f)?d(f):(t.if((0,rs.propertyInData)(t,s,f,o.opts.ownProperties)),d(f),o.allErrors||t.else().var(i,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(i);function l(f){return o.opts.useDefaults&&!o.compositeRule&&r[f].default!==void 0}function d(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},i)}}};_n.default=Nc;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});const ss=K,Kt=U,os=D,as=D,kc={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:c}=o,a=(0,ss.allSchemaProperties)(r),i=a.filter($=>(0,os.alwaysValidSchema)(o,r[$]));if(a.length===0||i.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const l=c.strictSchema&&!c.allowMatchingProperties&&s.properties,d=t.name("valid");o.props!==!0&&!(o.props instanceof Kt.Name)&&(o.props=(0,as.evaluatedPropsToName)(t,o.props));const{props:f}=o;g();function g(){for(const $ of a)l&&_($),o.allErrors?p($):(t.var(d,!0),p($),t.if(d))}function _($){for(const y in l)new RegExp($).test(y)&&(0,os.checkStrictMode)(o,`property ${y} matches pattern ${$} (use allowMatchingProperties)`)}function p($){t.forIn("key",n,y=>{t.if((0,Kt._)`${(0,ss.usePattern)(e,$)}.test(${y})`,()=>{const h=i.includes($);h||e.subschema({keyword:"patternProperties",schemaProp:$,dataProp:y,dataPropType:as.Type.Str},d),o.opts.unevaluated&&f!==!0?t.assign((0,Kt._)`${f}[${y}]`,!0):!h&&!o.allErrors&&t.if((0,Kt.not)(d),()=>t.break())})})}}};vn.default=kc;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});const Oc=D,jc={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,Oc.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};wn.default=jc;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});const Ic=K,Rc={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ic.validateUnion,error:{message:"must match a schema in anyOf"}};bn.default=Rc;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});const Wt=U,Tc=D,Mc={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Wt._)`{passingSchemas: ${e.passing}}`},Dc={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Mc,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,c=t.let("valid",!1),a=t.let("passing",null),i=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(c,()=>e.reset(),()=>e.error(!0));function l(){o.forEach((d,f)=>{let g;(0,Tc.alwaysValidSchema)(s,d)?t.var(i,!0):g=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},i),f>0&&t.if((0,Wt._)`${i} && ${c}`).assign(c,!1).assign(a,(0,Wt._)`[${a}, ${f}]`).else(),t.if(i,()=>{t.assign(c,!0),t.assign(a,f),g&&e.mergeEvaluated(g,Wt.Name)})})}}};Sn.default=Dc;var En={};Object.defineProperty(En,"__esModule",{value:!0});const Cc=D,Ac={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,c)=>{if((0,Cc.alwaysValidSchema)(n,o))return;const a=e.subschema({keyword:"allOf",schemaProp:c},s);e.ok(s),e.mergeEvaluated(a)})}};En.default=Ac;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});const rr=U,to=D,Vc={message:({params:e})=>(0,rr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,rr._)`{failingKeyword: ${e.ifClause}}`},Lc={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Vc,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,to.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=is(n,"then"),o=is(n,"else");if(!s&&!o)return;const c=t.let("valid",!0),a=t.name("_valid");if(i(),e.reset(),s&&o){const d=t.let("ifClause");e.setParams({ifClause:d}),t.if(a,l("then",d),l("else",d))}else s?t.if(a,l("then")):t.if((0,rr.not)(a),l("else"));e.pass(c,()=>e.error(!0));function i(){const d=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(d)}function l(d,f){return()=>{const g=e.subschema({keyword:d},a);t.assign(c,a),e.mergeValidEvaluated(g,c),f?t.assign(f,(0,rr._)`${d}`):e.setParams({ifClause:d})}}}};function is(e,t){const r=e.schema[t];return r!==void 0&&!(0,to.alwaysValidSchema)(e,r)}Pn.default=Lc;var Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});const qc=D,Hc={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,qc.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Nn.default=Hc;Object.defineProperty(pn,"__esModule",{value:!0});const zc=dt,Fc=mn,Kc=ft,Uc=yn,xc=gn,Jc=Zs,Gc=$n,Bc=lr,Wc=_n,Qc=vn,Yc=wn,Xc=bn,Zc=Sn,el=En,tl=Pn,rl=Nn;function nl(e=!1){const t=[Yc.default,Xc.default,Zc.default,el.default,tl.default,rl.default,Gc.default,Bc.default,Jc.default,Wc.default,Qc.default];return e?t.push(Fc.default,Uc.default):t.push(zc.default,Kc.default),t.push(xc.default),t}pn.default=nl;var kn={},On={};Object.defineProperty(On,"__esModule",{value:!0});const ne=U,sl={message:({schemaCode:e})=>(0,ne.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ne._)`{format: ${e}}`},ol={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:sl,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:c,it:a}=e,{opts:i,errSchemaPath:l,schemaEnv:d,self:f}=a;if(!i.validateFormats)return;s?g():_();function g(){const p=r.scopeValue("formats",{ref:f.formats,code:i.code.formats}),$=r.const("fDef",(0,ne._)`${p}[${c}]`),y=r.let("fType"),h=r.let("format");r.if((0,ne._)`typeof ${$} == "object" && !(${$} instanceof RegExp)`,()=>r.assign(y,(0,ne._)`${$}.type || "string"`).assign(h,(0,ne._)`${$}.validate`),()=>r.assign(y,(0,ne._)`"string"`).assign(h,$)),e.fail$data((0,ne.or)(w(),k()));function w(){return i.strictSchema===!1?ne.nil:(0,ne._)`${c} && !${h}`}function k(){const P=d.$async?(0,ne._)`(${$}.async ? await ${h}(${n}) : ${h}(${n}))`:(0,ne._)`${h}(${n})`,O=(0,ne._)`(typeof ${h} == "function" ? ${P} : ${h}.test(${n}))`;return(0,ne._)`${h} && ${h} !== true && ${y} === ${t} && !${O}`}}function _(){const p=f.formats[o];if(!p){w();return}if(p===!0)return;const[$,y,h]=k(p);$===t&&e.pass(P());function w(){if(i.strictSchema===!1){f.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${o}" ignored in schema at path "${l}"`}}function k(O){const R=O instanceof RegExp?(0,ne.regexpCode)(O):i.code.formats?(0,ne._)`${i.code.formats}${(0,ne.getProperty)(o)}`:void 0,A=r.scopeValue("formats",{key:o,ref:O,code:R});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,ne._)`${A}.validate`]:["string",O,A]}function P(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!d.$async)throw new Error("async format in sync schema");return(0,ne._)`await ${h}(${n})`}return typeof y=="function"?(0,ne._)`${h}(${n})`:(0,ne._)`${h}.test(${n})`}}}};On.default=ol;Object.defineProperty(kn,"__esModule",{value:!0});const al=On,il=[al.default];kn.default=il;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.contentVocabulary=ct.metadataVocabulary=void 0;ct.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ct.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Xr,"__esModule",{value:!0});const cl=Zr,ll=tn,ul=pn,dl=kn,cs=ct,fl=[cl.default,ll.default,(0,ul.default)(),dl.default,cs.metadataVocabulary,cs.contentVocabulary];Xr.default=fl;var jn={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.DiscrError=void 0;var ls;(function(e){e.Tag="tag",e.Mapping="mapping"})(ls||(ur.DiscrError=ls={}));Object.defineProperty(jn,"__esModule",{value:!0});const nt=U,Tr=ur,us=pe,hl=ut,pl=D,ml={message:({params:{discrError:e,tagName:t}})=>e===Tr.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,nt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},yl={keyword:"discriminator",type:"object",schemaType:"object",error:ml,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:c}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!c)throw new Error("discriminator: requires oneOf keyword");const i=t.let("valid",!1),l=t.const("tag",(0,nt._)`${r}${(0,nt.getProperty)(a)}`);t.if((0,nt._)`typeof ${l} == "string"`,()=>d(),()=>e.error(!1,{discrError:Tr.DiscrError.Tag,tag:l,tagName:a})),e.ok(i);function d(){const _=g();t.if(!1);for(const p in _)t.elseIf((0,nt._)`${l} === ${p}`),t.assign(i,f(_[p]));t.else(),e.error(!1,{discrError:Tr.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(_){const p=t.name("valid"),$=e.subschema({keyword:"oneOf",schemaProp:_},p);return e.mergeEvaluated($,nt.Name),p}function g(){var _;const p={},$=h(s);let y=!0;for(let P=0;P<c.length;P++){let O=c[P];if(O?.$ref&&!(0,pl.schemaHasRulesButRef)(O,o.self.RULES)){const A=O.$ref;if(O=us.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,A),O instanceof us.SchemaEnv&&(O=O.schema),O===void 0)throw new hl.default(o.opts.uriResolver,o.baseId,A)}const R=(_=O?.properties)===null||_===void 0?void 0:_[a];if(typeof R!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&($||h(O)),w(R,P)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return p;function h({required:P}){return Array.isArray(P)&&P.includes(a)}function w(P,O){if(P.const)k(P.const,O);else if(P.enum)for(const R of P.enum)k(R,O);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function k(P,O){if(typeof P!="string"||P in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[P]=O}}}};jn.default=yl;const gl="http://json-schema.org/draft-07/schema#",$l="http://json-schema.org/draft-07/schema#",_l="Core schema meta-schema",vl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},wl=["object","boolean"],bl={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Sl={$schema:gl,$id:$l,title:_l,definitions:vl,type:wl,properties:bl,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=ws,n=Xr,s=jn,o=Sl,c=["/properties"],a="http://json-schema.org/draft-07/schema";class i extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(o,c):o;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=i,e.exports=t=i,e.exports.Ajv=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var l=or();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var d=U;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var f=Tt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var g=ut;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return g.default}})})(Pr,Pr.exports);const El=wo(Pr.exports),Pl=0xcbf29ce484222325n,Nl=0x84222325cbf29ce4n,kl=0x100000001b3n,Ol=(1n<<64n)-1n,ds=(e,t)=>{let r=t;for(let n=0;n<e.length;n+=1)r^=BigInt(e.charCodeAt(n)),r=r*kl&Ol;return r},fs=e=>e.toString(16).padStart(16,"0"),dr=(...e)=>{const t=JSON.stringify(e),r=ds(t,Pl),n=ds(t,Nl);return`${fs(r)}${fs(n)}`},Te={type:"string"},jl={type:"number"},Ze=(e,t={})=>({type:"object",properties:e,required:Object.keys(e),...t}),qe=e=>JSON.stringify(e,null,2),lt=e=>JSON.parse(e),ro=(e,t)=>{const r=new El().compile(t);if(r(e))return!0;throw new Error(r.errors?.map(n=>n.message).join(", ")||"Invalid data")};function _e({schemaHash:e,data:t}){if(e==="0"&&qe(t)!="{}")throw new Error("schema hash is 0 but data is not empty :"+qe(t));return dr(e,t)}function we(e,t,r){return{schemaHash:_e(t),data:{...e?{title:e}:{},...r}}}const Ue={schemaHash:"0",data:{}},Dt=we("script_schema",Ue,Ze({title:Te,code:Te})),no=we("script_result_schema",Ue,Ze({title:Te,script:"#"+_e(Dt),content:{}},{title:"script_result_schema"})),so=we("titled_schema",Ue,Ze({title:Te})),In=we("has_titled_child",Ue,Ze({child:Ze({title:Te})})),Rn=we("a titled",so,{title:"im child"}),Il=we("titled1",In,{child:Rn.data}),Rl=we("titled2",In,{child:`#${_e(Rn)}`}),Ct=we("function schema",Ue,Ze({title:Te,code:Te},{title:"function_schema",required:["code"]})),oo=we("function schema",Ue,Ze({title:Te,code:Te},{title:"server_function",required:["code"]})),Tl=we("example function",Ct,{title:"example function",inputs:["a","b"],code:"return a + b"});we("",Ue,Te),we("",Ue,jl);const We=e=>typeof e=="string"&&/^#([a-f0-9]+)$/.exec(e),Et=async(e,t,r=new Set)=>{if(typeof e=="string"){const n=We(e);if(!n)return e;const s=n[1];if(r.has(s))throw new Error(`cycle: #${s}`);return r.add(s),Et(await t(s),t,r)}return Array.isArray(e)?Promise.all(e.map(n=>Et(n,t,r))):e&&typeof e=="object"?Object.fromEntries(await Promise.all(Object.entries(e).map(async([n,s])=>[n,await Et(s,t,r)]))):e},Ml=(e,t,r)=>typeof e=="number"?t(e):(e[0]=="#"&&(e=e.slice(1)),e.length==32?r(e):t(Number(e))),Tn="jsonview",Mr={local:"http://localhost:3000",prod:"https://maincloud.spacetimedb.com"},Dl=()=>["localhost","127.0.0.1"].includes(window.location.hostname),Cl=()=>{const e=new URLSearchParams(window.location.search).get("db"),t=localStorage.getItem("db_preset");return e&&Mr[e]?(localStorage.setItem("db_preset",e),e):t&&Mr[t]?t:Dl()?"local":"prod"},Al=Cl(),ao=Mr[Al];let nr=localStorage.getItem("access_token");const fr=(e,t,r=null)=>fetch(`${ao}${e}`,{method:t,headers:{"Content-Type":"application/json",...nr?{Authorization:`Bearer ${nr}`}:{}},body:r}),Mn=async(e,t)=>{const r=await fr(`/v1/database/${Tn}/call/${e}`,"POST",JSON.stringify(t));if(!r.ok)throw new Error(await r.text());return r.text()},be=async(e,t=!1,r=null)=>{if(t&&r!=null){const s=await be("select count from note_count");let o=Math.max(0,Number(s.rows[0][0])-r);e=e+` where id > ${o}`}const n=await(await fr(`/v1/database/${Tn}/sql`,"POST",e)).text();try{const s=JSON.parse(n);s.length>1&&console.warn("multiple rows returned, TODO: handle this");const{schema:o,rows:c}=s[0];return{names:o.elements.map(a=>a.name.some),rows:t?c.reverse():c}}catch(s){return $e(oe(n)),{names:["error"],rows:[s.message]}}},io=e=>{const t=new Map,r=dr(e.toString()+":cached:"+ao);return async n=>{const s=r+JSON.stringify(n);if(t.has(s))return t.get(s);const o=localStorage.getItem(s);if(o){const a=JSON.parse(o);return t.set(s,a),a}const c=await e(n);return localStorage.setItem(s,JSON.stringify(c)),t.set(s,c),c}},Dn=async(e,t)=>{let r=await Ot(e);const n=await fr(`/v1/database/${Tn}/call/add_note`,"POST",JSON.stringify({schemaHash:r,data:qe(t)}));if(!n.ok)throw new Error(await n.text());return"#"+_e({schemaHash:r,data:t})},hr=io(async e=>{const t=await be(Ml(e,n=>`select * from note where id = ${n}`,n=>`select * from note where hash = '${n}'`)),r=t.rows[0];if(!r)throw new Error("note not found");return Object.fromEntries(t.names.map((n,s)=>[n,r[s]]))}),At=e=>hr(e).then(t=>t.id),Ot=e=>hr(e).then(t=>t.hash),co=e=>hr(e).then(t=>t.schemaId),ve=io(async e=>{const t=await hr(e);return{schemaHash:await Ot(t.schemaId),data:lt(t.data)}});nr===null&&fr("/v1/identity","POST").then(e=>e.json()).then(e=>{nr=e.token});const Vl=async e=>{try{const t=s=>ve(s).then(o=>o.data),r=typeof e.data=="string"?JSON.parse(e.data):e.data,n=(await ve(e.schemaHash)).data;return ro(await Et(r,t),await Et(n,t))}catch(t){throw new Error(t.message||t)}},Dr=e=>ve(e).then(async t=>{let r=t.data,n=typeof r=="string"?r:JSON.stringify(r);return n=n.replace(/\n/g," "),`#${await At(e)}`+(r?.title?`:${r.title}`:typeof r=="string"||typeof r=="number"?`:${n.slice(0,20)}`:"")}),Cn=e=>ve(e).then(async t=>{let r=t.data,n="",s=(o,c)=>{let a="  ".repeat(c);if(typeof o=="string")if(o.length>60||o.includes(`
`)){const l=o.split(`
`);n+=`
`+a+"`",l.forEach((d,f)=>{n+=(f===0?"":`
`+a)+d}),n+="`"}else n+=" "+o;else typeof o=="number"?n+=" "+o:typeof o=="object"&&Object.entries(o).forEach(([i,l])=>{n+=`
`+a+i+":",s(l,c+1)})};return s(r,0),n}),An=(e,t,r={})=>{let n=it(t??`#${e}`);const s=typeof e=="string"?e.replace(/^#/,""):String(e);return t===void 0&&Dr(e).then(o=>n.innerHTML=o),Yt(`/${s}`,n,r)},Ll=e=>JSON.stringify(e,null,2),Qe=q(oe("loading...")),pr=(e,t)=>{const r=[...t].sort((c,a)=>(a.count||0)-(c.count||0)||(Number(a.id)||0)-(Number(c.id)||0)),n=c=>{Qe.innerHTML="";const a=q(z({display:"flex",flexDirection:"column",gap:"0.5em"}));c.slice(0,10).forEach(i=>{const l=i.count!==void 0?` (${i.count})`:"",d=q(z({display:"flex",gap:"0.5em",alignItems:"center"}),re(`#${i.id}${i.title?` : ${i.title}`:""}${l}`,{style:{textAlign:"left",width:"100%"},onclick:()=>{e(i),o.remove()}}),re("preview",{onclick:()=>window.open(`/${i.hash}`,"_blank","noopener"),style:{fontSize:"0.85em",padding:"0.2em 0.4em"}}));a.appendChild(d)}),Qe.appendChild(a)};n(r);const s=Nt("",{placeholder:"search id, title, hash"});s.oninput=()=>{const c=s.value.trim().toLowerCase();if(!c)return n(r);const a=r.filter(l=>l.id.toLowerCase().includes(c));if(a.length)return n(a);const i=r.filter(l=>l.title.toLowerCase().includes(c));return n(i)};let o=$e(q(z({display:"flex",flexDirection:"column",gap:"0.5em"}),s,Qe))},lo=(e,t,r="change schema")=>re(r,{onclick:()=>{e().then(n=>{pr(t,n)}).catch(n=>{Qe.innerHTML="",Qe.appendChild(oe(n.message||"failed to load schemas"))})}}),$t=(e,t,r)=>{let{type:n,properties:s,items:o}=e;if(!n){let a=$t({type:"string"},()=>{try{let d=a.getData(),f=lt(d);l.innerHTML="",i.onclick=()=>a.setData(qe(f))}catch(d){l.innerHTML=String(d)}}),i=re("format"),l=it("hello",z({color:"red",margin:"0.5em"}));return{element:q(a.element,q(i,l)),getData:()=>lt(a.getData()),setData:d=>a.setData(qe(d))}}const c=a=>{let i="";const l=it();l.style.display="none",l.style.cursor=r?"pointer":"default",l.style.textDecoration=r?"underline":"none",l.onclick=p=>{if(r&&We(i)){p.preventDefault(),r(i.slice(1));return}i="",l.style.display="none",a.element.style.display="",t()};const d=p=>{i=p,We(i)?(l.innerText=i,l.style.display="",a.element.style.display="none"):(l.style.display="none",a.element.style.display=""),t()},f=()=>be("select id, data, hash from note",!0,200).then(p=>p.rows.map($=>{let y="";try{const h=JSON.parse(String($[1]??""));y=h?.title?String(h.title):""}catch{}return{id:String($[0]),title:y,hash:String($[2]??"")}})),_=re("\u{1F517}",{onclick:()=>{f().then(p=>{pr($=>d(`#${$.hash}`),p)}).catch(p=>{Qe.innerHTML="",Qe.appendChild(oe(p.message||"failed to load notes"))})},style:{background:"transparent",border:"none",padding:"0 0.1em",cursor:"pointer"}});return{element:q(z({display:"inline-flex",alignItems:"center",gap:"0.25em"}),_,l,a.element),getData:()=>We(i)?i:a.getData(),setData:p=>{typeof p=="string"&&We(p)?d(p):(d(""),a.setData(p))}}};if(n=="string"){let a=Lr();a.rows=1,a.style.resize="none",a.style.overflow="hidden",a.style.verticalAlign="middle",a.style.boxSizing="content-box";const i=50,l=q(z({display:"none",position:"absolute",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)",zIndex:"1000",maxHeight:"200px",overflowY:"auto"})),d=()=>be("select id, data, hash from note",!0,200).then(p=>p.rows.map($=>{let y="";try{const h=JSON.parse(String($[1]??""));y=h?.title?String(h.title):""}catch{}return{id:String($[0]),title:y,hash:String($[2]??"")}})),f=()=>{const p=a.selectionStart??0,$=a.value,y=$.lastIndexOf("#",p-1);if(y<0){l.style.display="none";return}const h=$.slice(y+1,p);if(!/^[A-Za-z0-9]*$/.test(h)){l.style.display="none";return}d().then(w=>{const k=h.toLowerCase(),P=w.filter(O=>O.id.toLowerCase().includes(k)||O.title.toLowerCase().includes(k)).slice(0,8);if(l.innerHTML="",!P.length){l.style.display="none";return}P.forEach(O=>{l.appendChild(re(`#${O.id}${O.title?`: ${O.title}`:""}`,{onclick:()=>{const R=$.slice(0,y),A=$.slice(p);a.value=`${R}#${O.id}${A}`;const B=y+1+O.id.length;a.setSelectionRange(B,B),l.style.display="none",g()}}))}),l.style.display="block"})},g=()=>{a.style.height="0px",a.style.height=`${a.scrollHeight}px`;const p=a.value.split(`
`).reduce(($,y)=>Math.max($,y.length),0);a.style.width=`${Math.max(i,p+1)}ch`,t()};a.oninput=()=>{g(),f()},a.onkeydown=p=>{p.key==="#"&&f()},requestAnimationFrame(g);const _=q(z({position:"relative",display:"inline-block"}),a,l);return c({element:_,getData:()=>a.value,setData:p=>{a.value=p,g()}})}if(n=="number"){let a=Nt();return a.type="number",a.oninput=t,c({element:a,getData:()=>Number(a.value),setData:i=>{a.value=String(i)}})}if(n=="array"){let a=[],i=q();const l=f=>{const g=q(z({display:"flex",alignItems:"center",gap:"0.25em"}),re("-",{onclick:()=>{a=a.filter(_=>_!==f),g.remove(),t()}}),f.element);return g};let d=q(z({paddingLeft:"0.5em"}),i,re("+",{onclick:()=>{let f=$t(o,t);a.push(f),i.append(l(f)),t()}}));return c({element:d,getData:()=>a.map(f=>f.getData()),setData:f=>{a=f.map(g=>{let _=$t(o,t);return _.setData(g),i.append(l(_)),_})}})}if(n=="object"){const a=new Set(e.required||[]);let i=Object.entries(s).map(([l,d])=>({key:l,field:$t(d,t),box:Nt()}));return c({element:q(i.map(({key:l,field:d,box:f})=>(f.type="checkbox",a.has(l)&&(f.checked=!0,f.disabled=!0),f.oninput=()=>t(),f.onchange=()=>{const g=f.checked||a.has(l);d.element.style.display=g?"":"none",t()},a.has(l)||(d.element.style.display="none"),oe(f,l,":",d.element)))),getData:()=>Object.fromEntries(i.filter(({key:l,field:d})=>a.has(l)||d.element.style.display!=="none").map(({key:l,field:d})=>[l,d.getData()])),setData:l=>{i.forEach(({key:d,field:f,box:g})=>{a.has(d)?f.element.style.display="":(g.checked=!1,f.element.style.display="none")}),Object.entries(l).forEach(([d,f])=>{const g=i.find(_=>_.key===d);g&&(g.field.setData(f),a.has(d)||(g.box.checked=!0,g.field.element.style.display=""))})}})}},uo="$"+dr("openrouter");let Ut=localStorage.getItem(uo)||"";const fo=async(e,t,r="openai/gpt-4o")=>{Ut===""&&await new Promise((o,c)=>{let a=Nt(),i=$e(oe("Please enter your OpenRouter API key to use the LLM feature"),a);a.addEventListener("keydown",l=>{l.key=="Enter"&&(Ut=a.value,localStorage.setItem(uo,Ut),o(),i.remove())})});const s=await(await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${await Ut}`,"Content-Type":"application/json"},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],response_format:{type:"json_schema",json_schema:{name:"response",schema:t}}})})).json();try{let o=JSON.parse(s.choices[0].message.content);return ro(o,t),o}catch{return s}},Cr=new Map;let ql=1;const Hl=e=>(...t)=>new Promise((r,n)=>{const s=ql++;Cr.set(s,{resolve:r,reject:n}),self.postMessage({type:"call",id:s,name:e,args:JSON.stringify(t)})}),Ar=["openrouter","getNote","addNote","callNote","remote"];self.onmessage=async e=>{const t=e.data||{};if(t.type==="response"){const s=Cr.get(Number(t.id));if(!s)return;Cr.delete(Number(t.id)),t.error?s.reject(t.error):s.resolve(t.result);return}if(t.type!=="run")return;const{code:r,input:n}=t;try{const o=await new Function("input",...Ar,`return (async () => {${r}})()`)(n,...Ar.map(Hl));self.postMessage({type:"run_result",ok:!0,result:o})}catch(s){self.postMessage({type:"run_result",ok:!1,error:String(s)})}};const Vn=async(e,...t)=>{let r=await ve(e);if(r.schemaHash!=_e(Ct))throw new Error("can only call Function schema notes");let n=r.data;const s={getNote:ve,addNote:Dn,call:Vn,remote:async(o,c)=>{const a=String(o).replace(/^#/,""),i=/^\d+$/.test(a)?Number(a):await At(a),l=c!==void 0?JSON.stringify(c):"null",d=await Mn("run_note_async",{id:i,arg:l});try{return JSON.parse(d)}catch{return d}},openrouter:async(o,c)=>(We(c)&&(c=(await ve(c)).data),fo(o,c)),hash:dr};return n.inputs&&n.inputs.length>0?new Function(...n.inputs,...Object.keys(s),`return (async () => {${n.code}})()`)(...t,...Object.values(s)):new Function("args",...Object.keys(s),`return (async () => {${n.code}})()`)(t.length===1?t[0]:t,...Object.values(s))},zl={openrouter:async(e,t)=>(We(t)&&(t=(await ve(t)).data),fo(e,t)),getNote:ve,addNote:Dn,callNote:Vn,remote:async(e,t)=>{const r=String(e).replace(/^#/,""),n=/^\d+$/.test(r)?BigInt(r):await At(r),s=await Mn("run_note_async",{id:n,arg:JSON.stringify(t)});try{return JSON.parse(s)}catch{return s}}};for(let e of Ar)if(!Object.keys(zl).includes(e))throw new Error("buildin missing but expected: "+e);const hs=e=>{const t=it(z({margin:"0.5em"})),r=/#([a-f0-9]+)/g;let n=0,s;for(;s=r.exec(e);){const o=s.index,c=s[1],a=/^\d+$/.test(c)?Number(c):c;o>n&&t.append(document.createTextNode(e.slice(n,o))),t.append(An(a)),n=o+s[0].length}return n<e.length&&t.append(document.createTextNode(e.slice(n))),t},Fl=(e,t)=>{const r=q(z({display:"flex",flexDirection:"column",gap:"0.75em"}));return ve(e).then(async n=>{const s=await At(e),o=await co(e),c=n.data?.title??"",a=n.schemaHash===_e(Dt),i=a?String(n.data.code||""):Ll(n.data);let l=localStorage.getItem("note_view_mode")==="overview";const d=q(z({fontFamily:"monospace",whiteSpace:"pre",marginTop:"1em",overflowX:"auto",paddingBottom:"0.5em"})),f=()=>{d.innerHTML="",l&&!a?Cn(e).then(p=>{d.append(_t(hs(p)))}):d.append(hs(i))},g=re(l?"json view":"overview",{onclick:()=>{l=!l,localStorage.setItem("note_view_mode",l?"overview":"json"),g.textContent=l?"json view":"overview",f()}});r.innerHTML="";const _=Vr(`${a?"Script":"Note"} #${s} ${c} `);if(n.schemaHash===_e(oo)){const p=re("run async",{onclick:async()=>{let $=localStorage.getItem("server_fun_arg")??"{}";const y=prompt("args as JSON (array or value)",$);if(localStorage.setItem("server_fun_arg",y),y!=null)try{p.textContent="running...";const h=await Mn("run_note_async",{id:s,arg:y});let w=h;try{w=JSON.parse(h)}catch{}if(typeof w=="string")try{w=JSON.parse(w)}catch{}$e(Ie("result"),_t(JSON.stringify(w,null,2)))}catch(h){$e(Ie("ERROR"),oe(h.message||"run failed"))}finally{p.textContent="run async"}}});_.append(p)}if(n.schemaHash===_e(Ct)){const p=re("run local",{onclick:async()=>{const y=n.data.code.includes("args");let h={};if(y){const w='{"a": 1, "b": 2}';let k=localStorage.getItem("local_fun_arg")??w;const P=prompt('args as JSON object (e.g., {"a": 5, "b": 3})',k);if(P==null)return;const O=P.trim();if(!O){$e(Ie("ERROR"),oe("Args cannot be empty. Use {} for no arguments."));return}try{h=JSON.parse(O),localStorage.setItem("local_fun_arg",O)}catch(R){$e(Ie("ERROR"),oe("Invalid JSON: "+R.message));return}}try{p.textContent="running...";const w=Array.isArray(h)?h:[h],k=await Vn(e,...w);$e(Ie("result"),_t(JSON.stringify(k,null,2)))}catch(w){$e(Ie("ERROR"),oe(w.message||"run failed"))}finally{p.textContent="run local"}}});_.append(p)}f(),r.append(_,a?"":oe("schema: ",An(o)),a?"":q(z({marginBottom:"0.5em"}),g),d,q(z({display:"flex",gap:"0.75em",alignItems:"center",paddingBottom:"0.5em"}),Yt(`/edit?id=${s}`,"edit"),Yt(`/deps/${e}`,"deps"),re("copy",{onclick:p=>navigator.clipboard.writeText(i).then(()=>p.target.textContent="copied").catch($=>$e(Ie("ERROR"),oe($.message||"copy failed")))})))}),r},Kl=({query:e,navigate:t,onRow:r})=>{let n=100;const s="any",o=_e(Dt),c=_e(no),a=q(),i=q(z({display:"flex",gap:"0.5em",alignItems:"center",flexWrap:"wrap"}),re("any",{onclick:()=>g(s)}),re("function",{onclick:()=>g(_e(Ct))}),re("script",{onclick:()=>g(o)}),re("script output",{onclick:()=>g(c)}),lo(()=>Promise.all([e("select id, data, hash from note where schemaId = 0"),e("select schemaId from note")]).then(([y,h])=>{const w=new Map;return h.rows.forEach(k=>{const P=String(k[0]);w.set(P,(w.get(P)||0)+1)}),y.rows.map(k=>{let P="";try{const R=JSON.parse(String(k[1]??""));P=R?.title?String(R.title):""}catch{}const O=String(k[0]);return{id:O,title:P,hash:String(k[2]??""),count:w.get(O)||0}})}),y=>g(y.hash)));let l=s;const d=()=>e("select id, data, hash from note limit 200").then(y=>y.rows.map(h=>{let w="";try{w=JSON.parse(String(h[1]??""))?.title??""}catch{}return{id:String(h[0]),title:w,hash:String(h[2]??"")}})),f=()=>{d().then(y=>{pr(h=>t(`/${h.id}`),y)})},g=y=>{l=y,_()},_=async()=>{let y=50;a.innerHTML="",a.append(oe("running..."));let h=null;try{const O=await e("select count from note_count");n=Math.max(y,Number(O.rows[0][0]))}catch{}if(l!==s&&(/^\d+$/.test(l)?h=Number(l):h=(await e(`select id from note where hash = '${l}'`)).rows[0]?.[0]??null),l!==s&&h===null){a.innerHTML="",a.append(oe("no matches"));return}const w=`id >= ${n-y} and id < ${n}`,P=`select id, data from note where ${h===null?w:`schemaId = ${h} and ${w}`} limit 50`;e(P).then(O=>{a.innerHTML="";const R=q(z({display:"flex",flexDirection:"column",gap:"0.5em"}));[...O.rows].reverse().forEach(B=>{const J={};O.names.forEach((Q,te)=>{J[Q]=B[te]}),r&&r(J);let W=String(J.data??"");W=W.replace(/[\n\r]/g,""),W=W.length>60?W.substring(0,60)+"...":W,R.append(An(J.id))}),a.append(R)})},p=re("\u{1F50D} Search Notes",{onclick:f,style:{padding:"0.25em 0.5em",border:"1px solid #ccc",borderRadius:"0.25em",background:"inherit",color:"inherit",cursor:"pointer"}});return{root:q(z({display:"flex",flexDirection:"column",gap:"0.75em"}),q(z({display:"flex",gap:"0.5em",flexWrap:"wrap"}),Yt("/edit?new=1",{style:{textDecoration:"none",color:"inherit",fontWeight:"bold",border:"1px solid #ccc",borderRadius:"0.25em",padding:"0.25em 0.5em"}},"+ Add Note"),p),i,a),runQuery:_}},Ul=()=>Promise.all([be("select id, data, hash from note where schemaId = 0"),be("select schemaId from note")]).then(([e,t])=>{const r=new Map;return t.rows.forEach(n=>r.set(String(n[0]),(r.get(String(n[0]))||0)+1)),e.rows.map(n=>{let s="";try{s=JSON.parse(String(n[1]??""))?.title??""}catch{}const o=String(n[0]);return{id:o,title:s,hash:String(n[2]??""),count:r.get(o)||0}})}),xl=()=>be("select id, data, hash from note limit 200").then(e=>e.rows.map(t=>{let r="";try{r=JSON.parse(String(t[1]??""))?.title??""}catch{}return{id:String(t[0]),title:r,hash:String(t[2]??"")}})),Jl=e=>{let t="";const r=sr({href:"/0",style:{textDecoration:"underline",color:"inherit"}},"view");r.onclick=i=>{i.metaKey||i.ctrlKey||(i.preventDefault(),history.pushState({},"",r.getAttribute("href")||"/"),window.dispatchEvent(new PopStateEvent("popstate")))};const n=_t(),s=()=>Cn(t).then(i=>n.innerHTML=i),o=i=>{i!==t&&(t=i,r.setAttribute("href",`/${i}`),e(i),s())},c=lo(Ul,i=>o(i.hash));return{root:q(z({padding:"1em",marginTop:"0.5em",borderRadius:"1em",border:"1px solid #ccc",background:"var(--background-color)"}),q(z({display:"flex",alignItems:"center",gap:"0.75em",flexWrap:"wrap"}),r,c),q(z({display:"flex",gap:"1em",alignItems:"flex-start"}),q(n))),setSchemaHash:o,getSchemaHash:()=>t}},Gl=({submit:e})=>{const t=_e(Dt);let r="",n=null;const s=Nt("",{placeholder:"script title",style:{display:"none",marginBottom:"0.5em",fontSize:"1.1em",padding:"0.4em 0.6em",color:"inherit",background:"inherit",border:"none",outline:"none",width:"100%"}}),o=Lr(z({fontFamily:"monospace",minHeight:"12em",resize:"vertical",background:"inherit",color:"inherit",width:"100%"}));o.rows=10,o.cols=100;const c=document.createElement("p"),a=q(z({display:"none",border:"1px solid #ccc",padding:"0.5em",borderRadius:"0.5em",background:"var(--background-color)"})),i=()=>r===t,l=()=>i()?{schemaHash:r,text:qe({title:s.value,code:o.value})}:{schemaHash:r,text:o.value},d=()=>{o.style.height="auto",o.style.height=`${o.scrollHeight}px`},f=(P,O)=>{c.textContent=P,c.style.color=O};f("valid","green");const g=P=>{if(o.dispatchEvent(new Event("input")),(P.metaKey||P.ctrlKey)&&P.key.toLowerCase()==="s"){P.preventDefault(),w.click();return}if(P.key==="Enter"){P.preventDefault();const Q=o.selectionStart||0,te=o.selectionEnd||0,Y=o.value.slice(0,Q),Z=o.value.slice(te),me=Y.slice(Y.lastIndexOf(`
`)+1),je=me.match(/^\s*/)?.[0]||"",De=/[\{\[]\s*$/.test(me)?"  ":"";o.value=`${Y}
${je}${De}${Z}`;const He=Q+1+je.length+De.length;o.setSelectionRange(He,He);return}const O={"{":"}","[":"]","(":")",'"':'"'};if(P.metaKey||P.ctrlKey||P.altKey||!(P.key in O))return;const R=o.selectionStart||0,A=o.selectionEnd||0;if(R===A&&o.value[R]===O[P.key]){P.preventDefault(),o.setSelectionRange(R+1,R+1);return}if(P.key==='"'&&R===A&&o.value[R-1]==="\\")return;P.preventDefault();const B=o.value.slice(0,R),J=o.value.slice(A),W=o.value.slice(R,A);o.value=`${B}${P.key}${W}${O[P.key]}${J}`,o.setSelectionRange(R+1+W.length,R+1+W.length)};o.onkeydown=g;const _=()=>n?Promise.resolve(n):xl().then(P=>n=P),p=()=>{if(!i()){a.style.display="none";return}const P=o.selectionStart??0,O=o.value,R=O.lastIndexOf("#",P-1);if(R<0){a.style.display="none";return}const A=O.slice(R+1,P);if(!/^[A-Za-z0-9]*$/.test(A)){a.style.display="none";return}_().then(B=>{const J=A.toLowerCase(),W=B.filter(Q=>Q.id.toLowerCase().includes(J)||Q.title.toLowerCase().includes(J)).slice(0,8);if(a.innerHTML="",!W.length){a.style.display="none";return}W.forEach(Q=>{a.appendChild(re(`#${Q.id}${Q.title?`: ${Q.title}`:""}`,{onclick:()=>{const te=O.slice(0,R),Y=O.slice(P);o.value=`${te}#${Q.id}${Y}`;const Z=R+1+Q.id.length;o.setSelectionRange(Z,Z),y(o.value),a.style.display="none"}}))}),a.style.display="block"})},$=async()=>{c.innerText="validating...",c.style.color="#666";try{await Vl({schemaHash:r,data:JSON.parse(l().text)}),f("valid","#2a3")}catch(P){f(P.message||"invalid json","#f66")}},y=P=>{o.value!==P&&(o.value=P),$(),localStorage.setItem("edit_draft",JSON.stringify(l()))},h=P=>{r=P,s.style.display=i()?"block":"none"};o.oninput=()=>{y(o.value),p(),d(),window.location.search.includes("new=1")&&history.replaceState({},"","/edit")};const w=re("format json (cmd+s)",{onclick:()=>{i()||y(qe(lt(o.value)))}}),k=q(s,o,a,q(z({display:"flex",gap:"0.5em",alignItems:"center"}),w,c),re("push",{onclick:()=>e({schemaHash:r,data:JSON.parse(l().text)})}));return d(),{root:k,setSchemaHash:h,getDraft:l,fill:({schemaHash:P,text:O})=>{if(h(P),i())try{const R=lt(O);s.value=R.title??"",o.value=R.code??""}catch{o.value=O}else o.value=O;$(),localStorage.setItem("edit_draft",JSON.stringify(l())),o.focus()}}},Bl=({submit:e})=>{let t,r;const n=q(),s=()=>({schemaHash:t,text:qe(r.getData())}),o=()=>{localStorage.setItem("edit_draft",JSON.stringify(s()))},c=i=>(t=i,n.innerHTML="",ve(t).then(l=>{r=$t(l.data,o),n.innerHTML="",n.append(r.element,q(z({marginTop:"0.5em"}),re("push",{onclick:()=>e({schemaHash:t,data:r.getData()})})))})),a=i=>{r.setData(lt(i)),o()};return{setSchemaHash:c,getDraft:s,fill:({schemaHash:i,text:l})=>c(i).then(()=>a(l)),root:n}},Wl=e=>{const t=Gl(e),r=Bl(e);let n={plain:t,nice:r}[localStorage.editmode||"nice"]??r;const s=Jl(d=>n.setSchemaHash(d));let o;const a=re("niceview",{onclick:()=>{o=n.getDraft(),n=n===r?t:r,n.fill(o),localStorage.editmode=n===r?"nice":"plain",l()}}),i=q(),l=()=>{i.innerHTML="",i.append(a,n.root,s.root)};return l(),{fill:d=>{o=d,s.setSchemaHash(d.schemaHash),n.fill(d)},root:i}},Ql=({query:e,onRow:t})=>{const r="dashboard_sql",n=localStorage.getItem(r),s=Lr(z({fontFamily:"monospace",padding:".5em"}),n||"select id, data from note limit 50");s.rows=2,s.cols=100,s.onkeydown=d=>{(d.metaKey||d.ctrlKey)&&d.key==="Enter"&&(d.preventDefault(),a())},s.oninput=()=>{localStorage.setItem(r,s.value)};const o=q(),c=d=>{if(typeof d=="bigint")return d.toString();if(typeof d=="number"){const f=String(d);return f.includes("e")||f.includes("E")?d.toLocaleString("fullwide",{useGrouping:!1}):f}return String(d)},a=()=>{o.innerHTML="",o.append(oe("running...")),e(s.value).then(d=>{o.innerHTML="";const f=$o(z({borderCollapse:"collapse"}),zn(d.names.map(g=>vo(z({border:"1px solid #ccc",padding:".5em"}),g))),...d.rows.map(g=>{const _={};return d.names.forEach((p,$)=>{_[p]=g[$]}),t&&t(_),zn(...g.map(p=>{let $=c(p).replace(/[\n\r]/g,"");return $=$.length>20?$.substring(0,20)+"...":$,_o(z({border:"1px solid #ccc",padding:".5em"}),$)}))}));o.append(f)})},i=q(z({display:"flex",alignItems:"center",gap:"0.5em"}),oe(z({opacity:"0.6",margin:"0"}),"SQL console:"),re("run",{onclick:a,style:{fontSize:"0.85em",padding:"0.2em 0.5em"}}));return{root:q(z({display:"flex",flexDirection:"column",gap:"0.75em"}),Vr("SQL"),i,s,o),runQuery:a}},jt=(e,t)=>(e.insertAdjacentHTML("beforeend",t),e.lastElementChild),It=(e,t)=>{if(t.x>1||t.y>1)return t;const{width:r,height:n}=e.getBoundingClientRect();return{x:t.x*r,y:t.y*n}},ps=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2,curvature:c=.4}=n,a=It(e,t),i=It(e,r),l=Math.max(10,Math.abs(i.x-a.x)*c);jt(e,`<path d="M ${a.x} ${a.y} C ${a.x+l} ${a.y} ${i.x-l} ${i.y} ${i.x} ${i.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const d=10,f=i.x-d,g=i.y-d*.5,_=i.x-d,p=i.y+d*.5;return jt(e,`<path d="M ${i.x} ${i.y} L ${f} ${g} M ${i.x} ${i.y} L ${_} ${p}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},Yl=(e,t,r,n={})=>{const{stroke:s="currentColor",strokeWidth:o=2}=n,c=It(e,t),a=It(e,r);jt(e,`<path d="M ${c.x} ${c.y} L ${a.x} ${a.y}" fill="none" stroke="${s}" stroke-width="${o}"></path>`);const i=10,l=a.x-i*.5,d=a.y-i,f=a.x+i*.5,g=a.y-i;return jt(e,`<path d="M ${a.x} ${a.y} L ${l} ${d} M ${a.x} ${a.y} L ${f} ${g}" fill="none" stroke="${s}" stroke-width="${o}"></path>`)},ms=(e,t,r)=>{const s=It(e,t),o=jt(e,`<g><text x="${s.x}" y="${s.y}" dominant-baseline="middle" text-anchor="middle" fill="var(--color)" font-size="14" cursor="pointer" font-family="sans-serif">${r}</text></g>`),c=o?.querySelector("text"),a=5,l=c.getBBox().height+a*2,d=s.x-220/2,f=s.y-l/2;return o.insertAdjacentHTML("afterbegin",`<rect x="${d}" y="${f}" width="${220}" height="${l}" rx="2" ry="2" fill="var(--background-color)" cursor="pointer" stroke="var(--color)" stroke-width="2"></rect>`),{node:o,rect:{x:d,y:f,width:220,height:l}}},Xl=(e,t,r=10)=>{const n=[],s=[];e.forEach(c=>{const a=Number(c[0]),i=c[1]||[];i.some(l=>Number(l)===Number(t))&&n.push(a),a===Number(t)&&s.push(...i)});const o=c=>[...new Set(c)];return{currentId:t,inputs:o(n).slice(0,r),outputs:o(s).slice(0,r)}},Zl=({query:e,navigate:t})=>{const r=q(z({display:"flex",flexDirection:"column",gap:"0.75em"})),n=q(z({width:"100%",minHeight:"320px"})),s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=_t();s.setAttribute("width","100%"),s.setAttribute("height","320"),n.append(s,o);const c=()=>Promise.all([be("select id, data, hash from note where schemaId = 0"),be("select schemaId from note")]).then(([i,l])=>{const d=new Map;return l.rows.forEach(f=>{const g=String(f[0]);d.set(g,(d.get(g)||0)+1)}),i.rows.map(f=>{let g="";try{const p=JSON.parse(String(f[1]??""));g=p?.title?String(p.title):""}catch{}const _=String(f[0]);return{id:_,title:g,hash:String(f[2]??""),count:d.get(_)||0}})});r.append(Vr("Dependencies"),n);const a=async i=>{if(s.innerHTML="",!i){c().then(R=>pr(A=>{window.history.pushState({},"",`/deps/${A.id}`),a(A.id)},R));return}const l=await At(i),d=await co(i),f=await e("select to, from from links"),g=Xl(f.rows,l);g.inputs=g.inputs.filter(R=>R!=d);const _=[{ids:g.inputs,x:.2},{ids:[g.currentId],x:.5},{ids:g.outputs,x:.8}],p=new Map;await Promise.all(_.flatMap(R=>R.ids.map(async A=>{const B=await Dr(A).then(J=>J.slice(0,15)).catch(()=>`#${A}`);p.set(A,B)})));const $=await Dr(d).then(R=>R.slice(0,15)).catch(()=>`#${d}`);p.set(d,$);const y=new Map;_.forEach(({ids:R,x:A})=>{const B=Math.max(R.length,1);R.forEach((J,W)=>{const Q=B===1?.5:.2+.6*(W+.5)/B,te=ms(s,{x:A,y:Q},p.get(J)||`#${J}`);te.node.onclick=()=>{J===g.currentId?(window.history.pushState({},"",`/${J}`),t(`/${J}`)):(window.history.pushState({},"",`/deps/${J}`),a(J))},y.set(J,te.rect)})});const h=ms(s,{x:.5,y:.1},p.get(d)||`#${d}`);h.node.onclick=()=>{window.history.pushState({},"",`/deps/${d}`),a(d)};const w=h.rect,k=(R,A)=>({x:A==="left"?R.x:R.x+R.width,y:R.y+R.height/2}),P=(R,A)=>({x:R.x+R.width/2,y:A==="top"?R.y:R.y+R.height}),O=y.get(g.currentId);O&&(g.inputs.forEach(R=>{const A=y.get(R);A&&ps(s,k(A,"right"),k(O,"left"))}),g.outputs.forEach(R=>{const A=y.get(R);A&&ps(s,k(O,"right"),k(A,"left"))}),w&&Yl(s,P(w,"bottom"),P(O,"top"))),Cn(g.currentId).then(R=>{o.innerHTML=R})};return{root:r,render:a}};let ho=()=>{},Qt=null,Pt=null,ys=null,mr=()=>{};const po=document.body,st=e=>Pt&&(Pt.innerHTML="",Pt.appendChild(e)),Vt=e=>(history.pushState({},"",e),mr()),eu=async e=>{try{const t=await Dn(e.schemaHash,e.data),r=typeof t=="string"?t.slice(1):String(await Ot(t));Vt(`/${r}`)}catch(t){$e(Ie("ERROR"),oe(t.message||"failed to add note"))}},gs=e=>st(Fl(e)),tu=e=>e?e.startsWith("deps/")?"/deps":`/${e}`:"/";mr=()=>{const e=window.location.pathname.replace(/^\/+/,"");if(console.log(e),mo.forEach(t=>{t.style.setProperty("opacity",t.pathname===tu(e)?"1":"0.5")}),e==="edit"){st(yo.root);const t=new URLSearchParams(window.location.search),r=t.get("id");if(t.get("new")==="1"&&localStorage.removeItem("edit_draft"),r===null){const s=localStorage.getItem("edit_draft");if(s&&s!==ys){ys=s;try{const o=JSON.parse(s);Qt(o)}catch{}}else Ot(0).then(o=>Qt({schemaHash:o,text:"{}"})).catch(()=>{})}else ve(Number(r)).then(s=>Qt({schemaHash:s.schemaHash,text:qe(s.data)})).catch(s=>$e(Ie("ERROR"),oe(s.message)));window.location.search&&history.replaceState({},"","/edit")}else e?e==="sql"?st(nu.root):e.startsWith("deps")?(st($s.root),$s.render(e.slice(5)||Er)):Number.isFinite(Number(e))?Ot(Number(e)).then(t=>{Er=String(t),gs(t)}):(Er=e,gs(e)):(st(Ln.root),ho())};const ru=z({padding:"1.5em",margin:".5em",borderRadius:"1em",background:"var(--background-color)",color:"var(--color)",border:"1px solid #ccc"});let Er=null,mo=[["Dashboard","/"],["Edit","/edit"],["SQL","/sql"],["Deps","/deps"]].map(([e,t])=>sr(z({textDecoration:"none",color:"inherit",fontWeight:"bold"}),{href:t,onclick:r=>{r.metaKey||(r.preventDefault(),Vt(t))}},e));po.appendChild(q(z({display:"flex",flexDirection:"column",gap:"0.75em",padding:"1em"}),sr(z({textDecoration:"none",color:"inherit"}),Ie("Json View"),{href:"/",onclick:e=>{e.preventDefault(),Vt("/")}}),q(z({display:"flex",gap:"1em"}),mo)));const Ln=Kl({query:be,navigate:Vt}),yo=Wl({submit:eu});Qt=yo.fill;const nu=Ql({query:be}),$s=Zl({query:be,navigate:Vt});Pt=q(ru);po.appendChild(Pt);ho=Ln.runQuery;st(Ln.root);mr();window.addEventListener("popstate",mr);
